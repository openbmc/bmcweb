{
  "comments": [
    {
      "key": {
        "uuid": "22fdbb97_a8c9fe71",
        "filename": "/COMMIT_MSG",
        "patchSetId": 5
      },
      "lineNbr": 25,
      "author": {
        "id": 1000020
      },
      "writtenOn": "2021-03-02T02:00:39Z",
      "side": 1,
      "message": "spelling",
      "range": {
        "startLine": 25,
        "startChar": 20,
        "endLine": 25,
        "endChar": 34
      },
      "revId": "2e9bb25b7b5d130969fa3aa4eb8059723acd7a12",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "463ecce9_6e6fffc1",
        "filename": "/COMMIT_MSG",
        "patchSetId": 5
      },
      "lineNbr": 41,
      "author": {
        "id": 1000020
      },
      "writtenOn": "2021-03-02T02:00:39Z",
      "side": 1,
      "message": "Seems like I would expect more testing than that. \nSince you touched nbd proxy, and websockets, I would expect testing for those.",
      "revId": "2e9bb25b7b5d130969fa3aa4eb8059723acd7a12",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "11784f55_20d6df51",
        "filename": "/COMMIT_MSG",
        "patchSetId": 5
      },
      "lineNbr": 41,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2021-03-02T02:16:50Z",
      "side": 1,
      "message": "agreed.  I mostly pushed this so we can get solidarity on all the use cases people need before going through all the testing on this.  I did test more than just logging in, I just did a mediocre job documenting it, which I will fix.\n\nwith that said, nbd is currently dead code (there\u0027s no backend for it) so I have no way to test it.  Based on the minimaly invasive code, and the shared implementation with all the other websockets, I\u0027m pretty sure I haven\u0027t changed the behavior from before, but there\u0027s no real way to know that.",
      "parentUuid": "463ecce9_6e6fffc1",
      "revId": "2e9bb25b7b5d130969fa3aa4eb8059723acd7a12",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0d30888c_831a8493",
        "filename": "include/dbus_utility.hpp",
        "patchSetId": 5
      },
      "lineNbr": 99,
      "author": {
        "id": 1000269
      },
      "writtenOn": "2021-03-19T10:22:38Z",
      "side": 1,
      "message": "Nit: Any specific reason for not using sdbusplus API filename(). \n\nIn a way this utility API is useful for non dbs object paths.",
      "range": {
        "startLine": 85,
        "startChar": 0,
        "endLine": 99,
        "endChar": 1
      },
      "revId": "2e9bb25b7b5d130969fa3aa4eb8059723acd7a12",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "eb764945_5951d2c6",
        "filename": "include/dbus_utility.hpp",
        "patchSetId": 5
      },
      "lineNbr": 99,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2021-03-19T16:01:02Z",
      "side": 1,
      "message": "Because this patchset was pushed before filename() existed.  Having to write this code was actually the reason I wrote filename in the first place.\n\nWill update on the next patchset.",
      "parentUuid": "0d30888c_831a8493",
      "range": {
        "startLine": 85,
        "startChar": 0,
        "endLine": 99,
        "endChar": 1
      },
      "revId": "2e9bb25b7b5d130969fa3aa4eb8059723acd7a12",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6bce3413_398cfb07",
        "filename": "include/nbd_proxy.hpp",
        "patchSetId": 5
      },
      "lineNbr": 265,
      "author": {
        "id": 1000269
      },
      "writtenOn": "2021-03-19T10:22:38Z",
      "side": 1,
      "message": "Move this down, after checking for ec. Lineno: 273",
      "range": {
        "startLine": 263,
        "startChar": 0,
        "endLine": 265,
        "endChar": 64
      },
      "revId": "2e9bb25b7b5d130969fa3aa4eb8059723acd7a12",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "926f912b_f51919c9",
        "filename": "include/nbd_proxy.hpp",
        "patchSetId": 5
      },
      "lineNbr": 265,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2021-03-19T16:01:02Z",
      "side": 1,
      "message": "This code hasn\u0027t changed in this patchset.  This seems like a good optimization for a future patchset if you\u0027d like to do it.",
      "parentUuid": "6bce3413_398cfb07",
      "range": {
        "startLine": 263,
        "startChar": 0,
        "endLine": 265,
        "endChar": 64
      },
      "revId": "2e9bb25b7b5d130969fa3aa4eb8059723acd7a12",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7c7a9e3c_3be916e2",
        "filename": "include/nbd_proxy.hpp",
        "patchSetId": 5
      },
      "lineNbr": 322,
      "author": {
        "id": 1000269
      },
      "writtenOn": "2021-03-19T10:22:38Z",
      "side": 1,
      "message": "objects empty check should be above for for (const auto\u0026 objectPath : objects); Line no: 273",
      "range": {
        "startLine": 322,
        "startChar": 15,
        "endLine": 322,
        "endChar": 35
      },
      "revId": "2e9bb25b7b5d130969fa3aa4eb8059723acd7a12",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "301264d1_e03a9a17",
        "filename": "include/nbd_proxy.hpp",
        "patchSetId": 5
      },
      "lineNbr": 322,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2021-03-19T16:01:02Z",
      "side": 1,
      "message": "This code also hasn\u0027t changed in this patchset, this would be a good optimization to make in the next patchset.",
      "parentUuid": "7c7a9e3c_3be916e2",
      "range": {
        "startLine": 322,
        "startChar": 15,
        "endLine": 322,
        "endChar": 35
      },
      "revId": "2e9bb25b7b5d130969fa3aa4eb8059723acd7a12",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f1d78cca_1e895388",
        "filename": "include/sessions.hpp",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 1000022
      },
      "writtenOn": "2021-02-22T16:11:30Z",
      "side": 1,
      "message": "I am hoping this change is going to break the LDAP which was working before with the following call.\n\nhttps://gerrit.openbmc-project.xyz/c/openbmc/bmcweb/+/39756/5/http/routing.hpp#b1405",
      "revId": "2e9bb25b7b5d130969fa3aa4eb8059723acd7a12",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5e42e0f2_2a31cdd5",
        "filename": "include/sessions.hpp",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2021-02-22T16:26:04Z",
      "side": 1,
      "message": "This change assumes that phosphor-user-manager is working properly.  If this is broken, isn\u0027t there a bug in the properties changed event for LDAP users?",
      "parentUuid": "f1d78cca_1e895388",
      "revId": "2e9bb25b7b5d130969fa3aa4eb8059723acd7a12",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c5d20ba2_a19bccf4",
        "filename": "include/sessions.hpp",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 1000022
      },
      "writtenOn": "2021-02-23T03:21:48Z",
      "side": 1,
      "message": "Ed, We don\u0027t list the LDAP users on the Dbus. LDAP is used on the BMC for authentication not for the user management.\n\nLDAP notification is not supported in the back-end(nss-pam-ldapd).",
      "parentUuid": "5e42e0f2_2a31cdd5",
      "revId": "2e9bb25b7b5d130969fa3aa4eb8059723acd7a12",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d61d4310_e79243ff",
        "filename": "include/sessions.hpp",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2021-02-23T03:24:26Z",
      "side": 1,
      "message": "How are ldap users authorized then?  SOME backend needs to hold the users privilege level on dbus.",
      "parentUuid": "c5d20ba2_a19bccf4",
      "revId": "2e9bb25b7b5d130969fa3aa4eb8059723acd7a12",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ebb2843b_31c57476",
        "filename": "include/sessions.hpp",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2021-02-23T03:27:22Z",
      "side": 1,
      "message": "Also, LDAP notification in the library isn\u0027t required to host the privilege level.\n\nThe reason most web services like this even have sessions is to avoid doing this exact thing, calling into ldap for every single request, which slows down everything.  Sessions are generally only authorized once, then that privilege level is held through the course of the session.\n\nThis is the same way your laptop works with an LDAP server.  If your privilege level on the LDAP server is changed, it\u0027s not immediately applied, you need to log out and log back in before it\u0027s applied.",
      "parentUuid": "d61d4310_e79243ff",
      "revId": "2e9bb25b7b5d130969fa3aa4eb8059723acd7a12",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "868870c7_148345bd",
        "filename": "include/sessions.hpp",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 1000022
      },
      "writtenOn": "2021-02-24T14:04:51Z",
      "side": 1,
      "message": "\u003e How are ldap users authorized then? \nWe use the linux API for authorization where we get the group ID by calling the getpwnam_r and then call the getgrent to get the group name of the user..\nHow does the get ent knows that they need to make the ldap call? There is a nsswitch configuration where we tells that for password, grpup search what should be called(Linux, ldap).\n\nI am not sure that internally these API makes the LDAP call for each request to get the grpup name or it caches somewhere.but I have seen most of the times that LDAP call goes to the LDAP server for the authorization but it is very fast(in mili or micro seconds) as our ldap server is in the same network.",
      "parentUuid": "ebb2843b_31c57476",
      "revId": "2e9bb25b7b5d130969fa3aa4eb8059723acd7a12",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3e7d3e70_53e8a1f1",
        "filename": "include/sessions.hpp",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2021-02-24T18:01:28Z",
      "side": 1,
      "message": "\u003e \u003e How are ldap users authorized then? \n\u003e We use the linux API for authorization where we get the group ID by calling the getpwnam_r and then call the getgrent to get the group name of the user..\n\u003e How does the get ent knows that they need to make the ldap call? There is a nsswitch configuration where we tells that for password, grpup search what should be called(Linux, ldap).\n\u003e \n\u003e I am not sure that internally these API makes the LDAP call for each request to get the grpup name or it caches somewhere.but I have seen most of the times that LDAP call goes to the LDAP server for the authorization but it is very fast(in mili or micro seconds) as our ldap server is in the same network.\n\nYou can\u0027t assume the LDAP server will always be fast, nor can you assume that the LDAP server can handle the load of all the bmcweb requests that might come through, also \"fast\" is relative, it\u0027s another network connection that needs polled, and significantly increases the response times.  Considering bmcweb is supposed to respond in a matter of milliseconds, adding another milliseconds hop to every request seems like an issue.\n\nConsidering that bmcweb is logging in via PAM directly, I would expect the getgrent to also be in bmcweb, so we can authorize users and determine their groups without any intermediates, at the same time we do the pam_authenticate call.  With that said, I don\u0027t have a problem authorizing through dbus, I have a problem authorizing every request.  If you have requirements around supporting removing sessions when the groups change (which is fairly unique) then phosphor-user-manager needs to set up inotify, and event on them properly.",
      "parentUuid": "868870c7_148345bd",
      "revId": "2e9bb25b7b5d130969fa3aa4eb8059723acd7a12",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8f04fac5_1d665edb",
        "filename": "include/sessions.hpp",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 1000022
      },
      "writtenOn": "2021-02-25T14:29:48Z",
      "side": 1,
      "message": "\u003e Considering that bmcweb is logging in via PAM directly,\nYes that will also make LDAP request for authentication via pam_ldap module.\n\n\u003e  I would expect the getgrent to also be in bmcweb, so we can authorize users and determine their groups without any intermediates, \ngetgrent internally makes the ldap request to get the group info from the LDAP. I think I have asked this info on the nss-pam-ldapd mailing list also.\n\nI am not sure either we make the getgrent call from the bmcweb or the phophosr-user-manager does, How it is solving the problem.\n\nOnce you get the group name you need to get the privilege for the group, for the same there is Dbus application.Hence you need to make the D-bus call.\n\nNow the question is whether getgrent is making the ldap call for each authorisation request or for some x amount of time it caches and then invalidate the cache , I have to take a look or I can fire a query to the maintainer of the nss-pam-ldapd.",
      "parentUuid": "3e7d3e70_53e8a1f1",
      "revId": "2e9bb25b7b5d130969fa3aa4eb8059723acd7a12",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e3554ca9_10e82a16",
        "filename": "include/sessions.hpp",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2021-02-25T15:41:32Z",
      "side": 1,
      "message": "\u003e \u003e Considering that bmcweb is logging in via PAM directly,\n\u003e Yes that will also make LDAP request for authentication via pam_ldap module.\n\u003e \n\u003e \u003e  I would expect the getgrent to also be in bmcweb, so we can authorize users and determine their groups without any intermediates, \n\u003e getgrent internally makes the ldap request to get the group info from the LDAP. I think I have asked this info on the nss-pam-ldapd mailing list also.\n\u003e \n\u003e I am not sure either we make the getgrent call from the bmcweb or the phophosr-user-manager does, How it is solving the problem.\n\u003e \n\u003e Once you get the group name you need to get the privilege for the group, for the same there is Dbus application.Hence you need to make the D-bus call.\n\nI\u0027m not following this.  The group names contain the privileges for the groups.  If the user is in the admin group, it has admin privileges, operator group gets operator privileges, ect.  Why does that necessitate a call into phosphor-user-manager?\n\n\u003e \n\u003e Now the question is whether getgrent is making the ldap call for each authorisation request or for some x amount of time it caches and then invalidate the cache , I have to take a look or I can fire a query to the maintainer of the nss-pam-ldapd.\n\nThis doesn\u0027t matter, as getgrent would only be called when a session is created, and wouldn\u0027t need to be run on every request.",
      "parentUuid": "8f04fac5_1d665edb",
      "revId": "2e9bb25b7b5d130969fa3aa4eb8059723acd7a12",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "53744024_c0b46369",
        "filename": "include/sessions.hpp",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 1000022
      },
      "writtenOn": "2021-03-02T03:35:18Z",
      "side": 1,
      "message": "\u003e I\u0027m not following this.  The group names contain the privileges for the groups.  If the user is in the admin group, it has admin privileges, operator group gets operator privileges, ect.  Why does that necessitate a call into phosphor-user-manager?\n\nWe have two types of users.\n\n1) Local user: During creation of the local user we give the privilege to the user as admin, opertaor etc.\n   NOTE: This privilege is nothing : In linux it is the group where the user lies.\n\n2) LDAP user doesn\u0027t lie in group called priv admin, priv-opertaor which we made it for openbmc user management, we can not ask the ldap admin to create the user and tied the user with priv opertor or prive admin group.\n\n   Now in this case we need to map the LDAP grpup to the BMC privilege model. which we do it by having interface which maps the group to privilege model.There is a Dbus service for the same.\n\n   In redfish also we have the property called \"RemoteRole mapping\" for the same purpose where mapping rules that are used to convert the external account providers account information to the local Redfish role.\n\nSo we have two methods to get the privilege of a user.\n\nIf it is local user you can directly get the privilege of the user(by having Dbus call or Monitor the Dbus object) but if it is ldap user then we need to get the group id of the user from the LDAp server  and then find the privilege of the group by having Dbus call to the user manager..\n\nI agree with your point that privilege should be fetched during authentication not for each request for the same session.\n\nThis can be done if we keep the privilege in the in memory session object during authentication and each successive request will be matched against the privilege which is there in the in-memory session object.",
      "parentUuid": "e3554ca9_10e82a16",
      "revId": "2e9bb25b7b5d130969fa3aa4eb8059723acd7a12",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "90f170a7_c75b8434",
        "filename": "include/sessions.hpp",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2021-03-18T18:21:13Z",
      "side": 1,
      "message": "\u003e \u003e I\u0027m not following this.  The group names contain the privileges for the groups.  If the user is in the admin group, it has admin privileges, operator group gets operator privileges, ect.  Why does that necessitate a call into phosphor-user-manager?\n\u003e \n\u003e We have two types of users.\n\u003e \n\u003e 1) Local user: During creation of the local user we give the privilege to the user as admin, opertaor etc.\n\u003e    NOTE: This privilege is nothing : In linux it is the group where the user lies.\n\u003e \n\u003e 2) LDAP user doesn\u0027t lie in group called priv admin, priv-opertaor which we made it for openbmc user management, we can not ask the ldap admin to create the user and tied the user with priv opertor or prive admin group.\n\u003e \n\u003e    Now in this case we need to map the LDAP grpup to the BMC privilege model. which we do it by having interface which maps the group to privilege model.There is a Dbus service for the same.\n\u003e \n\u003e    In redfish also we have the property called \"RemoteRole mapping\" for the same purpose where mapping rules that are used to convert the external account providers account information to the local Redfish role.\n\u003e \n\u003e So we have two methods to get the privilege of a user.\n\u003e \n\u003e If it is local user you can directly get the privilege of the user(by having Dbus call or Monitor the Dbus object) but if it is ldap user then we need to get the group id of the user from the LDAp server  and then find the privilege of the group by having Dbus call to the user manager..\n\nI was with you so far until this statement.  Why doesn\u0027t user manager just host an interface with the users group on it, then we\u0027re not changing any behavior based on whether or not the user is LDAP.\n\n\u003e \n\u003e I agree with your point that privilege should be fetched during authentication not for each request for the same session.\n\u003e \n\u003e This can be done if we keep the privilege in the in memory session object during authentication and each successive request will be matched against the privilege which is there in the in-memory session object.\n\nGreat.  We can certainly do that.",
      "parentUuid": "53744024_c0b46369",
      "revId": "2e9bb25b7b5d130969fa3aa4eb8059723acd7a12",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "dc123fdf_c1b6e410",
        "filename": "include/sessions.hpp",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 1000022
      },
      "writtenOn": "2021-03-22T09:12:38Z",
      "side": 1,
      "message": "\u003e I was with you so far until this statement.  Why doesn\u0027t user manager just host an interface with the users group on it, then we\u0027re not changing any behavior based on whether or not the user is LDAP.\n\nHoping we are on the same page,For LDAP users we don\u0027t have Dbus objects and the reason is LDAP notification is not supported so we can not update the Dbus objects regularly.\n\n\"Why doesn\u0027t user manager just host an interface with the users group on it\"\nI didn\u0027t get this.Can you explain bit more?\n\n\n\u003e Great.  We can certainly do that.\n\nIn that case for the local user : we will be getting the privilege from the Dbus object and updating the session object with the privilege.\n\nFor the LDAP user: if we don\u0027t find the user in the Dbus objects(as the Dbus objects are there only for local users) then we would be asking LDAP server to get the info about that user and get the privilege of the LDAP user and update the session object.\n\nAre you fine with it? We can push a commit for the same.",
      "parentUuid": "90f170a7_c75b8434",
      "revId": "2e9bb25b7b5d130969fa3aa4eb8059723acd7a12",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a998e8a4_a74bd178",
        "filename": "include/sessions.hpp",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2021-03-22T16:33:10Z",
      "side": 1,
      "message": "\u003e \u003e I was with you so far until this statement.  Why doesn\u0027t user manager just host an interface with the users group on it, then we\u0027re not changing any behavior based on whether or not the user is LDAP.\n\u003e \n\u003e Hoping we are on the same page,For LDAP users we don\u0027t have Dbus objects and the reason is LDAP notification is not supported so we can not update the Dbus objects regularly.\n\nI\u0027m not sure why that would be required?  Just update it on a successful login, and that would be in line with how ldap is generally done.\n\n\u003e \n\u003e \"Why doesn\u0027t user manager just host an interface with the users group on it\"\n\u003e I didn\u0027t get this.Can you explain bit more?\n\u003e \n\u003e \n\u003e \u003e Great.  We can certainly do that.\n\u003e \n\u003e In that case for the local user : we will be getting the privilege from the Dbus object and updating the session object with the privilege.\n\u003e \n\u003e For the LDAP user: if we don\u0027t find the user in the Dbus objects(as the Dbus objects are there only for local users) then we would be asking LDAP server to get the info about that user and get the privilege of the LDAP user and update the session object.\n\nif by \"we\" above, you\u0027re talking about phosphor-user-manager, then yes, that would be fine.  I wouldn\u0027t expect any difference between a local user and an LDAP user in terms of bmcweb.  Phosphor-user-manager should provide the appropriate interfaces to make them look the same.\n\n\u003e \n\u003e Are you fine with it? We can push a commit for the same.",
      "parentUuid": "dc123fdf_c1b6e410",
      "revId": "2e9bb25b7b5d130969fa3aa4eb8059723acd7a12",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "90a8edc6_d6b3d67a",
        "filename": "include/sessions.hpp",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 1000022
      },
      "writtenOn": "2021-03-23T12:59:47Z",
      "side": 1,
      "message": "\u003e if by \"we\" above, you\u0027re talking about phosphor-user-manager, then yes, that would be fine.  I wouldn\u0027t expect any difference between a local user and an LDAP user in terms of bmcweb.  Phosphor-user-manager should provide the appropriate interfaces to make them look the same.\n\nFor the same reason phosphor-user-manager provides the following interface. \n\nhttps://github.com/openbmc/phosphor-dbus-interfaces/blob/master/xyz/openbmc_project/User/Manager.interface.yaml#L60\n\nHope I have not misunderstood you.",
      "parentUuid": "a998e8a4_a74bd178",
      "revId": "2e9bb25b7b5d130969fa3aa4eb8059723acd7a12",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "41589718_18e13016",
        "filename": "include/sessions.hpp",
        "patchSetId": 5
      },
      "lineNbr": 72,
      "author": {
        "id": 1000269
      },
      "writtenOn": "2021-03-19T10:22:38Z",
      "side": 1,
      "message": "instead of empty string string, Isnt it better to make return code ad std::optional and return std::nullopt here?",
      "range": {
        "startLine": 72,
        "startChar": 19,
        "endLine": 72,
        "endChar": 22
      },
      "revId": "2e9bb25b7b5d130969fa3aa4eb8059723acd7a12",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f7ed22e7_1dbd9cfd",
        "filename": "include/sessions.hpp",
        "patchSetId": 5
      },
      "lineNbr": 72,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2021-03-19T16:01:02Z",
      "side": 1,
      "message": "This was already what the old code did (which was reviewed) but this request seems reasonable.\n\nWill add.",
      "parentUuid": "41589718_18e13016",
      "range": {
        "startLine": 72,
        "startChar": 19,
        "endLine": 72,
        "endChar": 22
      },
      "revId": "2e9bb25b7b5d130969fa3aa4eb8059723acd7a12",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2802a9d9_f585b88d",
        "filename": "include/sessions.hpp",
        "patchSetId": 5
      },
      "lineNbr": 77,
      "author": {
        "id": 1000269
      },
      "writtenOn": "2021-03-19T10:22:38Z",
      "side": 1,
      "message": "I think this can be private method.",
      "range": {
        "startLine": 77,
        "startChar": 16,
        "endLine": 77,
        "endChar": 31
      },
      "revId": "2e9bb25b7b5d130969fa3aa4eb8059723acd7a12",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "77009994_9d599293",
        "filename": "include/sessions.hpp",
        "patchSetId": 5
      },
      "lineNbr": 77,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2021-03-19T16:01:02Z",
      "side": 1,
      "message": "ACK",
      "parentUuid": "2802a9d9_f585b88d",
      "range": {
        "startLine": 77,
        "startChar": 16,
        "endLine": 77,
        "endChar": 31
      },
      "revId": "2e9bb25b7b5d130969fa3aa4eb8059723acd7a12",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7e65ccf4_66055430",
        "filename": "include/sessions.hpp",
        "patchSetId": 5
      },
      "lineNbr": 121,
      "author": {
        "id": 1000269
      },
      "writtenOn": "2021-03-19T10:22:38Z",
      "side": 1,
      "message": "Any specific reason for not using latest added sdbusplus API for extracting last node from object path(object_path::filename())?",
      "range": {
        "startLine": 121,
        "startChar": 42,
        "endLine": 121,
        "endChar": 78
      },
      "revId": "2e9bb25b7b5d130969fa3aa4eb8059723acd7a12",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "cd3752d0_2b95d69b",
        "filename": "include/sessions.hpp",
        "patchSetId": 5
      },
      "lineNbr": 121,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2021-03-19T16:01:02Z",
      "side": 1,
      "message": "Because this patchset predates filename() being added.  Having to write the utility function was actually the reason I created filename in the first place.\n\nWill fix.",
      "parentUuid": "7e65ccf4_66055430",
      "range": {
        "startLine": 121,
        "startChar": 42,
        "endLine": 121,
        "endChar": 78
      },
      "revId": "2e9bb25b7b5d130969fa3aa4eb8059723acd7a12",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6bcac7cc_3dec2565",
        "filename": "include/sessions.hpp",
        "patchSetId": 5
      },
      "lineNbr": 124,
      "author": {
        "id": 1000269
      },
      "writtenOn": "2021-03-19T10:22:38Z",
      "side": 1,
      "message": "very unlikely this can happen, but better add a error log for debugging purpose.",
      "range": {
        "startLine": 124,
        "startChar": 12,
        "endLine": 124,
        "endChar": 19
      },
      "revId": "2e9bb25b7b5d130969fa3aa4eb8059723acd7a12",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0f35836e_7bf1891d",
        "filename": "include/sessions.hpp",
        "patchSetId": 5
      },
      "lineNbr": 124,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2021-03-19T16:01:02Z",
      "side": 1,
      "message": "Sure, I will treat this as a nit.  We don\u0027t have any policy where all errors need debug logging, and like you say, this is extremely unlikely (would require the dbus interfaces themselves to produce non-dbus compliant paths).",
      "parentUuid": "6bcac7cc_3dec2565",
      "range": {
        "startLine": 124,
        "startChar": 12,
        "endLine": 124,
        "endChar": 19
      },
      "revId": "2e9bb25b7b5d130969fa3aa4eb8059723acd7a12",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e6515750_5cc6e251",
        "filename": "include/sessions.hpp",
        "patchSetId": 5
      },
      "lineNbr": 156,
      "author": {
        "id": 1000269
      },
      "writtenOn": "2021-03-19T10:22:38Z",
      "side": 1,
      "message": "sdbusplus object path, You can use objPath.filename()",
      "range": {
        "startLine": 156,
        "startChar": 42,
        "endLine": 156,
        "endChar": 78
      },
      "revId": "2e9bb25b7b5d130969fa3aa4eb8059723acd7a12",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "843c4095_a9d61222",
        "filename": "include/sessions.hpp",
        "patchSetId": 5
      },
      "lineNbr": 156,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2021-03-19T16:01:02Z",
      "side": 1,
      "message": "See last 2 comments.  This code predates filename() but I will update.",
      "parentUuid": "e6515750_5cc6e251",
      "range": {
        "startLine": 156,
        "startChar": 42,
        "endLine": 156,
        "endChar": 78
      },
      "revId": "2e9bb25b7b5d130969fa3aa4eb8059723acd7a12",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5d78f272_00768b4f",
        "filename": "include/sessions.hpp",
        "patchSetId": 5
      },
      "lineNbr": 192,
      "author": {
        "id": 1000269
      },
      "writtenOn": "2021-03-19T10:22:38Z",
      "side": 1,
      "message": "I see in other places, If user is there and \"UserPrivilege\" is not found/error, we are filling roleMap with empty role. Lets be consistent.",
      "range": {
        "startLine": 189,
        "startChar": 8,
        "endLine": 192,
        "endChar": 9
      },
      "revId": "2e9bb25b7b5d130969fa3aa4eb8059723acd7a12",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "68f1a3dc_e0d47327",
        "filename": "include/sessions.hpp",
        "patchSetId": 5
      },
      "lineNbr": 192,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2021-03-19T16:01:02Z",
      "side": 1,
      "message": "I\u0027m not quite following this comment.  Can you point to the other places?\n\nEmpty roles have the potential to be attack vectors, so I\u0027m not inclined to do that unless there\u0027s a good reason (and the code you\u0027re referring to should probably be changed).",
      "parentUuid": "5d78f272_00768b4f",
      "range": {
        "startLine": 189,
        "startChar": 8,
        "endLine": 192,
        "endChar": 9
      },
      "revId": "2e9bb25b7b5d130969fa3aa4eb8059723acd7a12",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9be5dd68_0b3b0d5a",
        "filename": "include/sessions.hpp",
        "patchSetId": 5
      },
      "lineNbr": 201,
      "author": {
        "id": 1000269
      },
      "writtenOn": "2021-03-19T10:22:38Z",
      "side": 1,
      "message": "If user is not found in roleMap, And see there is property changed for user(Unlikely), Why can\u0027t we add  new entry with fetched role along with username?",
      "range": {
        "startLine": 198,
        "startChar": 11,
        "endLine": 201,
        "endChar": 19
      },
      "revId": "2e9bb25b7b5d130969fa3aa4eb8059723acd7a12",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9d5cd4e6_eeed1462",
        "filename": "include/sessions.hpp",
        "patchSetId": 5
      },
      "lineNbr": 201,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2021-03-19T16:01:02Z",
      "side": 1,
      "message": "Because it\u0027s an error condition that has broken dbus APIs.  We should not attempt any recovery in the cases where dbus apis were not obeyed, it could lead to possible attack vectors.",
      "parentUuid": "9be5dd68_0b3b0d5a",
      "range": {
        "startLine": 198,
        "startChar": 11,
        "endLine": 201,
        "endChar": 19
      },
      "revId": "2e9bb25b7b5d130969fa3aa4eb8059723acd7a12",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "fcbf1bc5_2402d2a5",
        "filename": "include/sessions.hpp",
        "patchSetId": 5
      },
      "lineNbr": 249,
      "author": {
        "id": 1000269
      },
      "writtenOn": "2021-03-19T10:22:38Z",
      "side": 1,
      "message": "You need to check for validity of name( empty check).",
      "range": {
        "startLine": 249,
        "startChar": 32,
        "endLine": 249,
        "endChar": 37
      },
      "revId": "2e9bb25b7b5d130969fa3aa4eb8059723acd7a12",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "76c8e6b7_7ec49be7",
        "filename": "include/sessions.hpp",
        "patchSetId": 5
      },
      "lineNbr": 249,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2021-03-19T16:01:02Z",
      "side": 1,
      "message": "ACK, this came from the old code.",
      "parentUuid": "fcbf1bc5_2402d2a5",
      "range": {
        "startLine": 249,
        "startChar": 32,
        "endLine": 249,
        "endChar": 37
      },
      "revId": "2e9bb25b7b5d130969fa3aa4eb8059723acd7a12",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "dbe50161_477e5aca",
        "filename": "include/sessions.hpp",
        "patchSetId": 5
      },
      "lineNbr": 251,
      "author": {
        "id": 1000269
      },
      "writtenOn": "2021-03-19T10:22:38Z",
      "side": 1,
      "message": "We need to check for UserGroups as well before adding users to this roleMap. Users which are not associated with \"redfish\" userGroups are not applicable to Redfish at all.",
      "range": {
        "startLine": 251,
        "startChar": 20,
        "endLine": 251,
        "endChar": 48
      },
      "revId": "2e9bb25b7b5d130969fa3aa4eb8059723acd7a12",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "40a363c9_c3b69e03",
        "filename": "include/sessions.hpp",
        "patchSetId": 5
      },
      "lineNbr": 251,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2021-03-19T16:01:02Z",
      "side": 1,
      "message": "the redfish user groups are checked in other places.  I\u0027d prefer we do that in one place.",
      "parentUuid": "dbe50161_477e5aca",
      "range": {
        "startLine": 251,
        "startChar": 20,
        "endLine": 251,
        "endChar": 48
      },
      "revId": "2e9bb25b7b5d130969fa3aa4eb8059723acd7a12",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    }
  ]
}