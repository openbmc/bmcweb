{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "11157395_44616ec8",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2025-03-11T15:31:07Z",
      "side": 1,
      "message": "This patch is just duplicating the logs between the various hosts;  That would generally be incorrect in Redfish, and we should be looking up which host each log entry belongs to.  Unclear how to proceed with this.",
      "revId": "ce014b44808b7086326668c55ca8e9abec8519c3",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "00dfb4d4_f5f510c2",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1002065
      },
      "writtenOn": "2025-04-17T18:06:49Z",
      "side": 1,
      "message": "I have excluded the EventLog entirely from the tree on multi-host for now.",
      "parentUuid": "11157395_44616ec8",
      "revId": "ce014b44808b7086326668c55ca8e9abec8519c3",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "28b00b18_72a02ba0",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1001712
      },
      "writtenOn": "2025-04-28T09:40:42Z",
      "side": 1,
      "message": "\u003e That would generally be incorrect in Redfish\n\nCan you kindly help me to understand this one? Had a look into the redfish data model spec and found this one:\n\n\u003e The LogService schema contains properties for monitoring and configuring a log service. When the Id property\ncontains DeviceLog , the log contains device-resident log entries that follow the physical device when moved from\nsystem-to-system, and not a replication or subset of a system event log\n\nWhen looking at a response from bmcweb, the ```Id``` property is ```EventLog``` so i assume that it is fine for the response to be a replication of a system event log?\n\nIf there is currently no way to filter event log entries for the host they belong to, what is the more useful behavior? Having no logs or a duplicate?",
      "parentUuid": "00dfb4d4_f5f510c2",
      "revId": "ce014b44808b7086326668c55ca8e9abec8519c3",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2294e590_036776cc",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2025-06-10T20:35:35Z",
      "side": 1,
      "message": "Sorry for the late reply, just saw this.\n\nEventLog is something OpenBMC specific, that is not the problem.  Redfish relies on a CRUD model, so if you expose two instances of EventLog on two different hosts, it technically means EACH host had those events.  That\u0027s not correct in the way redfish is modeled, and would lead to duplicates on any consumer.\n\n\u003e If there is currently no way to filter event log entries for the host they belong to, what is the more useful behavior? Having no logs or a duplicate?\n\nHaving duplicates is for sure incorrect.  Having no logs is allowed in the spec.  Which is more useful is debatable for the clients, ideally we\u0027d just follow the spec here.\n\n\nFWIW, the whole issue is that EventLog probably needs to be moved to Manager, for which there is only a single instance, but I get not wanting to take on that refactor.",
      "parentUuid": "28b00b18_72a02ba0",
      "revId": "ce014b44808b7086326668c55ca8e9abec8519c3",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b007ff81_d15c7264",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1001712
      },
      "writtenOn": "2025-06-11T12:13:28Z",
      "side": 1,
      "message": "### practical problems and further consequences of requiring unique Log Entries per-bmc\n\nIn case a of a 4-blade server, the common 12V drops below a threshold, generating an EventLog entry. Do we now duplicate that entry 4 times just so it has it\u0027s own unique id? \n\nImagine blade 3 is missing. So now the code generating (dbus-sensors) or aggregating (bmcweb/rsyslogd/phosphor-logging) sensor events has to know which blades are plugged to duplicate the event the correct number of times?\n\nMind that we also would need to do this in an atomic way such there is no point in time where anyone can query only one of these Log Entries, they must all be added to the LogService in one step.\n\nOh, and they must also fill the ```RelatedLogEntries``` property since these duplicates all refer to the same underlying event.\n\nAnd if you want to *Resolve* or *Delete* the EventLog entry, do that 4 times also?\n\n### redfish client must already handle duplicate EventId\n\n\u003e That\u0027s not correct in the way redfish is modeled, and would lead to duplicates on any consumer.\n\nRedfish clients already need to deal with duplicates since different BMCs generate their ```LogEntryId``` for the log entries independently.\n\nSo currently they already have to handle this case and assume Event Log entries to be unique only in the context of a single ComputerSystem.",
      "parentUuid": "2294e590_036776cc",
      "revId": "ce014b44808b7086326668c55ca8e9abec8519c3",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "547f3395_ce5243a5",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2025-06-11T13:49:33Z",
      "side": 1,
      "message": "\u003e Having no logs is allowed in the spec. Which is more useful is debatable for the clients, ideally we\u0027d just follow the spec here.\n\nThat\u0027s definitely not useful.  That means we can\u0027t manage a multi-host system.\n\n\u003e FWIW, the whole issue is that EventLog probably needs to be moved to Manager, for which there is only a single instance, but I get not wanting to take on that refactor.\n\nI think this is reasonable but it potentially breaks backwards compatibility.  Is this ok?\n\nAlternatively, I think we have a few cases we need better support on overall (and I\u0027m writing this because maybe it helps point us at a solution):\n     - \"no host\"\n     - \"single host\"\n     - \"multi host\"\n     \nRight now a lot of the URIs are only working for \"single host\" and in that model there is this view that \"chassis\" \u003d\u003d \"host\" and so much of the URIs are ambiguous along those lines.  For \"no host\", like Ventura, I think there are a good handful of URIs that are exposed but aren\u0027t appropriate; in that case we end up with an internal server error, due to missing object mapper lookups, rather than a clear \"this URI doesn\u0027t exist\".  On \"multi-host\", well we\u0027re working through all of that here.\n\nI suspect there is some benefit in a split between the \"chassis\" (being the whole box, mostly managed by the BMC) and the \"host\".  For single host maybe we continue to represent that as the \"Systems/system\" URI.  For no-host and multi-host maybe there is benefit in splitting the two such that: \"Systems/system\" (or \"Systems/chassis\") represents the \"chassis\" and \"Systems/systemN\" (or \"Systems/hostN\") represent the \"host\".  In this way it might make it clearer how to turn on or off the URIs appropriately.",
      "parentUuid": "b007ff81_d15c7264",
      "revId": "ce014b44808b7086326668c55ca8e9abec8519c3",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3e8aa5f6_1514dae8",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2025-07-01T03:04:56Z",
      "side": 1,
      "message": "\u003e \u003e Having no logs is allowed in the spec. Which is more useful is debatable for the clients, ideally we\u0027d just follow the spec here.\n\u003e \n\u003e That\u0027s definitely not useful.  That means we can\u0027t manage a multi-host system.\n\u003e \n\u003e \u003e FWIW, the whole issue is that EventLog probably needs to be moved to Manager, for which there is only a single instance, but I get not wanting to take on that refactor.\n\u003e \n\u003e I think this is reasonable but it potentially breaks backwards compatibility.  Is this ok?\n\nIt would need to be a meson option to not break existing code.  Too many things hardcode the existing path, and for single host systems.\n\n\u003e \n\u003e Alternatively, I think we have a few cases we need better support on overall (and I\u0027m writing this because maybe it helps point us at a solution):\n\u003e      - \"no host\"\n\u003e      - \"single host\"\n\u003e      - \"multi host\"\n\u003e      \n\u003e Right now a lot of the URIs are only working for \"single host\" and in that model there is this view that \"chassis\" \u003d\u003d \"host\" and so much of the URIs are ambiguous along those lines.  For \"no host\", like Ventura, I think there are a good handful of URIs that are exposed but aren\u0027t appropriate; in that case we end up with an internal server error, due to missing object mapper lookups, rather than a clear \"this URI doesn\u0027t exist\".  On \"multi-host\", well we\u0027re working through all of that here.\n\nLots of code wasn\u0027t the best when it came to mapper lookups and handling \"0 instances\" of an interface\".  I see oliver is already fixing some of them, if there\u0027s more, please send patchsets.  In what we document, 0 interfaces present should not be an error, and any 500 error that can actually be seen is a bug.  It\u0027s just not an easy thing to audit unless you start removing interfaces.\n\n\u003e \n\u003e I suspect there is some benefit in a split between the \"chassis\" (being the whole box, mostly managed by the BMC) and the \"host\".  For single host maybe we continue to represent that as the \"Systems/system\" URI.  For no-host and multi-host maybe there is benefit in splitting the two such that: \"Systems/system\" (or \"Systems/chassis\") represents the \"chassis\" and \"Systems/systemN\" (or \"Systems/hostN\") represent the \"host\".  In this way it might make it clearer how to turn on or off the URIs appropriately.\n\nHonestly, how to model multi-host in Redfish is getting to the edge of my Redfish knowledge.  We\u0027re probably at the point of engaging DMTF with appropriate questions about what gets logged where.",
      "parentUuid": "547f3395_ce5243a5",
      "revId": "ce014b44808b7086326668c55ca8e9abec8519c3",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "81b1b9fd_cc33720a",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2025-07-01T03:07:38Z",
      "side": 1,
      "message": "FWIW, this was one of the things that was solved by the suggestion that HOST0 have all the normal \"assume one host\" interfaces, and Host1-N have only the interfaces that we\u0027ve ported to multi-host.  Your logs would be on Host0 until they\u0027re moved or ported, and the redfish tree would be immediately useful on one node.  I get you guys had your reasons for not doing that, but just giving options.",
      "parentUuid": "3e8aa5f6_1514dae8",
      "revId": "ce014b44808b7086326668c55ca8e9abec8519c3",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    }
  ]
}