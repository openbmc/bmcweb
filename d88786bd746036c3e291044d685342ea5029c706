{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "26e6772b_fd2b3640",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 19,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2024-03-21T04:48:03Z",
      "side": 1,
      "message": "webserver_main.cpp isn\u0027t where we host configuration.  bmcweb_config.hpp is.",
      "range": {
        "startLine": 17,
        "startChar": 24,
        "endLine": 19,
        "endChar": 1
      },
      "revId": "d88786bd746036c3e291044d685342ea5029c706",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "cb9886f9_9d947f68",
        "filename": "redfish-core/lib/task.hpp",
        "patchSetId": 2
      },
      "lineNbr": 517,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2024-03-21T04:48:03Z",
      "side": 1,
      "message": "I kind of see what you\u0027re getting at here, but I suspect most cases are not this simple, where you would completely remove one static function from another.\n\nIf we want to make TaskService disablable, why wouldn\u0027t we do it with a meson option, like we do other things?  I suspect this same behavior can be accomplished in a 15 line diff.",
      "range": {
        "startLine": 508,
        "startChar": 0,
        "endLine": 517,
        "endChar": 7
      },
      "revId": "d88786bd746036c3e291044d685342ea5029c706",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d96ed801_99e2aff9",
        "filename": "redfish-core/lib/task.hpp",
        "patchSetId": 2
      },
      "lineNbr": 517,
      "author": {
        "id": 1001762
      },
      "writtenOn": "2024-03-21T07:17:26Z",
      "side": 1,
      "message": "by meson option I believe you are referring something like -DTASK_EVENT(Correct me if I am wrong). \nIf that is the case, how may places you will use this compiler directive?. I wanted to restrict the usage of ifdef TASK_EVENT to one place, which is in webserver_main.cpp. \n\nWithout this patch I can see that it should be used in at-least in 3 files. \n1) messgae_registry.hpp\n2) server_root.hpp\n3) webserver_main.cpp\n\nThink about scenario where we have  sever such apps. These three files will be having several ifdef checks. \n\nMy want is that inclusion of application header file in wbserver_main.hpp is enough to enable everything about it",
      "parentUuid": "cb9886f9_9d947f68",
      "range": {
        "startLine": 508,
        "startChar": 0,
        "endLine": 517,
        "endChar": 7
      },
      "revId": "d88786bd746036c3e291044d685342ea5029c706",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f5a9e8c0_10b872d9",
        "filename": "redfish-core/lib/task.hpp",
        "patchSetId": 2
      },
      "lineNbr": 517,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2024-03-21T16:03:07Z",
      "side": 1,
      "message": "\u003e by meson option I believe you are referring something like -DTASK_EVENT(Correct me if I am wrong). \n\nno, I mean something like\n\n```\nif constexpr (\u003cvariable from bmcweb_config.h\u003e)\n```\n\n\u003e If that is the case, how may places you will use this compiler directive?. \n\nAs many as are required to accomplish the task.\n\n\u003e I wanted to restrict the usage of ifdef TASK_EVENT to one place, which is in webserver_main.cpp. \n\nTaskEvent isn\u0027t defined in webserver_main.cpp at all.  If I understand what you\u0027re asking, you would first have to promote the registry routes to webserver_main.cpp?  What are you trying to accomplish by restricting the ifdef to one file?  If you want a complete list, they are all available in meson_options.txt.\n\n\u003e \n\u003e Without this patch I can see that it should be used in at-least in 3 files. \n\u003e 1) messgae_registry.hpp\n\ngit ls-files | grep message_registry.cpp\n\nDoesn\u0027t return any results.  Can you please just link to the line you\u0027re talking about on github.\n\n\u003e 2) server_root.hpp\n\nI\u0027m assuming this was meant to be \"service_root.hpp\" ?\nIndividual registries aren\u0027t registered in ServiceRoot, so no, this file wouldn\u0027t need to be modified.\n\n\u003e 3) webserver_main.cpp\n\u003e \n\u003e Think about scenario where we have  sever such apps. These three files will be having several ifdef checks. \n\nI\u0027m assuming you meant \"several such apps\"?  Yes, they will have several ifdef checks, just like we already do in redfish.hpp\n\nhttps://gerrit.openbmc.org/plugins/gitiles/openbmc/bmcweb/+/1f56a3a6031ba5992d52532cf2d32c76253c9167/redfish-core/include/redfish.hpp#74\n\n\u003e \n\u003e My want is that inclusion of application header file in wbserver_main.hpp is enough to enable everything about it\n\nWhy is that better?",
      "parentUuid": "d96ed801_99e2aff9",
      "range": {
        "startLine": 508,
        "startChar": 0,
        "endLine": 517,
        "endChar": 7
      },
      "revId": "d88786bd746036c3e291044d685342ea5029c706",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "12857e98_8fe17f2a",
        "filename": "redfish-core/lib/task.hpp",
        "patchSetId": 2
      },
      "lineNbr": 517,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2024-03-21T16:14:42Z",
      "side": 1,
      "message": "I guess, before responding to the individual questions, what are you overall trying to accomplish?  You seem to want to put all the ifdefs in one file, but you don\u0027t really answer WHY you want to do that, or what doing that enables for you.\n\nThe one example you came up with, Removing TaskEvent registry, might not be the best example, given that technically anything in the system can return an async Task, so it needs to be enabled unless all callers have been changed to not use async.  Is there a different example you can come up with that might be simpler?\n\nReading between the lines a bit, is this related to the License changes?",
      "parentUuid": "f5a9e8c0_10b872d9",
      "range": {
        "startLine": 508,
        "startChar": 0,
        "endLine": 517,
        "endChar": 7
      },
      "revId": "d88786bd746036c3e291044d685342ea5029c706",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c94e2554_05cefd52",
        "filename": "redfish-core/lib/task.hpp",
        "patchSetId": 2
      },
      "lineNbr": 517,
      "author": {
        "id": 1001762
      },
      "writtenOn": "2024-03-22T05:05:50Z",
      "side": 1,
      "message": "Look at message_registries.hpp line no 25 . The task related headers are removed.\nWhich means message_registry is no more depending on task.\nAt line 508 task.hpp, messages related to task is registered here.\n\nThis will be invoked by [redfish.hpp](https://github.com/openbmc/bmcweb/blob/master/redfish-core/include/redfish.hpp#L228)\n\nYes I took wrong example of task to demonstrate the usage. But you can get the overall idea here.\n\nIf you want to remove task feature , then we can do it at single place which is  [redfish.hpp](https://github.com/openbmc/bmcweb/blob/master/redfish-core/include/redfish.hpp#L228) \n\nFor other applications disabling will be done at  [webserver_main.cpp](https://github.com/openbmc/bmcweb/blob/master/src/webserver_main.cpp#L81). \n\nThe overall ideas is to co-locate all related data  to single place. It will be easier to enable or disable an application then. \n\nI wanted to even remove entire code starting from [here](https://github.com/openbmc/bmcweb/blob/master/src/webserver_main.cpp#L76) to [here](https://github.com/openbmc/bmcweb/blob/master/src/webserver_main.cpp#L130) with couple of lines. \nI thought that that would be bigger change set then. \n\nIf you are interested I can incorporate those changes too in this patch set. \n\nBut it all depends on how community see it as a valuable feature or not. Personally I feel it  will have value addition in long term maintenance point of view.",
      "parentUuid": "12857e98_8fe17f2a",
      "range": {
        "startLine": 508,
        "startChar": 0,
        "endLine": 517,
        "endChar": 7
      },
      "revId": "d88786bd746036c3e291044d685342ea5029c706",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8d8e0305_576615ea",
        "filename": "redfish-core/lib/task.hpp",
        "patchSetId": 2
      },
      "lineNbr": 517,
      "author": {
        "id": 1001762
      },
      "writtenOn": "2024-03-22T05:08:33Z",
      "side": 1,
      "message": "Yes for me it is license. But in general for any application that cannot be upstreamed at the moment for various reasons. We need some flexible customization points from bmcweb to help those application keep as downstream app.",
      "parentUuid": "c94e2554_05cefd52",
      "range": {
        "startLine": 508,
        "startChar": 0,
        "endLine": 517,
        "endChar": 7
      },
      "revId": "d88786bd746036c3e291044d685342ea5029c706",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    }
  ]
}