{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "d6afb349_04845ad5",
        "filename": "redfish-core/lib/log_services.hpp",
        "patchSetId": 10
      },
      "lineNbr": 1436,
      "author": {
        "id": 1000020
      },
      "writtenOn": "2024-08-13T19:22:57Z",
      "side": 1,
      "message": "With this patch I see errors in the journal:\n\n```\n[ERROR dbus_utils.hpp:29] DBUS property error in property: Id, reason: 0\n[CRITICAL error_messages.cpp:290] Internal Error /usr/src/debug/bmcweb/1.0+git/redfish-core/lib/log_services.hpp(1436:32) `void redfish::fillEventLogLogEntryFromPropertyMap(const std::shared_ptr\u003cbmcweb::AsyncResp\u003e\u0026, const dbus::utility::DBusPropertiesMap\u0026, nlohmann::json_abi_v3_11_3::json\u0026)`:\n```\n\n\nWithout this patch I see it working as expected \n```\n\"@odata.id\": \"/redfish/v1/Systems/system/LogServices/EventLog/Entries\",\n\"@odata.type\": \"#LogEntryCollection.LogEntryCollection\",\n\"Description\": \"Collection of System Event Log Entries\",\n\"Members\": [\n{\n\"@odata.id\": \"/redfish/v1/Systems/system/LogServices/EventLog/Entries/1\",\n\"@odata.type\": \"#LogEntry.v1_9_0.LogEntry\",\n\"AdditionalDataURI\": \"/redfish/v1/Systems/system/LogServices/EventLog/Entries/1/attachment\",\n\"Created\": \"2024-08-13T06:17:37.156+00:00\",\n\"EntryType\": \"Event\",\n\"Id\": \"1\",\n\"Message\": \"xyz.openbmc_project.Logging.Error.LogsCleared\",\n\"Modified\": \"2024-08-13T06:17:37.156+00:00\",\n\"Name\": \"System Event Log Entry\",\n\"Resolved\": false,\n\"ServiceProviderNotified\": false,\n\"Severity\": \"OK\"\n},\n```\n\n```\nbusctl introspect xyz.openbmc_project.Logging /xyz/openbmc_project/logging/entry/1\nNAME                                        TYPE      SIGNATURE RESULT/VALUE                             FLAGS\norg.freedesktop.DBus.Introspectable         interface -         -                                        -\n.Introspect                                 method    -         s                                        -\n\n...\n\nxyz.openbmc_project.Logging.Entry           interface -         -                                        -\n.GetEntry                                   method    -         h                                        -\n.AdditionalData                             property  as        1 \"NUM_LOGS\u003d2\"                           emits-change writable\n.EventId                                    property  s         \"BD8D2007 00000055 2E2D0010 00000000 ... emits-change writable\n.Id                                         property  u         1                                        emits-change writable\n.Message                                    property  s         \"xyz.openbmc_project.Logging.Error.Lo... emits-change writable\n.Resolution                                 property  s         \"\"                                       emits-change writable\n.Resolved                                   property  b         false                                    emits-change writable\n.ServiceProviderNotify                      property  s         \"xyz.openbmc_project.Logging.Entry.No... emits-change writable\n.Severity                                   property  s         \"xyz.openbmc_project.Logging.Entry.Le... emits-change writable\n.Timestamp                                  property  t         1723529857156                            emits-change writable\n.UpdateTimestamp                            property  t         1723529857156    \n\n```",
      "revId": "c046286aec13bd08ebbd28145a3d01b2a93ae6a1",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7121bcfb_424f18c3",
        "filename": "redfish-core/lib/log_services.hpp",
        "patchSetId": 10
      },
      "lineNbr": 1436,
      "author": {
        "id": 1000020
      },
      "writtenOn": "2024-08-13T19:40:37Z",
      "side": 1,
      "message": "I saw this at redfish/v1/Systems/system/LogServices/EventLog/Entries with the top commit as well\n\n```\n./bmcweb \n[ERROR dbus_utils.hpp:29] DBUS property error in property: Id, reason: 0\n[CRITICAL error_messages.cpp:290] Internal Error /usr/src/debug/bmcweb/1.0+git/redfish-core/lib/log_services.hpp(1534:32) `void redfish::fillEventLogLogEntryFromPropertyMap(const std::shared_ptr\u003cbmcweb::AsyncResp\u003e\u0026, const dbus::utility::DBusPropertiesMap\u0026, nlohmann::json_abi_v3_11_3::json\u0026)`: \nAborted (core dumped)\n```",
      "parentUuid": "d6afb349_04845ad5",
      "revId": "c046286aec13bd08ebbd28145a3d01b2a93ae6a1",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0e1c5cbe_f42e7307",
        "filename": "redfish-core/lib/log_services.hpp",
        "patchSetId": 10
      },
      "lineNbr": 1436,
      "author": {
        "id": 1000020
      },
      "writtenOn": "2024-08-13T19:45:13Z",
      "side": 1,
      "message": "Complete tree/LogEntry \n\n```\nbusctl tree xyz.openbmc_project.Logging\n`- /xyz\n  `- /xyz/openbmc_project\n    `- /xyz/openbmc_project/logging\n      |- /xyz/openbmc_project/logging/entry\n      | |- /xyz/openbmc_project/logging/entry/1\n      | `- /xyz/openbmc_project/logging/entry/2\n      `- /xyz/openbmc_project/logging/internal\n        `- /xyz/openbmc_project/logging/internal/manager\n\n```\n\n```\n# busctl introspect xyz.openbmc_project.Logging /xyz/openbmc_project/logging/entry/2\nNAME                                        TYPE      SIGNATURE RESULT/VALUE                             FLAGS\norg.freedesktop.DBus.Introspectable         interface -         -                                        -\n.Introspect                                 method    -         s                                        -\norg.freedesktop.DBus.Peer                   interface -         -                                        -\n.GetMachineId                               method    -         s                                        -\n.Ping                                       method    -         -                                        -\norg.freedesktop.DBus.Properties             interface -         -                                        -\n.Get                                        method    ss        v                                        -\n.GetAll                                     method    s         a{sv}                                    -\n.Set                                        method    ssv       -                                        -\n.PropertiesChanged                          signal    sa{sv}as  -                                        -\norg.open_power.Logging.PEL.Entry            interface -         -                                        -\n.Deconfig                                   property  b         false                                    emits-change writable\n.Guard                                      property  b         false                                    emits-change writable\n.Hidden                                     property  b         false                                    emits-change writable\n.ManagementSystemAck                        property  b         false                                    emits-change writable\n.PlatformLogID                              property  u         1342194621                               emits-change writable\n.Subsystem                                  property  s         \"BMC Firmware\"                           emits-change writable\n.Timestamp                                  property  t         1723529897420                            emits-change writable\nxyz.openbmc_project.Association.Definitions interface -         -                                        -\n.Associations                               property  a(sss)    0                                        emits-change writable\nxyz.openbmc_project.Common.FilePath         interface -         -                                        -\n.Path                                       property  s         \"/var/lib/phosphor-logging/extensions... emits-change writable\nxyz.openbmc_project.Logging.Entry           interface -         -                                        -\n.GetEntry                                   method    -         h                                        -\n.AdditionalData                             property  as        0                                        emits-change writable\n.EventId                                    property  s         \"BD8D2005 00000055 2E2D0010 00000000 ... emits-change writable\n.Id                                         property  u         2                                        emits-change writable\n.Message                                    property  s         \"org.open_power.Logging.Error.TestErr... emits-change writable\n.Resolution                                 property  s         \"1. Location Code: U78DA.ND0.WZS004A-... emits-change writable\n.Resolved                                   property  b         false                                    emits-change writable\n.ServiceProviderNotify                      property  s         \"xyz.openbmc_project.Logging.Entry.No... emits-change writable\n.Severity                                   property  s         \"xyz.openbmc_project.Logging.Entry.Le... emits-change writable\n.Timestamp                                  property  t         1723529897420                            emits-change writable\n.UpdateTimestamp                            property  t         1723529897420                            emits-change writable\nxyz.openbmc_project.Object.Delete           interface -         -                                        -\n.Delete                                     method    -         -                                        -\nxyz.openbmc_project.Software.Version        interface -         -                                        -\n.Purpose                                    property  s         \"xyz.openbmc_project.Software.Version... emits-change writable\n.Version                                    property  s         \"fw1110.00-2.32\"                         emits-change writable\n\n```",
      "parentUuid": "7121bcfb_424f18c3",
      "revId": "c046286aec13bd08ebbd28145a3d01b2a93ae6a1",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c666a734_5436a4be",
        "filename": "redfish-core/lib/log_services.hpp",
        "patchSetId": 10
      },
      "lineNbr": 1436,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2024-08-13T19:58:29Z",
      "side": 1,
      "message": "Interesting, ok.  Thank you for testing.  THis is obviously something we\u0027ll have to look at closer.",
      "parentUuid": "0e1c5cbe_f42e7307",
      "revId": "c046286aec13bd08ebbd28145a3d01b2a93ae6a1",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f2353735_fd37e3ed",
        "filename": "redfish-core/lib/log_services.hpp",
        "patchSetId": 10
      },
      "lineNbr": 1436,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2024-08-13T20:03:06Z",
      "side": 1,
      "message": "I can\u0027t really explain why that error is happening (you seem to have an ID field in your dbus) but clearly something is wrong there.",
      "parentUuid": "c666a734_5436a4be",
      "revId": "c046286aec13bd08ebbd28145a3d01b2a93ae6a1",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e9b1676e_e97032ab",
        "filename": "redfish-core/lib/log_services.hpp",
        "patchSetId": 10
      },
      "lineNbr": 1436,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2024-08-15T19:38:09Z",
      "side": 1,
      "message": "I found the problem.  Not everything hosted under the logging tree is a LogEntry.  The old code checked before unpacking, the new code doesn\u0027t.\n\nIn theory the issue is fixed now.  Gunnar, if you want to retest, feel free, but I\u0027ve done enough testing that I suspect this can merge without breaking anyone.",
      "parentUuid": "f2353735_fd37e3ed",
      "revId": "c046286aec13bd08ebbd28145a3d01b2a93ae6a1",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e87b31cc_e423261c",
        "filename": "redfish-core/lib/log_services.hpp",
        "patchSetId": 10
      },
      "lineNbr": 1436,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2024-08-15T19:40:44Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "e9b1676e_e97032ab",
      "revId": "c046286aec13bd08ebbd28145a3d01b2a93ae6a1",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    }
  ]
}