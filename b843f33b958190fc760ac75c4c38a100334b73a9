{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "fff92e95_c77d33b6",
        "filename": "/COMMIT_MSG",
        "patchSetId": 26
      },
      "lineNbr": 34,
      "author": {
        "id": 1000020
      },
      "writtenOn": "2023-05-15T17:34:53Z",
      "side": 1,
      "message": "So https://gerrit.openbmc.org/c/openbmc/openbmc/+/61582/15/meta-phosphor/recipes-phosphor/users/phosphor-user-manager/upgrade_hostconsole_group.sh runs, so all old users should maintain access? I.e. there is not impacts to existing users",
      "revId": "b843f33b958190fc760ac75c4c38a100334b73a9",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "587e9a61_a87b8a02",
        "filename": "/COMMIT_MSG",
        "patchSetId": 26
      },
      "lineNbr": 34,
      "author": {
        "id": 1001634
      },
      "writtenOn": "2023-05-15T17:36:40Z",
      "side": 1,
      "message": "correct. The upgrade script will all existing user from priv-admin group to this new group.",
      "parentUuid": "fff92e95_c77d33b6",
      "revId": "b843f33b958190fc760ac75c4c38a100334b73a9",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2c6f741f_d147465e",
        "filename": "/COMMIT_MSG",
        "patchSetId": 26
      },
      "lineNbr": 38,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2023-05-15T23:46:29Z",
      "side": 1,
      "message": "Even if the user is in the readonly group?  This seems broken compared to previously.",
      "range": {
        "startLine": 37,
        "startChar": 46,
        "endLine": 38,
        "endChar": 29
      },
      "revId": "b843f33b958190fc760ac75c4c38a100334b73a9",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "9eb9dcec_38442266",
        "filename": "/COMMIT_MSG",
        "patchSetId": 26
      },
      "lineNbr": 38,
      "author": {
        "id": 1001634
      },
      "writtenOn": "2023-05-16T01:05:54Z",
      "side": 1,
      "message": "Assigning all groups for new user exist before this work. I did not change it. I am just noting it here because Gunnar had comment about it.",
      "parentUuid": "2c6f741f_d147465e",
      "range": {
        "startLine": 37,
        "startChar": 46,
        "endLine": 38,
        "endChar": 29
      },
      "revId": "b843f33b958190fc760ac75c4c38a100334b73a9",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "bfb99062_e77eecb1",
        "filename": "/COMMIT_MSG",
        "patchSetId": 26
      },
      "lineNbr": 38,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2023-05-16T19:15:03Z",
      "side": 1,
      "message": "no, but youâ€™re changing the behavior of the host console itself.  To be clear the bevavior you\u0027re changing:\n\nbefore: Create a user with ReadOnly access, user doesn\u0027t have access to console.\nAfter: Create a user with ReadOnly access, User has access to console because host console is applied to all users by default.  Did you test the read-only users use cases?",
      "parentUuid": "9eb9dcec_38442266",
      "range": {
        "startLine": 37,
        "startChar": 46,
        "endLine": 38,
        "endChar": 29
      },
      "revId": "b843f33b958190fc760ac75c4c38a100334b73a9",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c39af105_900b8e52",
        "filename": "/COMMIT_MSG",
        "patchSetId": 26
      },
      "lineNbr": 38,
      "author": {
        "id": 1001634
      },
      "writtenOn": "2023-05-16T22:20:12Z",
      "side": 1,
      "message": "I have created user99 and tried 3 roles. Admin role it can see the console button on GUI and console access is provided but for user99 with readonly or operator role, I don\u0027t even see the console button.",
      "parentUuid": "bfb99062_e77eecb1",
      "range": {
        "startLine": 37,
        "startChar": 46,
        "endLine": 38,
        "endChar": 29
      },
      "revId": "b843f33b958190fc760ac75c4c38a100334b73a9",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1aeee0a0_011c6d9d",
        "filename": "/COMMIT_MSG",
        "patchSetId": 26
      },
      "lineNbr": 38,
      "author": {
        "id": 1001634
      },
      "writtenOn": "2023-05-16T22:23:39Z",
      "side": 1,
      "message": "# Admin user has console access.\n+ curl -k https://admin:0penBmc0@localhost:2444/redfish/v1/AccountService/Accounts/user99\n{\n  \"@odata.id\": \"/redfish/v1/AccountService/Accounts/user99\",\n  \"@odata.type\": \"#ManagerAccount.v1_4_0.ManagerAccount\",\n  \"AccountTypes\": [\n    \"HostConsole\",\n    \"IPMI\",\n    \"Redfish\",\n    \"WebUI\",\n    \"ManagerConsole\"\n  ],\n  \"Description\": \"User Account\",\n  \"Enabled\": true,\n  \"Id\": \"user99\",\n  \"Links\": {\n    \"Role\": {\n      \"@odata.id\": \"/redfish/v1/AccountService/Roles/Administrator\"\n    }\n  },\n  \"Locked\": false,\n  \"Locked@Redfish.AllowableValues\": [\n    \"false\"\n  ],\n  \"Name\": \"User Account\",\n  \"Password\": null,\n  \"PasswordChangeRequired\": false,\n  \"RoleId\": \"Administrator\",\n  \"UserName\": \"user99\"\n\nMay 16 21:21:13 p10bmc bmcweb[762]: (2023-05-16 21:21:13) [INFO \"http_connection.hpp\":209] Request:  0x26e9408 HTTP/1.1 GET /console0 ::ffff:10.0.2.1\nMay 16 21:21:13 p10bmc bmcweb[762]: (2023-05-16 21:21:13) [DEBUG \"routing.hpp\":1238] Matched rule (upgrade) \u0027/console0\u0027 1 / 2\nMay 16 21:21:13 p10bmc bmcweb[762]: (2023-05-16 21:21:13) [DEBUG \"routing.hpp\":1058] userName \u003d user99 userRole \u003d priv-admin\nMay 16 21:21:13 p10bmc bmcweb[762]: (2023-05-16 21:21:13) [DEBUG \"routing.hpp\":1058] userName \u003d user99 userRole \u003d priv-admin\nMay 16 21:21:13 p10bmc bmcweb[762]: (2023-05-16 21:21:13) [DEBUG \"websocket.hpp\":78] Creating new connection 0x25dbb54\nMay 16 21:21:13 p10bmc bmcweb[762]: (2023-05-16 21:21:13) [DEBUG \"websocket.hpp\":89] starting connection 0x25dbb54\nMay 16 21:21:13 p10bmc bmcweb[762]: (2023-05-16 21:21:13) [DEBUG \"websocket.hpp\":220] Websocket accepted connection\nMay 16 21:21:13 p10bmc bmcweb[762]: (2023-05-16 21:21:13) [DEBUG \"obmc_console.hpp\":128] Connection 0x25dbb54 opened\nMay 16 21:21:13 p10bmc bmcweb[762]: (2023-05-16 21:21:13) [DEBUG \"routing.hpp\":1058] userName \u003d user99 userRole \u003d priv-admin\nMay 16 21:21:13 p10bmc bmcweb[762]: (2023-05-16 21:21:13) [DEBUG \"obmc_console.hpp\":40] Outbuffer empty.  Bailing out\nMay 16 21:21:13 p10bmc bmcweb[762]: (2023-05-16 21:21:13) [DEBUG \"obmc_console.hpp\":82] Reading from socket\n\n# For readonly or operator user I don\u0027t see the console button on GUI.\n+ curl -k https://admin:0penBmc0@localhost:2444/redfish/v1/AccountService/Accounts/user99\n{\n  \"@odata.id\": \"/redfish/v1/AccountService/Accounts/user99\",\n  \"@odata.type\": \"#ManagerAccount.v1_4_0.ManagerAccount\",\n  \"AccountTypes\": [\n    \"HostConsole\",\n    \"IPMI\",\n    \"Redfish\",\n    \"WebUI\",\n    \"ManagerConsole\"\n  ],\n  \"Description\": \"User Account\",\n  \"Enabled\": true,\n  \"Id\": \"user99\",\n  \"Links\": {\n    \"Role\": {\n      \"@odata.id\": \"/redfish/v1/AccountService/Roles/ReadOnly\"\n    }\n  },\n  \"Locked\": false,\n  \"Locked@Redfish.AllowableValues\": [\n    \"false\"\n  ],\n  \"Name\": \"User Account\",\n  \"Password\": null,\n  \"PasswordChangeRequired\": false,\n  \"RoleId\": \"ReadOnly\",\n  \"UserName\": \"user99\"\n\n\n\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\n+ curl -k https://admin:0penBmc0@localhost:2444/redfish/v1/AccountService/Accounts/user99\n{\n  \"@odata.id\": \"/redfish/v1/AccountService/Accounts/user99\",\n  \"@odata.type\": \"#ManagerAccount.v1_4_0.ManagerAccount\",\n  \"AccountTypes\": [\n    \"HostConsole\",\n    \"IPMI\",\n    \"Redfish\",\n    \"WebUI\",\n    \"ManagerConsole\"\n  ],\n  \"Description\": \"User Account\",\n  \"Enabled\": true,\n  \"Id\": \"user99\",\n  \"Links\": {\n    \"Role\": {\n      \"@odata.id\": \"/redfish/v1/AccountService/Roles/Operator\"\n    }\n  },\n  \"Locked\": false,\n  \"Locked@Redfish.AllowableValues\": [\n    \"false\"\n  ],\n  \"Name\": \"User Account\",\n  \"Password\": null,\n  \"PasswordChangeRequired\": false,\n  \"RoleId\": \"Operator\",\n  \"UserName\": \"user99\"",
      "parentUuid": "c39af105_900b8e52",
      "range": {
        "startLine": 37,
        "startChar": 46,
        "endLine": 38,
        "endChar": 29
      },
      "revId": "b843f33b958190fc760ac75c4c38a100334b73a9",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "39d2881e_b6b1e841",
        "filename": "/COMMIT_MSG",
        "patchSetId": 26
      },
      "lineNbr": 38,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2023-05-16T23:54:02Z",
      "side": 1,
      "message": "\u003e I don\u0027t even see the console button.\n\nConsidering that this is a security interface, the webui is not an appropriate test that the privileges have been applied correctly.\n\nDo we agree that read only users shouldn\u0027t be allowed to access the console?",
      "parentUuid": "1aeee0a0_011c6d9d",
      "range": {
        "startLine": 37,
        "startChar": 46,
        "endLine": 38,
        "endChar": 29
      },
      "revId": "b843f33b958190fc760ac75c4c38a100334b73a9",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a2e852a4_4cda2fbb",
        "filename": "/COMMIT_MSG",
        "patchSetId": 26
      },
      "lineNbr": 40,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2023-05-15T23:46:29Z",
      "side": 1,
      "message": "How were you able to simulate a serial port?  I didn\u0027t think that worked in qemu?",
      "range": {
        "startLine": 40,
        "startChar": 11,
        "endLine": 40,
        "endChar": 39
      },
      "revId": "b843f33b958190fc760ac75c4c38a100334b73a9",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "17da6761_0a58275d",
        "filename": "/COMMIT_MSG",
        "patchSetId": 26
      },
      "lineNbr": 40,
      "author": {
        "id": 1001634
      },
      "writtenOn": "2023-05-16T01:05:54Z",
      "side": 1,
      "message": "I used a simics simulator. That support accessing through web GUI.",
      "parentUuid": "a2e852a4_4cda2fbb",
      "range": {
        "startLine": 40,
        "startChar": 11,
        "endLine": 40,
        "endChar": 39
      },
      "revId": "b843f33b958190fc760ac75c4c38a100334b73a9",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "27ac8da9_3b6824e8",
        "filename": "/COMMIT_MSG",
        "patchSetId": 26
      },
      "lineNbr": 40,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2023-05-16T19:16:23Z",
      "side": 1,
      "message": "Because I\u0027m unfamiliar with this testing method, can you please do some writeups (not on this patchset) on how this was done and the procedure used?  WE haven\u0027t accepted Simics testing results before, but I\u0027m open to it.",
      "parentUuid": "17da6761_0a58275d",
      "range": {
        "startLine": 40,
        "startChar": 11,
        "endLine": 40,
        "endChar": 39
      },
      "revId": "b843f33b958190fc760ac75c4c38a100334b73a9",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "8d8e18cf_a0b1ddb8",
        "filename": "/COMMIT_MSG",
        "patchSetId": 26
      },
      "lineNbr": 40,
      "author": {
        "id": 1001634
      },
      "writtenOn": "2023-05-16T22:20:12Z",
      "side": 1,
      "message": "We internally use simics simulator which simulate full system board (https://www.windriver.com/products/simics).\n- Compile code.\n- Start the simics simulator. Get the host port which is forwarded to 443 in the bmc example port 2443 from localhost will be used.\n- On web browser run https://\u003chostname\u003e:2443  to start the GUI.",
      "parentUuid": "27ac8da9_3b6824e8",
      "range": {
        "startLine": 40,
        "startChar": 11,
        "endLine": 40,
        "endChar": 39
      },
      "revId": "b843f33b958190fc760ac75c4c38a100334b73a9",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6df44ae8_31ffb1b6",
        "filename": "/COMMIT_MSG",
        "patchSetId": 26
      },
      "lineNbr": 86,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2023-05-15T23:46:29Z",
      "side": 1,
      "message": "Are these required to merge before this one?",
      "range": {
        "startLine": 86,
        "startChar": 0,
        "endLine": 86,
        "endChar": 16
      },
      "revId": "b843f33b958190fc760ac75c4c38a100334b73a9",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "db8c06c6_79935152",
        "filename": "/COMMIT_MSG",
        "patchSetId": 26
      },
      "lineNbr": 86,
      "author": {
        "id": 1001634
      },
      "writtenOn": "2023-05-16T01:05:54Z",
      "side": 1,
      "message": "docs, openbmc and obmc-console is already merged. phosphor-user-manager is ready to merge so I will merge it along with bmcweb.",
      "parentUuid": "6df44ae8_31ffb1b6",
      "range": {
        "startLine": 86,
        "startChar": 0,
        "endLine": 86,
        "endChar": 16
      },
      "revId": "b843f33b958190fc760ac75c4c38a100334b73a9",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    }
  ]
}