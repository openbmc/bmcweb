{
  "comments": [
    {
      "key": {
        "uuid": "58b30a97_61f3f3b6",
        "filename": "redfish-core/include/utils/json_utils.hpp",
        "patchSetId": 3
      },
      "lineNbr": 409,
      "author": {
        "id": 1000885
      },
      "writtenOn": "2021-12-14T21:24:28Z",
      "side": 1,
      "message": "wait. This is wrong. how can we check if a property is optional?",
      "range": {
        "startLine": 400,
        "startChar": 3,
        "endLine": 409,
        "endChar": 9
      },
      "revId": "4b9b4c48547ac583a4785580a051f83f0182e995",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "94bee3f7_a5bc4d48",
        "filename": "redfish-core/include/utils/json_utils.hpp",
        "patchSetId": 3
      },
      "lineNbr": 409,
      "author": {
        "id": 1000885
      },
      "writtenOn": "2021-12-14T22:08:17Z",
      "side": 1,
      "message": "Maybe we don\u0027t need this? and just have whoever that is reading optional property not use `readJson`?\n\nSo they have full control of what it does?",
      "parentUuid": "58b30a97_61f3f3b6",
      "range": {
        "startLine": 400,
        "startChar": 3,
        "endLine": 409,
        "endChar": 9
      },
      "revId": "4b9b4c48547ac583a4785580a051f83f0182e995",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "442ee5bc_99c33410",
        "filename": "redfish-core/include/utils/json_utils.hpp",
        "patchSetId": 3
      },
      "lineNbr": 409,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2021-12-15T01:28:41Z",
      "side": 1,
      "message": "Lets start with why, then we can go to what. Assuming that chicago is asking the same question, it\u0027s about unpacking std::vector\u003cnlohmann\u003e, which I agree, should allow optionals, and looks like an oversight.  We probably need to special case the vector case.",
      "parentUuid": "94bee3f7_a5bc4d48",
      "range": {
        "startLine": 400,
        "startChar": 3,
        "endLine": 409,
        "endChar": 9
      },
      "revId": "4b9b4c48547ac583a4785580a051f83f0182e995",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4ec9d09f_a151e397",
        "filename": "redfish-core/include/utils/json_utils.hpp",
        "patchSetId": 3
      },
      "lineNbr": 409,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2021-12-15T01:29:35Z",
      "side": 1,
      "message": "\u003e wait. This is wrong. how can we check if a property is optional?\n\nsee the IsOptional class up above, but now that I understand this, I don\u0027t think this is the same case.  We need IsVector",
      "parentUuid": "442ee5bc_99c33410",
      "range": {
        "startLine": 400,
        "startChar": 3,
        "endLine": 409,
        "endChar": 9
      },
      "revId": "4b9b4c48547ac583a4785580a051f83f0182e995",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b0badb9c_63c9ad0b",
        "filename": "redfish-core/include/utils/json_utils.hpp",
        "patchSetId": 3
      },
      "lineNbr": 409,
      "author": {
        "id": 1000885
      },
      "writtenOn": "2021-12-15T05:45:00Z",
      "side": 1,
      "message": "oh I get it. I was thinking about how I can know if the Redfish response\u0027s property is suppose to be optional based on the spec and sutff.\n\nThis make more sense. So in a way, how we fetch the data will let us know if it is optional.",
      "parentUuid": "4ec9d09f_a151e397",
      "range": {
        "startLine": 400,
        "startChar": 3,
        "endLine": 409,
        "endChar": 9
      },
      "revId": "4b9b4c48547ac583a4785580a051f83f0182e995",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bfd94944_efeebf6f",
        "filename": "redfish-core/include/utils/json_utils.hpp",
        "patchSetId": 3
      },
      "lineNbr": 409,
      "author": {
        "id": 1000885
      },
      "writtenOn": "2021-12-15T05:46:17Z",
      "side": 1,
      "message": "um...\n\nI have it setup so that if you are requesting only optional properties and the json is empty then you don\u0027t get the error. Maybe I should return true at that point instead of false.",
      "parentUuid": "b0badb9c_63c9ad0b",
      "range": {
        "startLine": 400,
        "startChar": 3,
        "endLine": 409,
        "endChar": 9
      },
      "revId": "4b9b4c48547ac583a4785580a051f83f0182e995",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ae53df09_2e82cefa",
        "filename": "redfish-core/include/utils/json_utils.hpp",
        "patchSetId": 3
      },
      "lineNbr": 409,
      "author": {
        "id": 1000885
      },
      "writtenOn": "2021-12-15T05:49:09Z",
      "side": 1,
      "message": "Not sure if IsVector is what we want. PTAL, I added handleEmpty to check if all of the fields are optional. If not, return false.",
      "parentUuid": "bfd94944_efeebf6f",
      "range": {
        "startLine": 400,
        "startChar": 3,
        "endLine": 409,
        "endChar": 9
      },
      "revId": "4b9b4c48547ac583a4785580a051f83f0182e995",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "74dc45ea_0e8ed9e9",
        "filename": "redfish-core/include/utils/json_utils.hpp",
        "patchSetId": 3
      },
      "lineNbr": 409,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2021-12-15T19:36:02Z",
      "side": 1,
      "message": "\u003e Not sure if IsVector is what we want. PTAL\n\n\nok, lets start with behavior\n\nreadJson(...., \"Foo\", std::vector\u003cnlohmann::json\u003e)\n\nShould allow empty objects on the sub object, but not on the root object.\n\nreadJson(...., \"Foo\", int64_t)\n\nShould not allow empty objects.  From my perspective, that means we need to use IsVector to determine if we\u0027re in a vector subobject, or not.\n\n\n\n\u003eI have it setup so that if you are requesting only optional properties and the json is empty then you don\u0027t get the error.\n\nThat\u0027s incorrect.  PATCH with an empty payload is nonsensical, and is the reason this error exists.\n\nPATCH with an empty SUB-object, is fine.\n\nPATCH {}  \u003c--- Should be an error\n\nPATCH {\"IpAddresses\": [{}]\"} \u003c--- should not be an error.",
      "parentUuid": "ae53df09_2e82cefa",
      "range": {
        "startLine": 400,
        "startChar": 3,
        "endLine": 409,
        "endChar": 9
      },
      "revId": "4b9b4c48547ac583a4785580a051f83f0182e995",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "05a781b0_6d93072d",
        "filename": "redfish-core/include/utils/json_utils.hpp",
        "patchSetId": 3
      },
      "lineNbr": 409,
      "author": {
        "id": 1000885
      },
      "writtenOn": "2021-12-15T21:12:00Z",
      "side": 1,
      "message": "Discussed a bit offline. There are different use cases for readJson.\n\nActions and Patch.\n\nWill split into different API to for readJsonPatch and readJsonAction.\n\nThe only difference between the two at this point is whether or not completely empty is allowed.\n\n- Patch will not support fully empty.\n- Action allows it.",
      "parentUuid": "74dc45ea_0e8ed9e9",
      "range": {
        "startLine": 400,
        "startChar": 3,
        "endLine": 409,
        "endChar": 9
      },
      "revId": "4b9b4c48547ac583a4785580a051f83f0182e995",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    }
  ]
}