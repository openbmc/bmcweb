{
  "comments": [
    {
      "key": {
        "uuid": "02a60b73_e13a0fec",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 13,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2020-10-13T15:17:58Z",
      "side": 1,
      "message": "Why?  Shouldn\u0027t this be created as an install step?",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 13,
        "endChar": 0
      },
      "revId": "5e2015ff6387b26eb5b3cd27505b96698e8e8ebd",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1857f7bc_11287e0e",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 13,
      "author": {
        "id": 1000382
      },
      "writtenOn": "2020-10-13T16:11:06Z",
      "side": 1,
      "message": "The /var/ directory is empty by default, so if the application needs the sub-directories under that, it should create those directories",
      "parentUuid": "02a60b73_e13a0fec",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 13,
        "endChar": 0
      },
      "revId": "5e2015ff6387b26eb5b3cd27505b96698e8e8ebd",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "35a2562e_4a3fd571",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 13,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2020-10-13T17:07:20Z",
      "side": 1,
      "message": "\u003e The /var/ directory is empty by default, so if the application needs the sub-directories under that, it should create those directories\n\nAt.... install...time.  Not at runtime.\n\nAlso, it needs to set appropriate permissions on them.",
      "parentUuid": "1857f7bc_11287e0e",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 13,
        "endChar": 0
      },
      "revId": "5e2015ff6387b26eb5b3cd27505b96698e8e8ebd",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "002526a0_5d8f7158",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 13,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2020-10-16T16:13:45Z",
      "side": 1,
      "message": "New patchset still has not moved these to install time, although it looks like some permissions have been added.",
      "parentUuid": "35a2562e_4a3fd571",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 13,
        "endChar": 0
      },
      "revId": "5e2015ff6387b26eb5b3cd27505b96698e8e8ebd",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0400eb7e_6bc8cc7e",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 13,
      "author": {
        "id": 1000206
      },
      "writtenOn": "2020-10-19T06:57:36Z",
      "side": 1,
      "message": "\u003e New patchset still has not moved these to install time, although it looks like some permissions have been added.\n\n+1\n\n@sunitha, if needed the base directory should be created at install phase via do_install/ do_install_append from the recipe that owns the directory.",
      "parentUuid": "002526a0_5d8f7158",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 13,
        "endChar": 0
      },
      "revId": "5e2015ff6387b26eb5b3cd27505b96698e8e8ebd",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "dfb54f86_5dfc277f",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 13,
      "author": {
        "id": 1000022
      },
      "writtenOn": "2020-10-19T11:00:33Z",
      "side": 1,
      "message": "Seems we need to identify why the obmc folder was not created, It should have been created in first place.\n\nFew refrences are below\n\nhttps://github.com/openbmc/openbmc/blob/master/meta-phosphor/recipes-phosphor/initrdscripts/obmc-phosphor-initfs.bb#L29\n\nhttps://github.com/openbmc/openbmc/blob/master/meta-phosphor/recipes-phosphor/initrdscripts/files/whitelist#L10\n\nhttps://github.com/openbmc/openbmc/blob/master/meta-phosphor/recipes-phosphor/initrdscripts/files/obmc-init.sh#L21\n\nWe should look at why this path was not created after boot.",
      "parentUuid": "0400eb7e_6bc8cc7e",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 13,
        "endChar": 0
      },
      "revId": "5e2015ff6387b26eb5b3cd27505b96698e8e8ebd",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1a243f6f_a728fed2",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 13,
      "author": {
        "id": 1000022
      },
      "writtenOn": "2020-10-19T14:56:47Z",
      "side": 1,
      "message": "Spoke with Adraiana on the same and seems the above references are to make sure that these files/directories persist across boot.\n\nIn this case, when the bmcweb is coming up, it needs to make sure that it has all the directories created and bmcweb can create the directory if it is not created.\n\nI would suggest that not to use the /var/lib/obmc. Instead we can use something like /var/lib/bmcweb.\n\nEd, Do you see any concern if bmcweb creates the diretory as it is application specific directory and can\u0027t depend on the recipe to create/install the directory for bmcweb.",
      "parentUuid": "dfb54f86_5dfc277f",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 13,
        "endChar": 0
      },
      "revId": "5e2015ff6387b26eb5b3cd27505b96698e8e8ebd",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "73342c3c_8bc1e545",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 13,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2020-10-19T17:04:44Z",
      "side": 1,
      "message": "\u003e Spoke with Adraiana on the same and seems the above references are to make sure that these files/directories persist across boot.\n\u003e \n\u003e In this case, when the bmcweb is coming up, it needs to make sure that it has all the directories created and bmcweb can create the directory if it is not created.\n\nNo, if the directory doesn\u0027t exist, bmcweb can simply crash, as the code was not installed correctly.  Very similar to if /var/www/ doesn\u0027t exist.\n\n\u003e \n\u003e I would suggest that not to use the /var/lib/obmc. Instead we can use something like /var/lib/bmcweb.\n\nconsidering this is IBM specific, I\u0027d much rather us use something like \"ibm-manage-console\" in the name.\n\n\u003e \n\u003e Ed, Do you see any concern if bmcweb creates the diretory as it is application specific directory and can\u0027t depend on the recipe to create/install the directory for bmcweb.\n\nbmcweb already depends on the recipe being used, so there\u0027s no change here.  You also don\u0027t need to do it in the recipe.",
      "parentUuid": "1a243f6f_a728fed2",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 13,
        "endChar": 0
      },
      "revId": "5e2015ff6387b26eb5b3cd27505b96698e8e8ebd",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "46834d17_1b010f47",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 13,
      "author": {
        "id": 1000382
      },
      "writtenOn": "2020-10-29T10:00:37Z",
      "side": 1,
      "message": "Ed, Can you please help to clarify:\n1. Make change in recipe ? \nor \n2. Not to make change in recipe and do the directory creation in the existing function createSaveAreaPath in management_console_rest file ?",
      "parentUuid": "73342c3c_8bc1e545",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 13,
        "endChar": 0
      },
      "revId": "5e2015ff6387b26eb5b3cd27505b96698e8e8ebd",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1b870d29_5310cde3",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 13,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2020-10-29T16:53:56Z",
      "side": 1,
      "message": "3. What I asked for in the first comment.  Please make it an install step.  This would generally be done in the meson file, and only done if ibm management console is enabled.",
      "parentUuid": "46834d17_1b010f47",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 13,
        "endChar": 0
      },
      "revId": "5e2015ff6387b26eb5b3cd27505b96698e8e8ebd",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "eef9c430_a25fd16f",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 13,
      "author": {
        "id": 1000022
      },
      "writtenOn": "2020-10-30T14:56:21Z",
      "side": 1,
      "message": "I was unaware that it can be done through install step, Thanks for the info.\nmeson.add_install_script(\"bash script to create the directory\")",
      "parentUuid": "1b870d29_5310cde3",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 13,
        "endChar": 0
      },
      "revId": "5e2015ff6387b26eb5b3cd27505b96698e8e8ebd",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ed267313_b3e76637",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 13,
      "author": {
        "id": 1000382
      },
      "writtenOn": "2020-10-31T14:56:02Z",
      "side": 1,
      "message": "I tried using the install with install_subdir API and also the add_install_script. I was not successful in getting the empty directories created at BMC. May be i need this meson issue resolved ?\nhttps://github.com/mesonbuild/meson/issues/2904",
      "parentUuid": "eef9c430_a25fd16f",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 13,
        "endChar": 0
      },
      "revId": "5e2015ff6387b26eb5b3cd27505b96698e8e8ebd",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a7fb7839_c6879b35",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 13,
      "author": {
        "id": 1000382
      },
      "writtenOn": "2020-11-04T14:01:28Z",
      "side": 1,
      "message": "I was able to create empty directory under /usr/ path which is the MESON_INSTALL_PREFIX. Using the below instruction in the meson.build file:\n \n meson.add_install_script(\u0027include/ibm/create_dir.sh\u0027)\n\ncreate_dir.sh:\n#!/bin/sh\nmkdir \"${DESTDIR}/${MESON_INSTALL_PREFIX}/ibm-management-console\"\n\nSince the /usr path is read-only, creating the directory for writing configfiles in this parent directory will not work/is not correct.\n\nI could not change the MESON_INSTALL_PREFIX to /var/lib path. \nEd, can you please suggest a way here to change the install dir to /var/lib ?",
      "parentUuid": "ed267313_b3e76637",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 13,
        "endChar": 0
      },
      "revId": "5e2015ff6387b26eb5b3cd27505b96698e8e8ebd",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    }
  ]
}