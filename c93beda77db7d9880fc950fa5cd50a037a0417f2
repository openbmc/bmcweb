{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "5e9fa01e_f985f717",
        "filename": "redfish-core/lib/sensors.hpp",
        "patchSetId": 7
      },
      "lineNbr": 813,
      "author": {
        "id": 1000416
      },
      "writtenOn": "2022-12-09T14:09:28Z",
      "side": 1,
      "message": "Hi Ed, \nPatch is working fine with this change but my concern is while patching the sensor Id, user has to remove the prefix of SensorType from \"Id\". Then only able to patch. \n\nExample: \nURL: PATCH: https://\u003cbmc-ip\u003e/redfish/v1/Chassis/\u003cBaseboard\u003e/Sensors/fantach_Fan_1\nBody while patching sensor value:\n{\n    \"Id\": \"fantach_Fan_1\",\n    \"Reading\": 13466.0\n}\nResponse:\n{\n    \"@odata.id\": \"/redfish/v1/Chassis/\u003cBaseboard\u003e/Sensors\",\n    \"@odata.type\": \"#SensorCollection.SensorCollection\",\n    \"Description\": \"Collection of Sensors for this Chassis\",\n    \"Members\": [],\n    \"Members@odata.count\": 0,\n    \"Name\": \"Sensors\",\n    \"error\": {\n        \"@Message.ExtendedInfo\": [\n            {\n                \"@odata.type\": \"#Message.v1_1_1.Message\",\n                \"Message\": \"The requested resource of type Reading named \u0027fantach_Fan_1\u0027 was not found.\",\n                \"MessageArgs\": [\n                    \"Reading\",\n                    \"fantach_Fan_1\"\n                ],\n                \"MessageId\": \"Base.1.13.0.ResourceNotFound\",\n                \"MessageSeverity\": \"Critical\",\n                \"Resolution\": \"Provide a valid resource identifier and resubmit the request.\"\n            }\n        ],\n        \"code\": \"Base.1.13.0.ResourceNotFound\",\n        \"message\": \"The requested resource of type Reading named \u0027fantach_Fan_1\u0027 was not found.\"\n    }\n}\n\n\nIf Sensortype removed from \"Id\", then only user is able to patch the sensor value.\n\nPATCH: https://\u003cbmc-ip\u003e/redfish/v1/Chassis/\u003cBaseboard\u003e/Sensors/fantach_Fan_1\nBody:\n{\n    \"Id\": \"Fan_1\",\n    \"Reading\": 13466.0\n}\n\nResponse:\n{\n    \"@odata.id\": \"/redfish/v1/Chassis/\u003cBaseboard\u003e/Sensors\",\n    \"@odata.type\": \"#SensorCollection.SensorCollection\",\n    \"Description\": \"Collection of Sensors for this Chassis\",\n    \"Members\": [],\n    \"Members@odata.count\": 0,\n    \"Name\": \"Sensors\"\n}\n\nSo should we need this prepending SensorType while using GET method? So User can directly use \"Id\" from GET method response to patch.",
      "range": {
        "startLine": 806,
        "startChar": 8,
        "endLine": 813,
        "endChar": 30
      },
      "revId": "c93beda77db7d9880fc950fa5cd50a037a0417f2",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "85fc33f0_7f77f90e",
        "filename": "redfish-core/lib/sensors.hpp",
        "patchSetId": 7
      },
      "lineNbr": 813,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-12-12T20:25:14Z",
      "side": 1,
      "message": "\u003e If Sensortype removed from \"Id\", then only user is able to patch the sensor value.\n\n\nThis definitely isn\u0027t the intent of this patch.  The intent is that we strip the sensor type from the ID on line 2771;  Can you leave a comment on that line of what you think isn\u0027t working.  The code looks correct to me, but I don\u0027t have a way to test, because I don\u0027t have those features enabled on any upstream platform.",
      "parentUuid": "5e9fa01e_f985f717",
      "range": {
        "startLine": 806,
        "startChar": 8,
        "endLine": 813,
        "endChar": 30
      },
      "revId": "c93beda77db7d9880fc950fa5cd50a037a0417f2",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b3689433_4e5b0df5",
        "filename": "redfish-core/lib/sensors.hpp",
        "patchSetId": 7
      },
      "lineNbr": 813,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-12-12T20:47:05Z",
      "side": 1,
      "message": "\u003e So should we need this prepending SensorType while using GET method?\n\nThis part is already done I believe.",
      "parentUuid": "85fc33f0_7f77f90e",
      "range": {
        "startLine": 806,
        "startChar": 8,
        "endLine": 813,
        "endChar": 30
      },
      "revId": "c93beda77db7d9880fc950fa5cd50a037a0417f2",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "cfa2d24c_654b7059",
        "filename": "redfish-core/lib/sensors.hpp",
        "patchSetId": 7
      },
      "lineNbr": 813,
      "author": {
        "id": 1000416
      },
      "writtenOn": "2022-12-13T18:55:03Z",
      "side": 1,
      "message": "Patching of sensor value is working as expected. \n** The intent is that we strip the sensor type from the ID on line 2771;\nMy point is here: if SensorType is not added in GET method, user can use that \"Id\" directly without striping the SensorType from Id to patch sensor value. So no confusion to patch Sensor value. \n\nAs a developer we know the functionality to patch by striping this sensorType, but tester will blindly copy the Id from Get method response.\n\nExample: \nGET method response:\n\n    \"Id\": \"power_CPU2_South_VR_Input_Power\",\n    \"Name\": \"CPU2 South VR Input Power\",\n    \"Reading\": -0.122876,\n    \n But while patching sensor Id \"Power\" need to stripe from Id.\n \n So patch body:\n {\n    \"Id\": \"CPU2_South_VR_Input_Power\",\n    \"Reading\": -0.122876\n }\n \n if you do not agree this, we can proceed with same as with current implementation.",
      "parentUuid": "b3689433_4e5b0df5",
      "range": {
        "startLine": 806,
        "startChar": 8,
        "endLine": 813,
        "endChar": 30
      },
      "revId": "c93beda77db7d9880fc950fa5cd50a037a0417f2",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d221b246_32321334",
        "filename": "redfish-core/lib/sensors.hpp",
        "patchSetId": 7
      },
      "lineNbr": 813,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-12-13T21:07:16Z",
      "side": 1,
      "message": "I\u0027m very sorry, but I\u0027m still not understanding.\n\n\u003e if SensorType is not added in GET method\n\nSensorType is added to the ID to significantly increase the performance.  If we don\u0027t add it, we need to look up ALL sensors to find any one sensor.  In terms of tradeoffs, this seems like we should avoid really expensive lookups.\n\nI would\u0027ve expected the PATCH body to be:\n{\n    \"Id\": \"power_CPU2_South_VR_Input_Power\",\n    \"Reading\": -0.122876\n}\n\nCan you try that and see if it works?  Based on inspection of this patch, it should work, but I can\u0027t really test it.",
      "parentUuid": "cfa2d24c_654b7059",
      "range": {
        "startLine": 806,
        "startChar": 8,
        "endLine": 813,
        "endChar": 30
      },
      "revId": "c93beda77db7d9880fc950fa5cd50a037a0417f2",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "dea32647_5281928a",
        "filename": "redfish-core/lib/sensors.hpp",
        "patchSetId": 7
      },
      "lineNbr": 813,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-12-13T21:09:50Z",
      "side": 1,
      "message": "\u003e  But while patching sensor Id \"Power\" need to stripe from Id.\n\nNo client should ever have to strip an ID.  That\u0027s not the intent.",
      "parentUuid": "d221b246_32321334",
      "range": {
        "startLine": 806,
        "startChar": 8,
        "endLine": 813,
        "endChar": 30
      },
      "revId": "c93beda77db7d9880fc950fa5cd50a037a0417f2",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b4912cfb_080d26d8",
        "filename": "redfish-core/lib/sensors.hpp",
        "patchSetId": 7
      },
      "lineNbr": 813,
      "author": {
        "id": 1000269
      },
      "writtenOn": "2022-12-14T04:24:39Z",
      "side": 1,
      "message": "I agree with Ed.\n\nGET on sensors are prefixing with \"\u003ctype\u003e_\" in both URI \u0026 ID fields(This is done for performance improvement). \nExample:\nURI: /redfish/v1/Chassis/AVC_Baseboard/Sensors/temperature_PSU1_Temperature\nID: \"Sensors_PSU1_Temperature\"\n\nPatch on sensors, users can use same ID \u0026 URI as is. Stripping of prefix (\u003ctype\u003e_\" can be handled inside code wile patching for D-BUS object formation. The API  \"splitSensorNameAndType()\" is doing same and that should solve the issue with sensor override.\n\nWhile doing patch user uses same ID which is there in GET.\n{\n   \"Id\": \"Sensors_PSU1_Temperature\",\n   \"Reading\": 20\n}\n\nThanks Ed for details, We will discuss internally and get back on this.",
      "parentUuid": "dea32647_5281928a",
      "range": {
        "startLine": 806,
        "startChar": 8,
        "endLine": 813,
        "endChar": 30
      },
      "revId": "c93beda77db7d9880fc950fa5cd50a037a0417f2",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7e30b378_d43f569d",
        "filename": "redfish-core/lib/sensors.hpp",
        "patchSetId": 7
      },
      "lineNbr": 2722,
      "author": {
        "id": 1000020
      },
      "writtenOn": "2022-12-08T20:46:19Z",
      "side": 1,
      "message": "Wasn\u0027t this orginally behind a flag?\n\nhttps://github.com/openbmc/bmcweb/commit/91e130a365a0d3b93357e6efa0a5be8a0b53c6d1",
      "revId": "c93beda77db7d9880fc950fa5cd50a037a0417f2",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e52de218_c9cfa29d",
        "filename": "redfish-core/lib/sensors.hpp",
        "patchSetId": 7
      },
      "lineNbr": 2722,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-12-08T23:17:04Z",
      "side": 1,
      "message": "It is;  At some point the flag got moved from bmcweb to the sensor implementation, which has a better ability to slice and dice which sensors should be settable.\n\n91e130a365a0d3b93357e6efa0a5be8a0b53c6d1",
      "parentUuid": "7e30b378_d43f569d",
      "revId": "c93beda77db7d9880fc950fa5cd50a037a0417f2",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    }
  ]
}