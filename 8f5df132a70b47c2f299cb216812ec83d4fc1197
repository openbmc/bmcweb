{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "560f8f94_29c48ce0",
        "filename": "redfish-core/lib/update_service.hpp",
        "patchSetId": 1
      },
      "lineNbr": 1107,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2024-06-17T23:05:24Z",
      "side": 0,
      "message": "Why was this removed?  Code looks incorrect now?",
      "range": {
        "startLine": 1107,
        "startChar": 4,
        "endLine": 1107,
        "endChar": 9
      },
      "revId": "8f5df132a70b47c2f299cb216812ec83d4fc1197",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "76972ec0_bfe51dc3",
        "filename": "redfish-core/lib/update_service.hpp",
        "patchSetId": 1
      },
      "lineNbr": 1107,
      "author": {
        "id": 1001758
      },
      "writtenOn": "2024-06-17T23:20:35Z",
      "side": 0,
      "message": "This was a remnant from a clang warning in old patch. Removed this change in latest patch.",
      "parentUuid": "560f8f94_29c48ce0",
      "range": {
        "startLine": 1107,
        "startChar": 4,
        "endLine": 1107,
        "endChar": 9
      },
      "revId": "8f5df132a70b47c2f299cb216812ec83d4fc1197",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "89a41dc1_9c509d0c",
        "filename": "redfish-core/lib/update_service.hpp",
        "patchSetId": 1
      },
      "lineNbr": 1107,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2024-06-17T23:30:33Z",
      "side": 0,
      "message": "Done",
      "parentUuid": "560f8f94_29c48ce0",
      "range": {
        "startLine": 1107,
        "startChar": 4,
        "endLine": 1107,
        "endChar": 9
      },
      "revId": "8f5df132a70b47c2f299cb216812ec83d4fc1197",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1496213a_931cd19d",
        "filename": "redfish-core/lib/update_service.hpp",
        "patchSetId": 5
      },
      "lineNbr": 1203,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2024-06-19T17:15:24Z",
      "side": 0,
      "message": "You took out the PATCH but you left in the GET?",
      "range": {
        "startLine": 1189,
        "startChar": 0,
        "endLine": 1203,
        "endChar": 9
      },
      "revId": "8f5df132a70b47c2f299cb216812ec83d4fc1197",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6b366a26_51b39597",
        "filename": "redfish-core/lib/update_service.hpp",
        "patchSetId": 5
      },
      "lineNbr": 1203,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2024-06-19T17:16:03Z",
      "side": 0,
      "message": "At the very least I would expect this to now just be hardcoded to \"Immediate\"",
      "parentUuid": "1496213a_931cd19d",
      "range": {
        "startLine": 1189,
        "startChar": 0,
        "endLine": 1203,
        "endChar": 9
      },
      "revId": "8f5df132a70b47c2f299cb216812ec83d4fc1197",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e434ced0_f318778c",
        "filename": "redfish-core/lib/update_service.hpp",
        "patchSetId": 5
      },
      "lineNbr": 1203,
      "author": {
        "id": 1000020
      },
      "writtenOn": "2024-06-20T16:46:57Z",
      "side": 0,
      "message": "What if someone changes it on D-Bus?",
      "parentUuid": "6b366a26_51b39597",
      "range": {
        "startLine": 1189,
        "startChar": 0,
        "endLine": 1203,
        "endChar": 9
      },
      "revId": "8f5df132a70b47c2f299cb216812ec83d4fc1197",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "cef4d2fa_12a3d71f",
        "filename": "redfish-core/lib/update_service.hpp",
        "patchSetId": 5
      },
      "lineNbr": 1203,
      "author": {
        "id": 1001758
      },
      "writtenOn": "2024-06-20T17:46:36Z",
      "side": 0,
      "message": "Done",
      "parentUuid": "6b366a26_51b39597",
      "range": {
        "startLine": 1189,
        "startChar": 0,
        "endLine": 1203,
        "endChar": 9
      },
      "revId": "8f5df132a70b47c2f299cb216812ec83d4fc1197",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9db010dc_b0b8ab5b",
        "filename": "redfish-core/lib/update_service.hpp",
        "patchSetId": 5
      },
      "lineNbr": 1203,
      "author": {
        "id": 1000020
      },
      "writtenOn": "2024-06-20T19:42:19Z",
      "side": 0,
      "message": "The downside is if you change it on D-Bus, this isn\u0027t correct? The long term plan is? This is passed in on the Post?",
      "parentUuid": "cef4d2fa_12a3d71f",
      "range": {
        "startLine": 1189,
        "startChar": 0,
        "endLine": 1203,
        "endChar": 9
      },
      "revId": "8f5df132a70b47c2f299cb216812ec83d4fc1197",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1e50f37e_24a8be91",
        "filename": "redfish-core/lib/update_service.hpp",
        "patchSetId": 5
      },
      "lineNbr": 1203,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2024-06-20T21:51:26Z",
      "side": 0,
      "message": "The new backend is ignoring the setting, and instead accepting the param based on the update argument, which for simple update bmcweb will just hardcode to immediate (I think?).\n\nPer that, I think just hardcoding the response to GET would be correct to Redfish, right?\n\nAlthough this does make me wonder if for compatibility sake we should leave the PATCH handler, and just have PATCHing update mode to immediate just be a no op.\n\nJagpal, WDYT?",
      "parentUuid": "9db010dc_b0b8ab5b",
      "range": {
        "startLine": 1189,
        "startChar": 0,
        "endLine": 1203,
        "endChar": 9
      },
      "revId": "8f5df132a70b47c2f299cb216812ec83d4fc1197",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5ad97453_e6c99b4e",
        "filename": "redfish-core/lib/update_service.hpp",
        "patchSetId": 5
      },
      "lineNbr": 1203,
      "author": {
        "id": 1001758
      },
      "writtenOn": "2024-06-20T23:38:28Z",
      "side": 0,
      "message": "\u003e The downside is if you change it on D-Bus, this isn\u0027t correct? The long term plan is? This is passed in on the Post?\n\nLong Term plan is no one will cache this value on BMC, there is no D-Bus interface which caches this. This will be strictly connected to the update to be triggered and with every new update this value will be supplied to CodeUpdater daemon via startUpdate interface, which will be default (\"immediate\") for Unstructured HTTP Post and for Multipart-form HTTP Post, this arg will be part of POST command.\n\n\u003e The new backend is ignoring the setting, and instead accepting the param based on the update argument, which for simple update bmcweb will just hardcode to immediate (I think?).\n\nYes.\n(PS: Unstructured HTTP Post \u003d Simple Update)\n\n\u003e \n\u003e Per that, I think just hardcoding the response to GET would be correct to Redfish, right?\n\u003e \n\u003e Although this does make me wonder if for compatibility sake we should leave the PATCH handler, and just have PATCHing update mode to immediate just be a no op.\n\u003e \n\u003e Jagpal, WDYT?\n\nSome history on this. The reason we removed the PATCH because its only use-case was for \"Immediate\" and we were brainstorming on how to communicate ApplyTime and Image to CodeUpdater daemon (1 D-Bus method vs 2 D-Bus methods), but since ApplyTime only application was \"Immediate\", we thought its better to drop the PATCH and call startUpdate D-Bus interface for Unstructured HTTP POST with default ApplyTime as \"Immediate\".\n\nNow, i would take a step back and try to understand the meaning of GET API. Its returns the ApplyTime for HTTPPushURI, for which the only supported value is \"Immediate\" and next time if client uses the Unstructured HTTP POST, the \"Immediate\" will be used, hence GET returning \"Immediate\" and removing PATCH makes sense to me.",
      "parentUuid": "1e50f37e_24a8be91",
      "range": {
        "startLine": 1189,
        "startChar": 0,
        "endLine": 1203,
        "endChar": 9
      },
      "revId": "8f5df132a70b47c2f299cb216812ec83d4fc1197",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "15b43435_6b03083e",
        "filename": "redfish-core/lib/update_service.hpp",
        "patchSetId": 5
      },
      "lineNbr": 1203,
      "author": {
        "id": 1000020
      },
      "writtenOn": "2024-06-21T19:31:20Z",
      "side": 0,
      "message": "I am good here. \nPlease merge https://gerrit.openbmc.org/c/openbmc/webui-vue/+/72192 first",
      "parentUuid": "5ad97453_e6c99b4e",
      "range": {
        "startLine": 1189,
        "startChar": 0,
        "endLine": 1203,
        "endChar": 9
      },
      "revId": "8f5df132a70b47c2f299cb216812ec83d4fc1197",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    }
  ]
}