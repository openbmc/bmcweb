{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "0e186a91_dc5b1b35",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 12,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2024-06-03T16:23:32Z",
      "side": 1,
      "message": "Does this have any compatibility impacts for the majority of systems that don\u0027t yet have the update service dbus meson option set?",
      "revId": "d9536cd45f0c741e14d06dd602ca0a6229cf5d32",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "14f96948_363c41f4",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 12,
      "author": {
        "id": 1001758
      },
      "writtenOn": "2024-06-03T16:54:39Z",
      "side": 1,
      "message": "No, this won\u0027t impact existing systems.\n\nThis change is for StartUpdate D-Bus interface to use the ApplyTime enum from existing ApplyTime interface as i was doing some conversions which didn\u0027t seemed required if i use the same enum type.",
      "parentUuid": "0e186a91_dc5b1b35",
      "revId": "d9536cd45f0c741e14d06dd602ca0a6229cf5d32",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e7dc4881_f4c02945",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 12,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2024-06-03T23:57:39Z",
      "side": 1,
      "message": "\u003e No, this won\u0027t impact existing systems.\n\u003e \n\u003e This change is for StartUpdate D-Bus interface to use the ApplyTime enum from existing ApplyTime interface as i was doing some conversions which didn\u0027t seemed required if i use the same enum type.\n\n\nBut setApplyTime is called from more than just the new dbus update code?\nhttps://github.com/openbmc/bmcweb/blob/20fa6a2c6cea77a4b411634dfca67eef6c8f430f/redfish-core/lib/update_service.hpp#L1241\n\nSo you\u0027re changing what\u0027s being set in that path. Maybe I\u0027m missing something?",
      "parentUuid": "14f96948_363c41f4",
      "revId": "d9536cd45f0c741e14d06dd602ca0a6229cf5d32",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "148ab369_e199e54d",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 12,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2024-06-04T00:30:04Z",
      "side": 1,
      "message": "Ok, I see what\u0027s going on, we\u0027ve changed the new flow, the old flow looks like it has the same enums.\n\nGiven that the old code was tested and working, is there a patch required that\u0027s moving the backend to this new enum?  Can you link it?",
      "parentUuid": "e7dc4881_f4c02945",
      "revId": "d9536cd45f0c741e14d06dd602ca0a6229cf5d32",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1b87961a_83531258",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 12,
      "author": {
        "id": 1001758
      },
      "writtenOn": "2024-06-04T00:39:36Z",
      "side": 1,
      "message": "There is no change to the old code and it is an old enum.\nI suppose u r looking for the patch for the new Code Updater daemon with StartUpdate API which would be using this old enum? If yes, then its here https://gerrit.openbmc.org/c/openbmc/phosphor-bmc-code-mgmt/+/70668.",
      "parentUuid": "148ab369_e199e54d",
      "revId": "d9536cd45f0c741e14d06dd602ca0a6229cf5d32",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f0607c9a_f00f702d",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 12,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2024-06-04T01:08:22Z",
      "side": 1,
      "message": "What I mean is that we have code where we had tested the existing enum, and it worked, which meant the backend accepted it.  In this patch we\u0027re changing the enum, so one of three things is true:\n1. We never tested the previous patch (which is honestly fine if that\u0027s true, this is new code).\n2. We wrote a code change to change the enum in the backend (which I don\u0027t see in the patch that you linked.  That looks like just the initial implementation, maybe it was in between two patches on that series?)\n3. The backend supported both enum namespaces somehow and either enum works.\n\n\nI thought it was #2, but maybe not?",
      "parentUuid": "1b87961a_83531258",
      "revId": "d9536cd45f0c741e14d06dd602ca0a6229cf5d32",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "413719c2_736f868f",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 12,
      "author": {
        "id": 1001758
      },
      "writtenOn": "2024-06-04T19:56:15Z",
      "side": 1,
      "message": "The backend code which supported older enum was never changed and the code to support new enum was added as part of new daemon patch (which i shared above). The backend supports both the flows.\n\nIn this BMCWeb patch i am changing the D-Bus interface to use old enum (xyz.openbmc_project.Software.ApplyTime.RequestedApplyTimes.*) instead of new enum (xyz.openbmc_project.Software.Update.ApplyTimes.*) based on this D-Bus interface change https://gerrit.openbmc.org/c/openbmc/phosphor-dbus-interfaces/+/71734. I have just refactored the enum conversion code to convertApplyTime and used it in both the places.",
      "parentUuid": "f0607c9a_f00f702d",
      "revId": "d9536cd45f0c741e14d06dd602ca0a6229cf5d32",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    }
  ]
}