{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "720dcc1b_3959aca7",
        "filename": "/COMMIT_MSG",
        "patchSetId": 14
      },
      "lineNbr": 13,
      "author": {
        "id": 1000020
      },
      "writtenOn": "2024-03-13T03:57:43Z",
      "side": 1,
      "message": "This goes against what bmcweb does for other calls, e.g. for networkd / phosphor-networkd.\nWe really want bmcweb making these direct systemd calls ? What is the line?",
      "revId": "108de66b3ff954967910b299d39efd654dedd24b",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5c66befe_65f40fe5",
        "filename": "/COMMIT_MSG",
        "patchSetId": 14
      },
      "lineNbr": 13,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2024-03-13T04:09:36Z",
      "side": 1,
      "message": "\u003e This goes against what bmcweb does for other calls, e.g. for networkd / phosphor-networkd.\n\nUm... what?\n\nhttps://github.com/openbmc/bmcweb/blob/9970e93f794d0110de436828775e333e81330ad5/redfish-core/lib/redfish_util.hpp#L203\n\nThis wouldn\u0027t be the first time we call systemd directly.\n\n\u003e We really want bmcweb making these direct systemd calls ? What is the line?\n\nI\u0027m not sure it\u0027s a line, but how about we don\u0027t call services that then directly call other services with the same arguments?",
      "parentUuid": "720dcc1b_3959aca7",
      "revId": "108de66b3ff954967910b299d39efd654dedd24b",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "44fd41cd_8f188df1",
        "filename": "/COMMIT_MSG",
        "patchSetId": 14
      },
      "lineNbr": 13,
      "author": {
        "id": 1000020
      },
      "writtenOn": "2024-03-13T04:59:14Z",
      "side": 1,
      "message": "\u003e This wouldn\u0027t be the first time we call systemd directly.\n\nAgreed. \n\nAnd we do call systemd directly here too: https://github.com/openbmc/bmcweb/commit/75815e5c3677236e65643944b225abf2815b69c2 (although, my preference was https://gerrit.openbmc.org/c/openbmc/bmcweb/+/50318 over 75815e5c)\n\n\u003e I\u0027m not sure it\u0027s a line, but how about we don\u0027t call services that then directly call other services with the same arguments?\n\nCan you think of any other calls that fall into this? \nI think of bmcweb\u0027s redfish implementation as a d-bus to redfish translation. (I know you disagree here) I find bmcweb going to systemd directly makes the bmcweb Redfish architecture more complex and unexpected so I want to make sure we have a good reason here.",
      "parentUuid": "5c66befe_65f40fe5",
      "revId": "108de66b3ff954967910b299d39efd654dedd24b",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d4f1821d_2da67f24",
        "filename": "/COMMIT_MSG",
        "patchSetId": 14
      },
      "lineNbr": 13,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2024-03-13T05:22:06Z",
      "side": 1,
      "message": "I’m not sure I disagree.  bmcweb is a dbus to redfish translator.  the problem is what do we call on dbus when we need a single source of a piece of data?  do we call the application interface that millions of systems use?  or do we call the openbmc specific one that has occasional bugs and in turn just calls the other one (making the whole request flow more complex)?  if the openbmc specific one is actually doing something other than immediately turn around and call systemd, by all means let’s call it, but I’d rather go for the simpler approach of calling systemd directly, thus saving a dbus call, and providing the flexibility to not have to install phosphor-time if the system so chooses.  Not having to do int -\u003e uint -\u003e int conversion is just an added bonus.",
      "parentUuid": "44fd41cd_8f188df1",
      "revId": "108de66b3ff954967910b299d39efd654dedd24b",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "65e9d665_55b351db",
        "filename": "/COMMIT_MSG",
        "patchSetId": 14
      },
      "lineNbr": 13,
      "author": {
        "id": 1000020
      },
      "writtenOn": "2024-03-13T06:23:24Z",
      "side": 1,
      "message": "Is using systemd here a one off? Or do we have a list of other places we think we should also call systemd directly ?",
      "parentUuid": "d4f1821d_2da67f24",
      "revId": "108de66b3ff954967910b299d39efd654dedd24b",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8d662380_8d36d303",
        "filename": "/COMMIT_MSG",
        "patchSetId": 14
      },
      "lineNbr": 13,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2024-03-13T06:30:33Z",
      "side": 1,
      "message": "One off.  This was me looking into a bug, and finding that the error codes didn’t propagate, and bmcweb returned a 500 error, which prevented me from debugging the issue.  This isn’t part of an agenda to replace all other calls with systemd calls and as far as I know, this is the only one.  fwiw, I was really surprised that digging into phosphor-time, it was just forwarding the call through.  if at some point phosphor-time does something other than just forward the call, and can send back the error such that we can identify it, I wouldn’t have a problem changing it back.",
      "parentUuid": "65e9d665_55b351db",
      "revId": "108de66b3ff954967910b299d39efd654dedd24b",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b93e66ff_aab819a3",
        "filename": "/COMMIT_MSG",
        "patchSetId": 14
      },
      "lineNbr": 13,
      "author": {
        "id": 1000020
      },
      "writtenOn": "2024-03-15T06:54:55Z",
      "side": 1,
      "message": "Ack. \nI am okay here.",
      "parentUuid": "8d662380_8d36d303",
      "revId": "108de66b3ff954967910b299d39efd654dedd24b",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "7998b55f_96f868af",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 14
      },
      "lineNbr": 0,
      "author": {
        "id": 1000206
      },
      "writtenOn": "2024-03-13T06:13:37Z",
      "side": 1,
      "message": "It seems like we went in a wrong direction when we decided to pass the time to timedate service via phosphor-time-manager in the first place (which only made things complex but also added delay without any extra benefit). This looks like a much simpler way to set time accurately.",
      "revId": "108de66b3ff954967910b299d39efd654dedd24b",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    }
  ],
  "submitRequirementResults": []
}