{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "88046f2c_71ffd9d3",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 9,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2023-01-09T18:17:34Z",
      "side": 1,
      "message": "what does \"highest priority\" mean in this context.  It\u0027s not clear.",
      "range": {
        "startLine": 9,
        "startChar": 28,
        "endLine": 9,
        "endChar": 44
      },
      "revId": "97e010ce5b47cff7982be36d9a7958eaebee7945",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f5c3027f_f3fa1d64",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 9,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2023-01-09T18:17:34Z",
      "side": 1,
      "message": "Per the developing guide, please word wrap 50/72.",
      "revId": "97e010ce5b47cff7982be36d9a7958eaebee7945",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1de6cafd_7d4abc14",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 9,
      "author": {
        "id": 1001555
      },
      "writtenOn": "2023-01-10T12:04:32Z",
      "side": 1,
      "message": "https://github.com/openbmc/bmcweb/blob/bb759e3aeaadfec9f3aac4485f253bcc8a523e4c/include/authentication.hpp#L275\n\nAccording to this part of code the priority of authentication is:\nmTLS\nXToken\nCookie\n\nwith next one only being used if previous one wasn\u0027t so having mTLS depend on a cookie is counter-intuitive and actually makes a cookie have a higher priority than mTLS",
      "parentUuid": "88046f2c_71ffd9d3",
      "range": {
        "startLine": 9,
        "startChar": 28,
        "endLine": 9,
        "endChar": 44
      },
      "revId": "97e010ce5b47cff7982be36d9a7958eaebee7945",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "353042ae_79433168",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 13,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2023-01-09T18:17:34Z",
      "side": 1,
      "message": "Can you convey in your commit message why this is a problem.  If the user has access to multiple credentials, is there a problem if we use the highest one they posess?",
      "range": {
        "startLine": 11,
        "startChar": 0,
        "endLine": 13,
        "endChar": 61
      },
      "revId": "97e010ce5b47cff7982be36d9a7958eaebee7945",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1b6d6566_e736109e",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 13,
      "author": {
        "id": 1001555
      },
      "writtenOn": "2023-01-10T12:04:32Z",
      "side": 1,
      "message": "the problem is that we aren\u0027t using the highest, we are using the cookie which should have lower priority than mTLS",
      "parentUuid": "353042ae_79433168",
      "range": {
        "startLine": 11,
        "startChar": 0,
        "endLine": 13,
        "endChar": 61
      },
      "revId": "97e010ce5b47cff7982be36d9a7958eaebee7945",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "084fb4b5_3c0eb4ca",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 33,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2023-01-09T18:17:34Z",
      "side": 1,
      "message": "I\u0027m not following here.  You\u0027re using the admins session, isn\u0027t it expected that you get the admins privilege level?",
      "range": {
        "startLine": 33,
        "startChar": 20,
        "endLine": 33,
        "endChar": 38
      },
      "revId": "97e010ce5b47cff7982be36d9a7958eaebee7945",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9b7f87c4_69d30016",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 33,
      "author": {
        "id": 1001555
      },
      "writtenOn": "2023-01-10T12:04:32Z",
      "side": 1,
      "message": "mTLS has higher priority so I\u0027d expect privilege level to come from the highest priority method that has been used - the fact that it came from a cookie makes cookies effectively act as having higher priority than mTLS which shouldn\u0027t be the case\n\nI\u0027ve reversed the scenario to help show the problem better:\nI\u0027m using a valid admin certificate for mTLS connection (https://github.com/openbmc/docs/blob/master/security/TLS-configuration.md) and then providing some dummy SESSION value in a cookie (-H \"Cookie: SESSION\u003d123\")- I\u0027m getting \"401 Unauthorized\" - which means cookies have higher priority than mTLS when they shouldn\u0027t.",
      "parentUuid": "084fb4b5_3c0eb4ca",
      "range": {
        "startLine": 33,
        "startChar": 20,
        "endLine": 33,
        "endChar": 38
      },
      "revId": "97e010ce5b47cff7982be36d9a7958eaebee7945",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4a07f816_ace79018",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 37,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2023-01-09T18:17:34Z",
      "side": 1,
      "message": "If anything we should be giving bad-request if we don\u0027t allow using two different forms of valid credentials.",
      "range": {
        "startLine": 37,
        "startChar": 0,
        "endLine": 37,
        "endChar": 44
      },
      "revId": "97e010ce5b47cff7982be36d9a7958eaebee7945",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "1adefcb2_1348470b",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2023-01-09T18:17:34Z",
      "side": 1,
      "message": "Based on the code, this looks fine.  Get your commit message cleaned up per the developing guide, and we\u0027ll get this on.",
      "revId": "97e010ce5b47cff7982be36d9a7958eaebee7945",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    }
  ]
}