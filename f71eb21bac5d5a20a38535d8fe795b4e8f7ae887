{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "c30105d5_b7d67446",
        "filename": "redfish-core/include/redfish_aggregator.hpp",
        "patchSetId": 7
      },
      "lineNbr": 106,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2024-08-21T03:43:16Z",
      "side": 1,
      "message": "Is this something we really need to handle?",
      "range": {
        "startLine": 98,
        "startChar": 0,
        "endLine": 106,
        "endChar": 5
      },
      "revId": "f71eb21bac5d5a20a38535d8fe795b4e8f7ae887",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ba1267b8_09423da9",
        "filename": "redfish-core/include/redfish_aggregator.hpp",
        "patchSetId": 7
      },
      "lineNbr": 106,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2024-09-03T19:52:36Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "c30105d5_b7d67446",
      "range": {
        "startLine": 98,
        "startChar": 0,
        "endLine": 106,
        "endChar": 5
      },
      "revId": "f71eb21bac5d5a20a38535d8fe795b4e8f7ae887",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "06584e25_28271100",
        "filename": "redfish-core/include/redfish_aggregator.hpp",
        "patchSetId": 7
      },
      "lineNbr": 106,
      "author": {
        "id": 1001303
      },
      "writtenOn": "2024-09-03T19:53:25Z",
      "side": 1,
      "message": "I recall handling trailing \"/\" with top level collections was a bit wonky.\n\nThis was likely trying to deal with a similar edge case when I expanded the search to support finding URIs like `/redfish/v1` which are uptree from top level collections.\n\nThe tests still pass w/o this section of code.  Either this patch removes the need for this patch or it was never actually needed in the first place.\n\nI\u0027ve removed it.",
      "parentUuid": "c30105d5_b7d67446",
      "range": {
        "startLine": 98,
        "startChar": 0,
        "endLine": 106,
        "endChar": 5
      },
      "revId": "f71eb21bac5d5a20a38535d8fe795b4e8f7ae887",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "5e47346f_fae8a87e",
        "filename": "redfish-core/include/redfish_aggregator.hpp",
        "patchSetId": 7
      },
      "lineNbr": 106,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2024-09-03T19:59:26Z",
      "side": 1,
      "message": "Yep, I remember dealing with a single trailing slash at the end, which is well defined and pretty standard to handle.  This code is dealing with multiple trailing slashes both at the end and in the middle (/redfish/v1//Chassis).  If we\u0027re getting those at this level, that seems broken somewhere else, and we should just return an error.\n\nAnywho, it\u0027s removed now, so rock on.",
      "parentUuid": "06584e25_28271100",
      "range": {
        "startLine": 98,
        "startChar": 0,
        "endLine": 106,
        "endChar": 5
      },
      "revId": "f71eb21bac5d5a20a38535d8fe795b4e8f7ae887",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "247473f8_52e125f4",
        "filename": "redfish-core/include/redfish_aggregator.hpp",
        "patchSetId": 7
      },
      "lineNbr": 106,
      "author": {
        "id": 1001303
      },
      "writtenOn": "2024-09-03T20:28:01Z",
      "side": 1,
      "message": "Well multiple trailing slashes would reach this point because the aggregation flow is hooked into every BMCWEB_ROUTE handler before we actually determine if the requested URI is valid.  That\u0027s kind of unavoidable though and not much of a concern.\n\nI checked through the CL that added the check and it\u0027s not mentioned in the comments https://gerrit.openbmc.org/c/openbmc/bmcweb/+/59969.\n\nI\u0027d need to do some further investigation to see if it was ever needed at some point.  That\u0027s not a blocker though since it\u0027s for sure no longer needed.",
      "parentUuid": "5e47346f_fae8a87e",
      "range": {
        "startLine": 98,
        "startChar": 0,
        "endLine": 106,
        "endChar": 5
      },
      "revId": "f71eb21bac5d5a20a38535d8fe795b4e8f7ae887",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "59a79e91_1aab8356",
        "filename": "redfish-core/include/redfish_aggregator.hpp",
        "patchSetId": 7
      },
      "lineNbr": 106,
      "author": {
        "id": 1001303
      },
      "writtenOn": "2024-09-04T16:20:48Z",
      "side": 1,
      "message": "Just want to close the loop on this question.  I confirmed that this check was in fact previously needed and it\u0027s not the case that something was broken.\n\nI reset to HEAD before this patch was applied and just removed this check from the original version of `searchCollectionsArray()`.\n\nI ran the tests and `/redfish/v1//` was incorrectly identified as a URI that was uptree from a top level collection.\n\nIt turns out that the changes made in this patch to filter out the query parameters also handle this edge case and that\u0027s why the check is no longer needed.",
      "parentUuid": "247473f8_52e125f4",
      "range": {
        "startLine": 98,
        "startChar": 0,
        "endLine": 106,
        "endChar": 5
      },
      "revId": "f71eb21bac5d5a20a38535d8fe795b4e8f7ae887",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "05075941_0c0783ee",
        "filename": "redfish-core/include/redfish_aggregator.hpp",
        "patchSetId": 7
      },
      "lineNbr": 106,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2024-09-04T23:07:03Z",
      "side": 1,
      "message": "I\u0027m not sure I understand why /redfish/v1// needs to be covered at all.  It would seem that\u0027s a bug on the client side if that was the request, but all good, sounds like it\u0027s sorted.",
      "parentUuid": "59a79e91_1aab8356",
      "range": {
        "startLine": 98,
        "startChar": 0,
        "endLine": 106,
        "endChar": 5
      },
      "revId": "f71eb21bac5d5a20a38535d8fe795b4e8f7ae887",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "06c2056f_29c40472",
        "filename": "redfish-core/include/redfish_aggregator.hpp",
        "patchSetId": 7
      },
      "lineNbr": 106,
      "author": {
        "id": 1001303
      },
      "writtenOn": "2024-09-04T23:25:50Z",
      "side": 1,
      "message": "The test case was just /redfish/v1// but it should\u0027ve failed if I tried similar URIs like /redfish/v1/TelemetryService//.\n\nAgree that realistically a client should never query a URI with am empty segment.\n\nThe only real benefit of the check was it would let us determine the URI was invalid. Otherwise we\u0027d forward it to the satellite BMC and then that BMC would determine the URI is invalid and return a 404.\n\nIt was just an optimization for an edge case that shouldn\u0027t get hit üòÑ",
      "parentUuid": "05075941_0c0783ee",
      "range": {
        "startLine": 98,
        "startChar": 0,
        "endLine": 106,
        "endChar": 5
      },
      "revId": "f71eb21bac5d5a20a38535d8fe795b4e8f7ae887",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "5c672565_ec0077eb",
        "filename": "redfish-core/include/redfish_aggregator.hpp",
        "patchSetId": 7
      },
      "lineNbr": 106,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2024-09-04T23:39:06Z",
      "side": 1,
      "message": "üëç",
      "parentUuid": "06c2056f_29c40472",
      "range": {
        "startLine": 98,
        "startChar": 0,
        "endLine": 106,
        "endChar": 5
      },
      "revId": "f71eb21bac5d5a20a38535d8fe795b4e8f7ae887",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7ef8167c_a513a600",
        "filename": "test/redfish-core/include/redfish_aggregator_test.cpp",
        "patchSetId": 7
      },
      "lineNbr": 642,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2024-08-21T03:43:16Z",
      "side": 1,
      "message": "?",
      "revId": "f71eb21bac5d5a20a38535d8fe795b4e8f7ae887",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "4add4227_8894f7bf",
        "filename": "test/redfish-core/include/redfish_aggregator_test.cpp",
        "patchSetId": 7
      },
      "lineNbr": 642,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2024-09-03T19:52:36Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "7ef8167c_a513a600",
      "revId": "f71eb21bac5d5a20a38535d8fe795b4e8f7ae887",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    }
  ]
}