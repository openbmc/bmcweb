{
  "comments": [
    {
      "key": {
        "uuid": "df89cf61_fe322936",
        "filename": "include/vm_websocket.hpp",
        "patchSetId": 8
      },
      "lineNbr": 20,
      "author": {
        "id": 1000021
      },
      "writtenOn": "2021-08-18T06:42:08Z",
      "side": 1,
      "message": "The document lists packets upto 2^25 or 32 MB. \n1. Where does the 128kB limit come from?\n2. Where does the 4 responses come from?\n\nBoth of these seem to be related to the implementation, possibly in the spawned nbd-proxy ?\n(not saying they are wrong just trying to understand)",
      "revId": "d6510a09ada8decb28af8aae7be8337ed29a12ea",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "dabe62c6_d1f07ae0",
        "filename": "include/vm_websocket.hpp",
        "patchSetId": 8
      },
      "lineNbr": 20,
      "author": {
        "id": 1000272
      },
      "writtenOn": "2021-08-19T03:20:19Z",
      "side": 1,
      "message": "1. Where does 128KB limit come from?\n- You might be right, the limitation seems to be a buffer size allocated in nbd-proxy https://github.com/openbmc/jsnbd/blob/master/nbd-proxy.c#L76 , but I didn\u0027t look into it.  However, we also found an issue in nbd-proxy splice system call yesterday, still investigating in this.\n\n2. Where does the 4 responses come from?\n- The original discussion is in Github: https://github.com/openbmc/bmcweb/issues/203, and 4 times buffer size is a sweet spot we found.",
      "parentUuid": "df89cf61_fe322936",
      "revId": "d6510a09ada8decb28af8aae7be8337ed29a12ea",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "cb47fe44_77c94037",
        "filename": "include/vm_websocket.hpp",
        "patchSetId": 8
      },
      "lineNbr": 20,
      "author": {
        "id": 1000272
      },
      "writtenOn": "2021-08-19T08:40:25Z",
      "side": 1,
      "message": "I just found out https://github.com/openbmc/bmcweb/blob/master/http/websocket.hpp#L75 here has allocate another 128KB+16Byte buffer... ðŸ˜“",
      "parentUuid": "dabe62c6_d1f07ae0",
      "revId": "d6510a09ada8decb28af8aae7be8337ed29a12ea",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    }
  ]
}