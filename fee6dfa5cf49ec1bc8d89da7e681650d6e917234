{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "94dcc219_a83370ef",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 14,
      "author": {
        "id": 1000020
      },
      "writtenOn": "2025-12-01T19:03:50Z",
      "side": 1,
      "message": "Redfish Validator? What tests?",
      "revId": "fee6dfa5cf49ec1bc8d89da7e681650d6e917234",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2c24e47f_d43cc617",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 14,
      "author": {
        "id": 1000004
      },
      "writtenOn": "2025-12-03T15:20:31Z",
      "side": 1,
      "message": "Yeah, would like to see some more details on testing. Use busctl to manually move the dbus properties to the Transitioning states and verify the Redfish API\u0027s.",
      "parentUuid": "94dcc219_a83370ef",
      "revId": "fee6dfa5cf49ec1bc8d89da7e681650d6e917234",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "915a781b_1ba0e52f",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 14,
      "author": {
        "id": 1002230
      },
      "writtenOn": "2025-12-03T15:47:53Z",
      "side": 1,
      "message": "Sorry, was obvious to me as I was discovered this working on official OpenBMC tests - https://github.com/openbmc/openbmc-test-automation/. Tests using reboot failed on BMC that exposes the TransitioningToOff/TransitioningToOn statuses. It\u0027s not particular test, as it fails on power management operation. This is the reason behind this - the way the power operation in the openbmc-test-automation tests works - it has 2 states current and desired states, after it performed operation, it periodically collects current state and compares with desired, until it matches (success) or timeout (failure). The state looks like:\n```\nstate:\n  [redfish]:                                      1\n  [chassis]:                                      On\n  [host]:                                         Disabled\n  [bmc]:                                          Enabled\n  [boot_progress]:                                None\n```\n\nIn order to collect Chassis state, tests do `Redfish.Get Properties    /redfish/v1/Chassis/${CHASSIS_ID}` and then consume `${chassis[\"PowerState\"]}    ${chassis[\"Status\"][\"State\"]}`.\n\nSo, the problem was, when DBUS reports state as TransitioningToOff or TransitioningToOn, the code simple ignored them, and did not populate the fields. As tests expected these fields to be populated, it simple failed the test as it could not construct valid state object.\n\nI ran the test suite against BMC with my change, and it stopped failing tests as the fields were populated and tests could construct and consume the state object.\n\nThe dbus properties have been moved by the tests (and revealed the problem). Do you still want me to use busctl to manually move?",
      "parentUuid": "2c24e47f_d43cc617",
      "revId": "fee6dfa5cf49ec1bc8d89da7e681650d6e917234",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "4d6fc06e_8ccecfa8",
        "filename": "redfish-core/lib/chassis.hpp",
        "patchSetId": 1
      },
      "lineNbr": 202,
      "author": {
        "id": 1000020
      },
      "writtenOn": "2025-12-01T19:03:50Z",
      "side": 1,
      "message": "I don\u0027t see an opposite of Starting so StandbyOffline seems fine. Enabled could have also worked here. Maybe something like UnavailableOffline would also work but PowerState is what is most important here and it says PoweringOff.  \n\n                \"Absent\": \"This function or device is not currently present or detected.  This resource represents a capability or an available location where a device can be installed.\",\n                \"Deferring\": \"The element does not process any commands but queues new requests.\",\n                \"Degraded\": \"The function or resource is degraded.\",\n                \"Disabled\": \"This function or resource is disabled.\",\n                \"Enabled\": \"This function or resource is enabled.\",\n                \"InTest\": \"This function or resource is undergoing testing or is in the process of capturing information for debugging.\",\n                \"Qualified\": \"The element quality is within the acceptable range of operation.\",\n                \"Quiesced\": \"The element is enabled but only processes a restricted set of commands.\",\n                \"StandbyOffline\": \"This function or resource is enabled but awaits an external action to activate it.\",\n                \"StandbySpare\": \"This function or resource is part of a redundancy set and awaits a failover or other external action to activate it.\",\n                \"Starting\": \"This function or resource is starting.\",\n                \"UnavailableOffline\": \"This function or resource is present but cannot be used.\",\n                \"Updating\": \"The element is updating and might be unavailable or degraded.\"",
      "revId": "fee6dfa5cf49ec1bc8d89da7e681650d6e917234",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "37cfe407_1a0f275d",
        "filename": "redfish-core/lib/chassis.hpp",
        "patchSetId": 1
      },
      "lineNbr": 202,
      "author": {
        "id": 1000004
      },
      "writtenOn": "2025-12-03T15:20:31Z",
      "side": 1,
      "message": "Yeah makes sense to me to use the same state we use for Off as a anyone checking that property should assume it\u0027s off when we\u0027re transitioning to off.",
      "parentUuid": "4d6fc06e_8ccecfa8",
      "revId": "fee6dfa5cf49ec1bc8d89da7e681650d6e917234",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    }
  ]
}