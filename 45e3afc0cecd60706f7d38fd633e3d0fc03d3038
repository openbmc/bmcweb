{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "49775860_932b2aa0",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 24
      },
      "lineNbr": 0,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2023-10-25T01:12:10Z",
      "side": 1,
      "message": "Any documentation updates needed?",
      "revId": "45e3afc0cecd60706f7d38fd633e3d0fc03d3038",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "af5839bc_ea8d3155",
        "filename": "redfish-core/lib/chassis.hpp",
        "patchSetId": 24
      },
      "lineNbr": 791,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2023-10-25T01:12:10Z",
      "side": 1,
      "message": "I\u0027m a little surprised we\u0027re setting a property here.  I would\u0027ve assumed this would be a \"rearm\" method, given that it likely needs to touch hardware.  Was that discussed somewhere.",
      "range": {
        "startLine": 791,
        "startChar": 0,
        "endLine": 791,
        "endChar": 75
      },
      "revId": "45e3afc0cecd60706f7d38fd633e3d0fc03d3038",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "843d14f1_68bf7228",
        "filename": "redfish-core/lib/chassis.hpp",
        "patchSetId": 24
      },
      "lineNbr": 791,
      "author": {
        "id": 1001526
      },
      "writtenOn": "2023-10-25T16:19:15Z",
      "side": 1,
      "message": "There are two methods of \"rearming\" the intrusion sensor: Automatic and Manual. In Auto mode, the sensor is showing the intrusion state real time, which means that closing the chassis cover after an intrusion event will restore the sensor state. However, in Manual mode, it expects a manual rearm \"to the sensor\" to restore its normal state, which means after an intrusion event, the IntrusionSensor will remain HardwareIntrusion (even when we re-attach the cover) until a rearm action is done for it to be restored back to Normal.\n\nIn https://redfish.dmtf.org/schemas/v1/Chassis.v1_24_0.json, longDescription of property IntrusionSensor under Chassis/PhysicalSecurity says: \"This property shall contain the physical security state of the chassis.  If the IntrusionSensorReArm property contains `Manual`, a client may set this property to `Normal` to reset the physical security state\". So this is kind of a rearm by software to the sensor.\n\nTherefore, when I added the Rearm property to chassis intrusion sensor interface in dbus-sensors (https://gerrit.openbmc.org/c/openbmc/dbus-sensors/+/58205), we expect the rearm action to be executed via Redfish (by patching Normal to Chassis/chassis/PhysicalSecurity/Intrusionsensor, it writes Normal to the Status property on DBus and restores the sensor).",
      "parentUuid": "af5839bc_ea8d3155",
      "range": {
        "startLine": 791,
        "startChar": 0,
        "endLine": 791,
        "endChar": 75
      },
      "revId": "45e3afc0cecd60706f7d38fd633e3d0fc03d3038",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f1537543_90663838",
        "filename": "redfish-core/lib/chassis.hpp",
        "patchSetId": 24
      },
      "lineNbr": 814,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2023-10-25T01:12:10Z",
      "side": 1,
      "message": "Do we need to be setting the @AllowedValues to specify this?",
      "range": {
        "startLine": 814,
        "startChar": 12,
        "endLine": 814,
        "endChar": 95
      },
      "revId": "45e3afc0cecd60706f7d38fd633e3d0fc03d3038",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6c8cd73d_07bf3500",
        "filename": "redfish-core/lib/chassis.hpp",
        "patchSetId": 24
      },
      "lineNbr": 814,
      "author": {
        "id": 1001526
      },
      "writtenOn": "2023-10-25T16:19:15Z",
      "side": 1,
      "message": "Redfish schema does not say we can\u0027t write anything other than Normal to it, it just says \"a client may set this property to Normal to reset the physical security state\". However, in dbus-sensors, we only process Normal value written to the property on DBus (writing others to it causes no effect), so I log the error here.",
      "parentUuid": "f1537543_90663838",
      "range": {
        "startLine": 814,
        "startChar": 12,
        "endLine": 814,
        "endChar": 95
      },
      "revId": "45e3afc0cecd60706f7d38fd633e3d0fc03d3038",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "36075a11_96240285",
        "filename": "redfish-core/lib/chassis.hpp",
        "patchSetId": 24
      },
      "lineNbr": 814,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2023-11-29T19:29:03Z",
      "side": 1,
      "message": "Right..... which is why @AllowedValues would be specified, to inform the user that Normal is allowed.",
      "parentUuid": "6c8cd73d_07bf3500",
      "range": {
        "startLine": 814,
        "startChar": 12,
        "endLine": 814,
        "endChar": 95
      },
      "revId": "45e3afc0cecd60706f7d38fd633e3d0fc03d3038",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "234dea91_626ef6e7",
        "filename": "redfish-core/lib/chassis.hpp",
        "patchSetId": 24
      },
      "lineNbr": 814,
      "author": {
        "id": 1001526
      },
      "writtenOn": "2024-01-03T04:33:16Z",
      "side": 1,
      "message": "DMTF says they will consider adding AllowableValues to schema (https://redfishforum.com/thread/993/intrusionsensor-allowablevalues). I added [\"PhysicalSecurity\"][\"IntrusionSensor@Redfish.AllowableValues\"] \u003d nlohmann::json::array_t({\"Normal\"});",
      "parentUuid": "36075a11_96240285",
      "range": {
        "startLine": 814,
        "startChar": 12,
        "endLine": 814,
        "endChar": 95
      },
      "revId": "45e3afc0cecd60706f7d38fd633e3d0fc03d3038",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0d56a25b_8f9b4fd2",
        "filename": "redfish-core/lib/chassis.hpp",
        "patchSetId": 24
      },
      "lineNbr": 827,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2023-10-25T01:12:10Z",
      "side": 1,
      "message": "This is going to get ALL intrusion sensors, not just the one we\u0027re looking for.",
      "range": {
        "startLine": 824,
        "startChar": 0,
        "endLine": 827,
        "endChar": 77
      },
      "revId": "45e3afc0cecd60706f7d38fd633e3d0fc03d3038",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "9f5001db_042d6fe1",
        "filename": "redfish-core/lib/chassis.hpp",
        "patchSetId": 24
      },
      "lineNbr": 827,
      "author": {
        "id": 1001526
      },
      "writtenOn": "2024-01-03T04:33:16Z",
      "side": 1,
      "message": "Updated to match the result from getSubTree with the association endpoint to find the desired sensor.",
      "parentUuid": "0d56a25b_8f9b4fd2",
      "range": {
        "startLine": 824,
        "startChar": 0,
        "endLine": 827,
        "endChar": 77
      },
      "revId": "45e3afc0cecd60706f7d38fd633e3d0fc03d3038",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "db550777_97d45d36",
        "filename": "redfish-core/lib/chassis.hpp",
        "patchSetId": 24
      },
      "lineNbr": 860,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2023-10-25T01:12:10Z",
      "side": 1,
      "message": "This doesn\u0027t look right.  We need to be getting the Intrusion interface for THIS chassis (based on chassisId) not just getting the main chassis intrusion for all chassis.",
      "range": {
        "startLine": 860,
        "startChar": 8,
        "endLine": 860,
        "endChar": 24
      },
      "revId": "45e3afc0cecd60706f7d38fd633e3d0fc03d3038",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "52c308ac_3e8690e5",
        "filename": "redfish-core/lib/chassis.hpp",
        "patchSetId": 24
      },
      "lineNbr": 860,
      "author": {
        "id": 1001526
      },
      "writtenOn": "2023-10-25T16:19:15Z",
      "side": 1,
      "message": "In dbus-sensors, for now, it expects to only have one chassis intrusion sensor for one given system and there\u0027s currently no association between the sensor and a chassis intrusion sensor. I think I need to add the association.\n\nIf we add the intrusion sensor to the /all_sensors \u003c-\u003e /chassis association with the chassis whose EntityManager config the sensor is configured in, that chassis will have the PhysicalSecurity attribute. In this case, what should be shown in PhysicalSecurity of other chassis or should it show nothing?",
      "parentUuid": "db550777_97d45d36",
      "range": {
        "startLine": 860,
        "startChar": 8,
        "endLine": 860,
        "endChar": 24
      },
      "revId": "45e3afc0cecd60706f7d38fd633e3d0fc03d3038",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0e48dbd3_5702201d",
        "filename": "redfish-core/lib/chassis.hpp",
        "patchSetId": 24
      },
      "lineNbr": 860,
      "author": {
        "id": 1001526
      },
      "writtenOn": "2023-11-17T08:35:28Z",
      "side": 1,
      "message": "Thinking again, the intrusion sensor does not have a sensor interface to be legit into associations like /all_sensors \u003c-\u003e /chassis or /sensors \u003c-\u003e /inventory, but I don\u0027t know if the sensor is worth creating a new association between it and a chassis, and can\u0027t think of the name for it. Can you please help leave some comment on this? (its interface is in PDI at https://github.com/openbmc/phosphor-dbus-interfaces/blob/master/yaml/xyz/openbmc_project/Chassis/Intrusion.interface.yaml)",
      "parentUuid": "52c308ac_3e8690e5",
      "range": {
        "startLine": 860,
        "startChar": 8,
        "endLine": 860,
        "endChar": 24
      },
      "revId": "45e3afc0cecd60706f7d38fd633e3d0fc03d3038",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "56079128_453d586b",
        "filename": "redfish-core/lib/chassis.hpp",
        "patchSetId": 24
      },
      "lineNbr": 860,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2023-11-29T19:29:03Z",
      "side": 1,
      "message": "\u003e In dbus-sensors, for now, it expects to only have one chassis intrusion sensor for one given system\n\nThat\u0027s fine, but it needs to be attached to the chassis that it\u0027s defined in, not all chassis.\n\n\u003e I don\u0027t know if the sensor is worth creating a new association between it and a chassis\n\nI suspect it probably is worth an association.",
      "parentUuid": "0e48dbd3_5702201d",
      "range": {
        "startLine": 860,
        "startChar": 8,
        "endLine": 860,
        "endChar": 24
      },
      "revId": "45e3afc0cecd60706f7d38fd633e3d0fc03d3038",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "50c88ff3_a8412ad5",
        "filename": "redfish-core/lib/chassis.hpp",
        "patchSetId": 24
      },
      "lineNbr": 860,
      "author": {
        "id": 1001526
      },
      "writtenOn": "2024-01-03T04:33:16Z",
      "side": 1,
      "message": "The association monitored_by/monitoring between a chassis and an intrusion sensor has been merged to PDI (https://gerrit.openbmc.org/c/openbmc/phosphor-dbus-interfaces/+/67957) and the patch to register the association on DBus is under review at https://gerrit.openbmc.org/c/openbmc/dbus-sensors/+/68060/3.\n\nNow this will use the association to look for the sensor associated with the chassis in request.",
      "parentUuid": "56079128_453d586b",
      "range": {
        "startLine": 860,
        "startChar": 8,
        "endLine": 860,
        "endChar": 24
      },
      "revId": "45e3afc0cecd60706f7d38fd633e3d0fc03d3038",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a8449c24_faec8200",
        "filename": "redfish-core/lib/chassis.hpp",
        "patchSetId": 24
      },
      "lineNbr": 868,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2023-10-25T01:12:10Z",
      "side": 1,
      "message": "this is not how to do this lookup.  A chassis makes an intrusion interface available via dbus.  This code shouldn\u0027t care what the \"primary\" chassis is.",
      "range": {
        "startLine": 868,
        "startChar": 21,
        "endLine": 868,
        "endChar": 75
      },
      "revId": "45e3afc0cecd60706f7d38fd633e3d0fc03d3038",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "df47e6a0_89a0952f",
        "filename": "redfish-core/lib/chassis.hpp",
        "patchSetId": 24
      },
      "lineNbr": 868,
      "author": {
        "id": 1001526
      },
      "writtenOn": "2024-01-03T04:33:16Z",
      "side": 1,
      "message": "Removed.",
      "parentUuid": "a8449c24_faec8200",
      "range": {
        "startLine": 868,
        "startChar": 21,
        "endLine": 868,
        "endChar": 75
      },
      "revId": "45e3afc0cecd60706f7d38fd633e3d0fc03d3038",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    }
  ]
}