{
  "comments": [
    {
      "key": {
        "uuid": "0a0380d7_6b4b3e5d",
        "filename": "/COMMIT_MSG",
        "patchSetId": 8
      },
      "lineNbr": 17,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2020-12-26T22:15:40Z",
      "side": 1,
      "message": "This doesn\u0027t track for me.  There isn\u0027t a single LocationIndicator instance, as this statement seems to imply, there is one per component.   They provide direct access to the LEDs, and a simple looping over all indicator properties on all resources, and turning them all on from the client seems like a much better fit for the redfish API way of doing things, as it would also allow the client to verify that all components where the LEDs are expected exist.  The only thing that\u0027s missing then is the timeout, but that seems relatively easy to implement with Job service, as a stand alone item that would be started before the routine was done.  Unless I\u0027m mistaken, that seems to fit well within the non-OEM redfish schemas.\n\nCan you add more details about why the existing redfish APIs wont\u0027 work as I\u0027ve described?",
      "range": {
        "startLine": 16,
        "startChar": 0,
        "endLine": 17,
        "endChar": 57
      },
      "revId": "9c16c58074321a2e53b543f4298e7ee5c3153224",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f64ce20e_231526d0",
        "filename": "/COMMIT_MSG",
        "patchSetId": 8
      },
      "lineNbr": 17,
      "author": {
        "id": 1000014
      },
      "writtenOn": "2021-01-07T13:46:31Z",
      "side": 1,
      "message": "Lamp_Test is a IBM only requirement at this moment. The expectation is that the client calls \"Do The Lamp test\" and the BMC implementation will do what it means. Currently, what it means is that we :\n- Light up all the Indicator LEDs that are on the enclosure\n- Also, light-up some of the Green Power LEDs that have the software control\n- Send a command over to the LCD display daemon to exercise LCD\n- Send a PLDM command over to the Host so that Host can light-up the LEDs for all the external attached drawers.\n\n- Wait for configured time\n- Revert to old states\n\nWe can not offload this onto redfish clients and do LocationIndicatorActive one by one since we would then spread the logic into different redfish clients. Also, we can not achieve the above 4 functionalities if we offloaded that onto clients. This becomes challenging when we have more than 1 redfish clients.",
      "parentUuid": "0a0380d7_6b4b3e5d",
      "range": {
        "startLine": 16,
        "startChar": 0,
        "endLine": 17,
        "endChar": 57
      },
      "revId": "9c16c58074321a2e53b543f4298e7ee5c3153224",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "69e14260_287e87c5",
        "filename": "/COMMIT_MSG",
        "patchSetId": 8
      },
      "lineNbr": 17,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2021-01-20T16:27:00Z",
      "side": 1,
      "message": "\u003e Lamp_Test is a IBM only requirement at this moment. The expectation is that the client calls \"Do The Lamp test\" and the BMC implementation will do what it means. Currently, what it means is that we :\n\u003e - Light up all the Indicator LEDs that are on the enclosure\n\u003e - Also, light-up some of the Green Power LEDs that have the software control\n\u003e - Send a command over to the LCD display daemon to exercise LCD\n\u003e - Send a PLDM command over to the Host so that Host can light-up the LEDs for all the external attached drawers.\n\u003e \n\u003e - Wait for configured time\n\u003e - Revert to old states\n\u003e \n\u003e We can not offload this onto redfish clients and do LocationIndicatorActive one by one since we would then spread the logic into different redfish clients.\n\nI\u0027m not following this comment.  Well behaved Redfish clients already need to know how to walk the tree, and the logic is minimal (if component has an LED, set to ON).  Having all your LEDs enumerated in Redfish would give you 90% of the above.  I could see having an OEM resource for the LCD test, as that\u0027s pretty specific, but otherwise, I feel like there are resources to do what you\u0027re trying to do, it just requires that all the LEDs be enumerated in the tree, which is a good thing to have anyway.\n\n\u003e Also, we can not achieve the above 4 functionalities if we offloaded that onto clients.\n\nYou can achieve 90% of the above, then have an OEM command for the last little part that\u0027s actually an OEM behavior.\n\nThe only other strange part is the timeout, but that seems easily modeled using task service.\n\n\u003e This becomes challenging when we have more than 1 redfish clients.\n\nHaving an OEM resource seems more challenging, as now all redfish clients need to implement the OEM IBM only parameter, as well as detect whether or not the system is an IBM system, and fall back to the redfish defined behavior.",
      "parentUuid": "f64ce20e_231526d0",
      "range": {
        "startLine": 16,
        "startChar": 0,
        "endLine": 17,
        "endChar": 57
      },
      "revId": "9c16c58074321a2e53b543f4298e7ee5c3153224",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b1d499ac_6f90f8fc",
        "filename": "/COMMIT_MSG",
        "patchSetId": 8
      },
      "lineNbr": 17,
      "author": {
        "id": 1000014
      },
      "writtenOn": "2021-01-21T13:05:20Z",
      "side": 1,
      "message": "Thanks for the comments Ed. However, it\u0027s a feature that we want to contain in the server code for the reasons mentioned above. Also, there are some one-off behaviors that we need to enforce on led-manager when the lamp test is happening. So, we can not rely on clients to do right thing for us. We have gone over these in the phosphor-dbus-interfaces commit that I ended up abandoning.",
      "parentUuid": "69e14260_287e87c5",
      "range": {
        "startLine": 16,
        "startChar": 0,
        "endLine": 17,
        "endChar": 57
      },
      "revId": "9c16c58074321a2e53b543f4298e7ee5c3153224",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8f6763aa_796c8c24",
        "filename": "/COMMIT_MSG",
        "patchSetId": 8
      },
      "lineNbr": 17,
      "author": {
        "id": 1000014
      },
      "writtenOn": "2021-02-03T05:22:40Z",
      "side": 1,
      "message": "Also, as mentioned above , Redfish is not the only initiator of this feature. We have Operator Panel hardware in IBM systems and users can initiate the lamp test by pressing some key combinations.",
      "parentUuid": "b1d499ac_6f90f8fc",
      "range": {
        "startLine": 16,
        "startChar": 0,
        "endLine": 17,
        "endChar": 57
      },
      "revId": "9c16c58074321a2e53b543f4298e7ee5c3153224",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b683d9db_681fa2d8",
        "filename": "/COMMIT_MSG",
        "patchSetId": 8
      },
      "lineNbr": 17,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2021-02-09T17:02:03Z",
      "side": 1,
      "message": "\u003e Thanks for the comments Ed. However, it\u0027s a feature that we want to contain in the server code for the reasons mentioned above. \n\nI\u0027ve listed alternatives that don\u0027t require OEM properties, and implement what you want above.  Yes, it requires clients to be more complex, but given the cost burden of maintaining oem properties, it seems well worth it.\n\nAlso, considering the variety of LEDs you want to change that we don\u0027t even have them modeled in Redfish yet, I\u0027d recommend that we need to model those first, before trying to add them to an OEM property.\n\n\u003e Also, there are some one-off behaviors that we need to enforce on led-manager when the lamp test is happening. So, we can not rely on clients to do right thing for us.\n\nCan you give some examples of what these one-off behaviors are that you\u0027d like to enforce?\n\n\u003e We have gone over these in the phosphor-dbus-interfaces commit that I ended up abandoning.\n\nI will add it to my reading list, to see if I can understand your use cases better.",
      "parentUuid": "b1d499ac_6f90f8fc",
      "range": {
        "startLine": 16,
        "startChar": 0,
        "endLine": 17,
        "endChar": 57
      },
      "revId": "9c16c58074321a2e53b543f4298e7ee5c3153224",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e1fdee5d_5c5ffe11",
        "filename": "/COMMIT_MSG",
        "patchSetId": 8
      },
      "lineNbr": 19,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2020-12-26T22:15:40Z",
      "side": 1,
      "message": "This seems like an odd use of the led groups API.  \"lamp test\" isn\u0027t really a group.  Maybe it should be \"all\" or something similar?",
      "range": {
        "startLine": 19,
        "startChar": 37,
        "endLine": 19,
        "endChar": 78
      },
      "revId": "9c16c58074321a2e53b543f4298e7ee5c3153224",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a1b7293f_4330b982",
        "filename": "/COMMIT_MSG",
        "patchSetId": 8
      },
      "lineNbr": 19,
      "author": {
        "id": 1000014
      },
      "writtenOn": "2021-01-07T13:46:31Z",
      "side": 1,
      "message": "We are adding the D-Bus object \"led/groups/lamp_test\" as part of one of the commit in led-manager repo",
      "parentUuid": "e1fdee5d_5c5ffe11",
      "range": {
        "startLine": 19,
        "startChar": 37,
        "endLine": 19,
        "endChar": 78
      },
      "revId": "9c16c58074321a2e53b543f4298e7ee5c3153224",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d4a0cb74_adb18cc0",
        "filename": "redfish-core/lib/oem/ibm/lamp_test.hpp",
        "patchSetId": 8
      },
      "lineNbr": 27,
      "author": {
        "id": 1000397
      },
      "writtenOn": "2020-12-26T01:29:38Z",
      "side": 1,
      "message": "remove it",
      "revId": "9c16c58074321a2e53b543f4298e7ee5c3153224",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8f505a6d_d6f7fb62",
        "filename": "redfish-core/lib/oem/ibm/lamp_test.hpp",
        "patchSetId": 8
      },
      "lineNbr": 27,
      "author": {
        "id": 1000400
      },
      "writtenOn": "2021-02-02T08:24:05Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "d4a0cb74_adb18cc0",
      "revId": "9c16c58074321a2e53b543f4298e7ee5c3153224",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ab75e16b_38fcf8a6",
        "filename": "redfish-core/lib/oem/ibm/lamp_test.hpp",
        "patchSetId": 8
      },
      "lineNbr": 170,
      "author": {
        "id": 1000397
      },
      "writtenOn": "2020-12-26T01:29:38Z",
      "side": 1,
      "message": "remove it",
      "range": {
        "startLine": 170,
        "startChar": 0,
        "endLine": 170,
        "endChar": 6
      },
      "revId": "9c16c58074321a2e53b543f4298e7ee5c3153224",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "520533c9_56ec8d21",
        "filename": "redfish-core/lib/oem/ibm/lamp_test.hpp",
        "patchSetId": 8
      },
      "lineNbr": 170,
      "author": {
        "id": 1000400
      },
      "writtenOn": "2021-02-02T08:24:05Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "ab75e16b_38fcf8a6",
      "range": {
        "startLine": 170,
        "startChar": 0,
        "endLine": 170,
        "endChar": 6
      },
      "revId": "9c16c58074321a2e53b543f4298e7ee5c3153224",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f3629baf_b0e0d033",
        "filename": "redfish-core/lib/systems.hpp",
        "patchSetId": 8
      },
      "lineNbr": 20,
      "author": {
        "id": 1000397
      },
      "writtenOn": "2020-12-26T01:29:38Z",
      "side": 1,
      "message": "#ifdef BMCWEB_ENABLE_IBM_LAMP_TEST\n#include \"oem/ibm/lamp_test.hpp\"\n#endif",
      "range": {
        "startLine": 20,
        "startChar": 0,
        "endLine": 20,
        "endChar": 32
      },
      "revId": "9c16c58074321a2e53b543f4298e7ee5c3153224",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6c3ae5fc_abbe0a71",
        "filename": "redfish-core/lib/systems.hpp",
        "patchSetId": 8
      },
      "lineNbr": 20,
      "author": {
        "id": 1000400
      },
      "writtenOn": "2021-02-02T08:24:05Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "f3629baf_b0e0d033",
      "range": {
        "startLine": 20,
        "startChar": 0,
        "endLine": 20,
        "endChar": 32
      },
      "revId": "9c16c58074321a2e53b543f4298e7ee5c3153224",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": false
    }
  ]
}