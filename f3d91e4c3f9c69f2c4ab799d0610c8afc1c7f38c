{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "2e7065dd_8ecbfaba",
        "filename": "http/ut/utility_test.cpp",
        "patchSetId": 6
      },
      "lineNbr": 94,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-01-25T02:44:13Z",
      "side": 1,
      "message": "We don\u0027t need a comment for \"no exception\".  This is the default.",
      "range": {
        "startLine": 94,
        "startChar": 7,
        "endLine": 94,
        "endChar": 25
      },
      "revId": "f3d91e4c3f9c69f2c4ab799d0610c8afc1c7f38c",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "f7f9dade_1c8752c8",
        "filename": "http/ut/utility_test.cpp",
        "patchSetId": 6
      },
      "lineNbr": 94,
      "author": {
        "id": 1000682
      },
      "writtenOn": "2022-01-25T03:12:49Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "2e7065dd_8ecbfaba",
      "range": {
        "startLine": 94,
        "startChar": 7,
        "endLine": 94,
        "endChar": 25
      },
      "revId": "f3d91e4c3f9c69f2c4ab799d0610c8afc1c7f38c",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6cef4ad5_a4371a23",
        "filename": "http/utility.hpp",
        "patchSetId": 6
      },
      "lineNbr": 590,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-01-25T02:44:13Z",
      "side": 1,
      "message": "Is this exposed through boost somewhere that we can rely on it without a magic number?",
      "range": {
        "startLine": 590,
        "startChar": 44,
        "endLine": 590,
        "endChar": 68
      },
      "revId": "f3d91e4c3f9c69f2c4ab799d0610c8afc1c7f38c",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "9ad79653_ea12e3e4",
        "filename": "http/utility.hpp",
        "patchSetId": 6
      },
      "lineNbr": 590,
      "author": {
        "id": 1000682
      },
      "writtenOn": "2022-01-25T03:12:49Z",
      "side": 1,
      "message": "No. I didn\u0027t find it.",
      "parentUuid": "6cef4ad5_a4371a23",
      "range": {
        "startLine": 590,
        "startChar": 44,
        "endLine": 590,
        "endChar": 68
      },
      "revId": "f3d91e4c3f9c69f2c4ab799d0610c8afc1c7f38c",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "13ac6ccd_74b7e3a4",
        "filename": "http/utility.hpp",
        "patchSetId": 6
      },
      "lineNbr": 590,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-01-25T17:30:57Z",
      "side": 1,
      "message": "Can we at least clean this up so it\u0027s a magic number that matches the max string?  I\u0027m still not quite sure how we know this is correct.  How do we know it\u0027s not 253402300798?  That answer should be obvious from the code.",
      "parentUuid": "9ad79653_ea12e3e4",
      "range": {
        "startLine": 590,
        "startChar": 44,
        "endLine": 590,
        "endChar": 68
      },
      "revId": "f3d91e4c3f9c69f2c4ab799d0610c8afc1c7f38c",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "47796193_c44927fa",
        "filename": "http/utility.hpp",
        "patchSetId": 6
      },
      "lineNbr": 590,
      "author": {
        "id": 1000682
      },
      "writtenOn": "2022-01-25T20:24:20Z",
      "side": 1,
      "message": "It\u0027s covered in the unit test.\n\n```\n    EXPECT_EQ(getDateTimeUintMs(std::numeric_limits\u003cuint64_t\u003e::max()),\n              \"9999-12-31T23:59:59.999000+00:00\");\n    EXPECT_EQ(getDateTimeUint(std::numeric_limits\u003cuint64_t\u003e::max()),\n              \"9999-12-31T23:59:59+00:00\");\n```",
      "parentUuid": "13ac6ccd_74b7e3a4",
      "range": {
        "startLine": 590,
        "startChar": 44,
        "endLine": 590,
        "endChar": 68
      },
      "revId": "f3d91e4c3f9c69f2c4ab799d0610c8afc1c7f38c",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8c67f430_3962e7ab",
        "filename": "http/utility.hpp",
        "patchSetId": 6
      },
      "lineNbr": 590,
      "author": {
        "id": 1000682
      },
      "writtenOn": "2022-01-25T20:27:59Z",
      "side": 1,
      "message": "\u003e That answer should be obvious from the code.\n\nI don\u0027t understand this comment. Are you saying the magic number should be obvious so people now how it is calculated? I don\u0027t have an answer for it. It is not obvious to get the number from \"9999-12-31T23:59:59\" since it involves leap year seconds.",
      "parentUuid": "47796193_c44927fa",
      "range": {
        "startLine": 590,
        "startChar": 44,
        "endLine": 590,
        "endChar": 68
      },
      "revId": "f3d91e4c3f9c69f2c4ab799d0610c8afc1c7f38c",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ff1d31bd_04ca75f2",
        "filename": "http/utility.hpp",
        "patchSetId": 6
      },
      "lineNbr": 590,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-01-25T22:52:24Z",
      "side": 1,
      "message": "\u003e It\u0027s covered in the unit test.\n\n253402300798 isn\u0027t explicitly covered by a unit test.\n\n\n\u003e It is not obvious to get the number from \"9999-12-31T23:59:59\" since it involves leap year seconds.\n\nRight, so how was that number determined, given how non trivial it is?  It looks like the explicit point is that we can\u0027t go beyond year 9999.  Is there a way we could code against that instead?  Maybe we\u0027d be better off picking a date closer so that it\u0027s more obvious, like yeah 2200?",
      "parentUuid": "8c67f430_3962e7ab",
      "range": {
        "startLine": 590,
        "startChar": 44,
        "endLine": 590,
        "endChar": 68
      },
      "revId": "f3d91e4c3f9c69f2c4ab799d0610c8afc1c7f38c",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f7907803_0e98a81e",
        "filename": "http/utility.hpp",
        "patchSetId": 6
      },
      "lineNbr": 590,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-01-25T22:52:24Z",
      "side": 1,
      "message": "Yes, we shouldn\u0027t have magic numbers in the code, and needing it kind of implies that we\u0027re using the wrong api.  Did you get a chance to look and see if boost::chrono has a better solution for this?",
      "parentUuid": "8c67f430_3962e7ab",
      "range": {
        "startLine": 590,
        "startChar": 44,
        "endLine": 590,
        "endChar": 68
      },
      "revId": "f3d91e4c3f9c69f2c4ab799d0610c8afc1c7f38c",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1e223cfc_cd3143ba",
        "filename": "http/utility.hpp",
        "patchSetId": 6
      },
      "lineNbr": 590,
      "author": {
        "id": 1000682
      },
      "writtenOn": "2022-01-25T23:47:28Z",
      "side": 1,
      "message": "creates a miliseconds first and then duration_cast to seconds?\n\nI can try it.",
      "parentUuid": "ff1d31bd_04ca75f2",
      "range": {
        "startLine": 590,
        "startChar": 44,
        "endLine": 590,
        "endChar": 68
      },
      "revId": "f3d91e4c3f9c69f2c4ab799d0610c8afc1c7f38c",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "dfb51aab_38334e51",
        "filename": "http/utility.hpp",
        "patchSetId": 6
      },
      "lineNbr": 590,
      "author": {
        "id": 1000682
      },
      "writtenOn": "2022-01-26T01:48:32Z",
      "side": 1,
      "message": "I looked into boost::chrono, in my understanding, it\u0027s a new time system, no related to ptime.\n\nThe documentation is bad. I have to look at BOOST test to see how to use their codes.\n\n```\ninline std::string getDateTimeUint(uint64_t secondsSinceEpoch)\n{\n    boost::chrono::duration\u003cboost::uint64_t\u003e boostSeconds(secondsSinceEpoch);\n    std::ostringstream out;\n\n    boost::chrono::time_point\u003cboost::chrono::system_clock\u003e tp(boostSeconds);\n    out \u003c\u003c boost::chrono::time_fmt(boost::chrono::timezone::utc, \"%Y-%m-%dT%H:%M:%S\") \u003c\u003c tp;\n    return out.str() + \"+00:00\";\n}\n\nTEST(Utility, GetDateTimeUint)\n{\n    EXPECT_EQ(getDateTimeUint(uint64_t{1638312095}),\n              \"2021-11-30T22:41:35+00:00\");\n    // some time in the future, beyond 2038\n    EXPECT_EQ(getDateTimeUint(uint64_t{41638312095}),\n              \"3289-06-18T21:48:15+00:00\");\n    // the maximum time we support\n    EXPECT_EQ(getDateTimeUint(uint64_t{253402300799}),\n              \"9999-12-31T23:59:59+00:00\");\n\n    // returns the maximum Redfish date\n    EXPECT_EQ(getDateTimeUint(std::numeric_limits\u003cuint64_t\u003e::max()),\n              \"9999-12-31T23:59:59+00:00\");\n\n    EXPECT_EQ(getDateTimeUint(std::numeric_limits\u003cuint64_t\u003e::min()),\n              \"1970-01-01T00:00:00+00:00\");\n}\n```\n\nThe above test failed with \n\n```\n[ RUN      ] Utility.GetDateTimeUint\n../http/ut/utility_test.cpp:88: Failure\nExpected equality of these values:\n  getDateTimeUint(uint64_t{41638312095})\n    Which is: \"2120-05-10T22:39:07+00:00\"\n  \"3289-06-18T21:48:15+00:00\"\n../http/ut/utility_test.cpp:91: Failure\nExpected equality of these values:\n  getDateTimeUint(uint64_t{253402300799})\n    Which is: \"1816-03-30T05:56:08+00:00\"\n  \"9999-12-31T23:59:59+00:00\"\n../http/ut/utility_test.cpp:95: Failure\nExpected equality of these values:\n  getDateTimeUint(std::numeric_limits\u003cuint64_t\u003e::max())\n    Which is: \"1969-12-31T23:59:59+00:00\"\n  \"9999-12-31T23:59:59+00:00\"\n[  FAILED  ] Utility.GetDateTimeUint (0 ms)\n```\nNothing makes sense.\n\nHow does duration_cast help here?",
      "parentUuid": "1e223cfc_cd3143ba",
      "range": {
        "startLine": 590,
        "startChar": 44,
        "endLine": 590,
        "endChar": 68
      },
      "revId": "f3d91e4c3f9c69f2c4ab799d0610c8afc1c7f38c",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8a1fbec1_fcc6186d",
        "filename": "http/utility.hpp",
        "patchSetId": 6
      },
      "lineNbr": 590,
      "author": {
        "id": 1000682
      },
      "writtenOn": "2022-01-26T01:56:08Z",
      "side": 1,
      "message": "\u003e Right, so how was that number determined, given how non trivial it is?  It looks like the explicit point is that we can\u0027t go beyond year 9999.  Is there a way we could code against that instead?  Maybe we\u0027d be better off picking a date closer so that it\u0027s more obvious, like yeah 2200?\n\nWe need year 9999, since our certificates can have such date. \n\n\u003e Is there a way we could code against that instead?\nI can just add a test case to ensure this number is correct by reference it directly. Otherwise, do you want to parse a time from the string \"9999-12-31T23:59:59+00:00\" and convert it into an integer?\n\nI don\u0027t think it worths it.\n\nThese numbers can be found in other places if we google it. Name a few,\n\nhttps://developers.google.com/protocol-buffers/docs/reference/java/com/google/protobuf/util/Timestamps.html#isValid-com.google.protobuf.Timestamp-\n\nhttps://docs.microsoft.com/en-us/dotnet/api/system.datetimeoffset.fromunixtimeseconds?view\u003dnet-6.0#exceptions",
      "parentUuid": "dfb51aab_38334e51",
      "range": {
        "startLine": 590,
        "startChar": 44,
        "endLine": 590,
        "endChar": 68
      },
      "revId": "f3d91e4c3f9c69f2c4ab799d0610c8afc1c7f38c",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f69ed88d_eda2f0af",
        "filename": "http/utility.hpp",
        "patchSetId": 6
      },
      "lineNbr": 590,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-01-26T17:54:12Z",
      "side": 1,
      "message": "Ok, hardcoded number is a mediocre answer, but I guess works.  Thanks for looking.",
      "parentUuid": "8a1fbec1_fcc6186d",
      "range": {
        "startLine": 590,
        "startChar": 44,
        "endLine": 590,
        "endChar": 68
      },
      "revId": "f3d91e4c3f9c69f2c4ab799d0610c8afc1c7f38c",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "05ad9a67_94846728",
        "filename": "http/utility.hpp",
        "patchSetId": 6
      },
      "lineNbr": 590,
      "author": {
        "id": 1000682
      },
      "writtenOn": "2022-01-26T18:43:22Z",
      "side": 1,
      "message": "Ack. Thanks!",
      "parentUuid": "f69ed88d_eda2f0af",
      "range": {
        "startLine": 590,
        "startChar": 44,
        "endLine": 590,
        "endChar": 68
      },
      "revId": "f3d91e4c3f9c69f2c4ab799d0610c8afc1c7f38c",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e2a67b59_9503831a",
        "filename": "http/utility.hpp",
        "patchSetId": 6
      },
      "lineNbr": 596,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-01-25T02:44:13Z",
      "side": 1,
      "message": "Is there a version of this constructor that doesn\u0027t throw?",
      "range": {
        "startLine": 596,
        "startChar": 31,
        "endLine": 596,
        "endChar": 43
      },
      "revId": "f3d91e4c3f9c69f2c4ab799d0610c8afc1c7f38c",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "17aa670b_e13410b4",
        "filename": "http/utility.hpp",
        "patchSetId": 6
      },
      "lineNbr": 596,
      "author": {
        "id": 1000682
      },
      "writtenOn": "2022-01-25T03:12:49Z",
      "side": 1,
      "message": "Tried, didn\u0027t find one.",
      "parentUuid": "e2a67b59_9503831a",
      "range": {
        "startLine": 596,
        "startChar": 31,
        "endLine": 596,
        "endChar": 43
      },
      "revId": "f3d91e4c3f9c69f2c4ab799d0610c8afc1c7f38c",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d9448e5f_02ce388e",
        "filename": "http/utility.hpp",
        "patchSetId": 6
      },
      "lineNbr": 615,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-01-25T02:44:13Z",
      "side": 1,
      "message": "This magic number is repeated 3 times in this patch.  Lets avoid that if we can, but at the very least, we should only declare it once.",
      "range": {
        "startLine": 615,
        "startChar": 0,
        "endLine": 615,
        "endChar": 52
      },
      "revId": "f3d91e4c3f9c69f2c4ab799d0610c8afc1c7f38c",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "0fdb14a0_d8f65bbb",
        "filename": "http/utility.hpp",
        "patchSetId": 6
      },
      "lineNbr": 615,
      "author": {
        "id": 1000682
      },
      "writtenOn": "2022-01-25T03:12:49Z",
      "side": 1,
      "message": "maxMilliSeconds and maxSeconds are different though. Done, declared them in the internal scope.",
      "parentUuid": "d9448e5f_02ce388e",
      "range": {
        "startLine": 615,
        "startChar": 0,
        "endLine": 615,
        "endChar": 52
      },
      "revId": "f3d91e4c3f9c69f2c4ab799d0610c8afc1c7f38c",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "975830c2_69b3f68c",
        "filename": "http/utility.hpp",
        "patchSetId": 6
      },
      "lineNbr": 615,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-01-25T17:30:57Z",
      "side": 1,
      "message": "They\u0027re the same plus a couple digits.",
      "parentUuid": "0fdb14a0_d8f65bbb",
      "range": {
        "startLine": 615,
        "startChar": 0,
        "endLine": 615,
        "endChar": 52
      },
      "revId": "f3d91e4c3f9c69f2c4ab799d0610c8afc1c7f38c",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3fa777a3_76062b46",
        "filename": "http/utility.hpp",
        "patchSetId": 6
      },
      "lineNbr": 615,
      "author": {
        "id": 1000682
      },
      "writtenOn": "2022-01-26T01:56:08Z",
      "side": 1,
      "message": "I can do \nconstexpr uint64_t maxSeconds \u003d 253402300799;\nconstexpr uint64_t maxMilliSeconds \u003d 253402300799 * 1000 + 999;\n\nif that helps a bit.",
      "parentUuid": "975830c2_69b3f68c",
      "range": {
        "startLine": 615,
        "startChar": 0,
        "endLine": 615,
        "endChar": 52
      },
      "revId": "f3d91e4c3f9c69f2c4ab799d0610c8afc1c7f38c",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1a7e2caa_6c56f54a",
        "filename": "http/utility.hpp",
        "patchSetId": 6
      },
      "lineNbr": 615,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-01-26T17:54:12Z",
      "side": 1,
      "message": "You mean?\n\nconstexpr uint64_t maxSeconds \u003d 253402300799;\nconstexpr uint64_t maxMilliSeconds \u003d maxSeconds * 1000 + 999;",
      "parentUuid": "3fa777a3_76062b46",
      "range": {
        "startLine": 615,
        "startChar": 0,
        "endLine": 615,
        "endChar": 52
      },
      "revId": "f3d91e4c3f9c69f2c4ab799d0610c8afc1c7f38c",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "45b205c4_dec84604",
        "filename": "http/utility.hpp",
        "patchSetId": 6
      },
      "lineNbr": 615,
      "author": {
        "id": 1000682
      },
      "writtenOn": "2022-01-26T18:43:22Z",
      "side": 1,
      "message": "oh, yes. Typo, I meant maxSeconds * 1000 + 999",
      "parentUuid": "1a7e2caa_6c56f54a",
      "range": {
        "startLine": 615,
        "startChar": 0,
        "endLine": 615,
        "endChar": 52
      },
      "revId": "f3d91e4c3f9c69f2c4ab799d0610c8afc1c7f38c",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    }
  ]
}