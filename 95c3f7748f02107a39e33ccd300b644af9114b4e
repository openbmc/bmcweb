{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "6135bb28_905dd310",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 12,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2024-09-20T17:08:29Z",
      "side": 1,
      "message": "Need more details here.  Where does the redfish schemas declare that the subscription should be deleted after the retries terminate?",
      "revId": "95c3f7748f02107a39e33ccd300b644af9114b4e",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4ebfa1e1_960420ea",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 12,
      "author": {
        "id": 1001604
      },
      "writtenOn": "2024-09-20T17:30:35Z",
      "side": 1,
      "message": "I added the link and short description in the commit message.\n\nhttps://www.dmtf.org/sites/default/files/standards/documents/DSP0268_2024.3.html\n\n```\nDeliveryRetryPolicy:\n - `TerminateAfterRetries`:\n  This value shall indicate the subscription is terminated after the\n  maximum number of retries is reached, specified by the\n  DeliveryRetryAttempts property in the event service.\n```",
      "parentUuid": "6135bb28_905dd310",
      "revId": "95c3f7748f02107a39e33ccd300b644af9114b4e",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1fb59b3f_03f70ec4",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 12,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2024-09-23T14:38:40Z",
      "side": 1,
      "message": "That says \"the subscription is terminated\" not \"the subscription is deleted\".  Any idea why the discrepancy?",
      "parentUuid": "4ebfa1e1_960420ea",
      "revId": "95c3f7748f02107a39e33ccd300b644af9114b4e",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b3fe5133_6bdfe5ed",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 12,
      "author": {
        "id": 1001604
      },
      "writtenOn": "2024-09-23T17:53:51Z",
      "side": 1,
      "message": "I also think they seem ambiguous between \"deleted” or terminated\".\n\nPerhaps wouldn’t they be indicating the differences what it caused – either by request, or by a result of certain conditions (like retry failures)?\n\nI think if the result of termination may be different from deletion, I would expect that some kind of the indication that tells about the terminated subscription, but there seems no such state field of the subscription.\n\n\n\nI found a few references related to the subscription.\n\n1) DMTF redfish spec - \nhttps://www.dmtf.org/sites/default/files/standards/documents/DSP0266_1.21.0.html\n\n\u003e Section 12.1.2:\n| Terminate a subscription if the number of delivery errors exceeds pre-configured thresholds.\n…\n| Subsequent requests to subscription resources that have been terminated respond with the HTTP 404 Not Found status code.\n\n2)  The openbmc event service doc - https://github.com/openbmc/docs/blob/377ed14df4913010752ee2faff994a50e12a6316/designs/redfish-eventservice.md?plain\u003d1#L860-L862\n\nIt also says\n\n\u003e ### Push style events (HTTP/HTTPS):\n\n\u003e... If establishing connection fails, it retries for configured\nretry attempts (DeliveryRetryAttempts) and delete the subscription if it reaches\nthreshold limit.\n\nWouldn\u0027t this be implying that the subscription termination will result in the deletion of it?",
      "parentUuid": "1fb59b3f_03f70ec4",
      "revId": "95c3f7748f02107a39e33ccd300b644af9114b4e",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4160777b_11bcd003",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 12,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2024-09-23T20:31:24Z",
      "side": 1,
      "message": "I think this one is the key:\n``` \nIf establishing connection fails, it retries for configured\nretry attempts (DeliveryRetryAttempts) and delete the subscription if it reaches\nthreshold limit.```\n\n\nMaybe that\u0027s what Appu intended to happen, but that\u0027s never been the behavior so far as I\u0027m aware, and we shouldn\u0027t be quoting OpenBMC docs in regards to Redfish.  We should be quoting DMTF.\n\nIf that\u0027s not clear, we should work with DMTF to get the wording put somewhere on what the correct behavior is here.",
      "parentUuid": "b3fe5133_6bdfe5ed",
      "revId": "95c3f7748f02107a39e33ccd300b644af9114b4e",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "50e9fb7a_ab966641",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 12,
      "author": {
        "id": 1001604
      },
      "writtenOn": "2024-09-24T12:16:01Z",
      "side": 1,
      "message": "Thanks for suggestion.\nI\u0027ve submitted an issue (question) to DMTF/Redfish - https://github.com/DMTF/Redfish/issues/6221",
      "parentUuid": "4160777b_11bcd003",
      "revId": "95c3f7748f02107a39e33ccd300b644af9114b4e",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0186de39_6aab9b38",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 12,
      "author": {
        "id": 1001604
      },
      "writtenOn": "2024-10-01T17:33:50Z",
      "side": 1,
      "message": "I got a response from DMTF.\n\n---\nhttps://github.com/DMTF/Redfish/issues/6221#issuecomment-2386208525\n\n\u003eDoes this subscription termination also mean that the subscription will need to be deleted?\n\nTermination has meant we delete the subscription. This is the reason we added the `DeliveryRetryPolicy` property to allow for the subscription to continue to exist in the service, but in a disabled state.\n\nI can see how this semantic isn\u0027t clear. The closest text I can find is in the Redfish Spec:\n\n\u003eTo terminate the event stream at any time, either the client or the service can delete the subscription.\n\n---",
      "parentUuid": "50e9fb7a_ab966641",
      "revId": "95c3f7748f02107a39e33ccd300b644af9114b4e",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "8f92d23e_9a5d3694",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 12,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2024-10-01T19:16:33Z",
      "side": 1,
      "message": "ACK.  Good enough for me.",
      "parentUuid": "0186de39_6aab9b38",
      "revId": "95c3f7748f02107a39e33ccd300b644af9114b4e",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "69e679ca_1da3381e",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 12,
      "author": {
        "id": 1001604
      },
      "writtenOn": "2024-10-03T21:01:14Z",
      "side": 1,
      "message": "In addition, https://github.com/DMTF/Redfish/pull/6230/ modifies the schema to clarify the behavior of subscription termination",
      "parentUuid": "8f92d23e_9a5d3694",
      "revId": "95c3f7748f02107a39e33ccd300b644af9114b4e",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ebfc6b46_18796bea",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 12,
      "author": {
        "id": 1001604
      },
      "writtenOn": "2024-10-11T17:55:12Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "69e679ca_1da3381e",
      "revId": "95c3f7748f02107a39e33ccd300b644af9114b4e",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    }
  ]
}