{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "3251d696_ffd784cf",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-07-01T14:35:24Z",
      "side": 1,
      "message": "I\u0027m a little worried that this helper function will get misused to do an anti pattern that we\u0027ve seen.  Generally when we need to sort lists, we sort the objects on the return of the mapper call, THEN iterate them and load them.  This is simpler, and means we\u0027re not moving large objects in place.  The only case I can see this being used is to construct the response object then use a destructor to do things \"at the end\" to sort the list, which is generally an anti pattern.  With that said, I\u0027ll look at how it\u0027s used and evaluate.",
      "revId": "bde5c8d22a82bcc5ff679fa6f5cd54b88061a3a2",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "4ffb3c9d_e3c5df29",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000682
      },
      "writtenOn": "2022-07-06T00:51:47Z",
      "side": 1,
      "message": "\u003e Generally when we need to sort lists, we sort the objects on the return of the mapper call, THEN iterate them and load them\n\nThis works in the workflow of call GetObject of the ObjectMapper where all objects are got from a single dbus call so we can easily sort them, but not the workflow in this commit which is call ManagedObjects of the ObjectManager of each service where objects might be owned by server services and thus we can\u0027t easily sort all the objects.\n\n\u003e The only case I can see this being used is to construct the response object then use a destructor to do things \"at the end\" to sort the list, which is generally an anti pattern.\n\nThat does be the use case. We can make its usage limited to the efficient expand handlers which agree in the later commit that if we reduce the code duplication (which is done) and make the pattern reusable for other resource (will be done when developing threads resource), we can accept the downsides.",
      "parentUuid": "3251d696_ffd784cf",
      "revId": "bde5c8d22a82bcc5ff679fa6f5cd54b88061a3a2",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "c1675448_1f755073",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-07-07T22:20:47Z",
      "side": 1,
      "message": "To add more context, there are many cases where we hit failures in intermediate dbus calls.  Having the response object return the partial results for the things that did work is generally a huge win on client-development speed, as from a bug, you can immediately identify what\u0027s missing, and that helps velocity overall.  This is why we generally don\u0027t do sorts at the end, because they usually involve storing objects in a cache somewhere.",
      "parentUuid": "4ffb3c9d_e3c5df29",
      "revId": "bde5c8d22a82bcc5ff679fa6f5cd54b88061a3a2",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4f4c8480_0345751e",
        "filename": "include/human_sort.hpp",
        "patchSetId": 1
      },
      "lineNbr": 108,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-07-01T14:35:24Z",
      "side": 1,
      "message": "This looks identical to std::less?\n\nAlso, as a general rule, please try to name things differently than existing methods.  Considering this is comparing numbers, this isn\u0027t an \"alphanum\" compare.",
      "range": {
        "startLine": 101,
        "startChar": 0,
        "endLine": 108,
        "endChar": 1
      },
      "revId": "bde5c8d22a82bcc5ff679fa6f5cd54b88061a3a2",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "75083312_f5cc6c6a",
        "filename": "include/human_sort.hpp",
        "patchSetId": 1
      },
      "lineNbr": 108,
      "author": {
        "id": 1000682
      },
      "writtenOn": "2022-07-06T01:47:25Z",
      "side": 1,
      "message": "Actually, given that the only usage here is string, I will just remove this overload.",
      "parentUuid": "4f4c8480_0345751e",
      "range": {
        "startLine": 101,
        "startChar": 0,
        "endLine": 108,
        "endChar": 1
      },
      "revId": "bde5c8d22a82bcc5ff679fa6f5cd54b88061a3a2",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "905badaf_9afadd5f",
        "filename": "redfish-core/include/utils/json_utils.hpp",
        "patchSetId": 1
      },
      "lineNbr": 590,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-07-01T14:35:24Z",
      "side": 1,
      "message": "Is there any place we\u0027d use this besides std::string?  Generally unless there\u0027s multiple use cases, we keep things non-templated until we need the template parameter.",
      "range": {
        "startLine": 590,
        "startChar": 0,
        "endLine": 590,
        "endChar": 29
      },
      "revId": "bde5c8d22a82bcc5ff679fa6f5cd54b88061a3a2",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "0db394b9_4a16505b",
        "filename": "redfish-core/include/utils/json_utils.hpp",
        "patchSetId": 1
      },
      "lineNbr": 590,
      "author": {
        "id": 1000682
      },
      "writtenOn": "2022-07-06T01:47:25Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "905badaf_9afadd5f",
      "range": {
        "startLine": 590,
        "startChar": 0,
        "endLine": 590,
        "endChar": 29
      },
      "revId": "bde5c8d22a82bcc5ff679fa6f5cd54b88061a3a2",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ad47d75f_0e95e908",
        "filename": "redfish-core/include/utils/json_utils.hpp",
        "patchSetId": 1
      },
      "lineNbr": 595,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-07-01T14:35:24Z",
      "side": 1,
      "message": "Why do we need to do a capture here?  can\u0027t we just declare it inline?",
      "range": {
        "startLine": 595,
        "startChar": 15,
        "endLine": 595,
        "endChar": 53
      },
      "revId": "bde5c8d22a82bcc5ff679fa6f5cd54b88061a3a2",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "74a3cc86_428a9e26",
        "filename": "redfish-core/include/utils/json_utils.hpp",
        "patchSetId": 1
      },
      "lineNbr": 595,
      "author": {
        "id": 1000682
      },
      "writtenOn": "2022-07-06T01:47:25Z",
      "side": 1,
      "message": "This is to avoid creating multiple objects for a single sort. Please reopen if there is better solution.",
      "parentUuid": "ad47d75f_0e95e908",
      "range": {
        "startLine": 595,
        "startChar": 15,
        "endLine": 595,
        "endChar": 53
      },
      "revId": "bde5c8d22a82bcc5ff679fa6f5cd54b88061a3a2",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "52f37149_d2134cfb",
        "filename": "redfish-core/include/utils/json_utils.hpp",
        "patchSetId": 1
      },
      "lineNbr": 595,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-07-06T05:13:44Z",
      "side": 1,
      "message": "The objects is static, why would we worry about opening more than one static object?\n\nPer the coding standard, write simple code, unless there\u0027s a good reason not to.  I would expect that both of these pieces of code generate nearly identical binaries.",
      "parentUuid": "74a3cc86_428a9e26",
      "range": {
        "startLine": 595,
        "startChar": 15,
        "endLine": 595,
        "endChar": 53
      },
      "revId": "bde5c8d22a82bcc5ff679fa6f5cd54b88061a3a2",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c653b642_2a9f6ecd",
        "filename": "redfish-core/include/utils/json_utils.hpp",
        "patchSetId": 1
      },
      "lineNbr": 595,
      "author": {
        "id": 1000682
      },
      "writtenOn": "2022-07-06T18:18:32Z",
      "side": 1,
      "message": "Wait, what is static? The comparator function is not static, https://github.com/openbmc/bmcweb/blob/bb05f2227d53d590534d1df6e6a622e13cea76ae/include/human_sort.hpp#L106. It needs an \"object\".\n\n\n```\n\nclass Compare {\npublic:\n    Compare() {std::cout \u003c\u003c \"Constructed\\n\";}\n    bool operator()(int a, int b) const {return a \u003c b;}\n};\n\nint main() {\n    std::vector\u003cint\u003e vec \u003d {0,1,2,3,4};\n    std::cout \u003c\u003c \"One way\" \u003c\u003c std::endl;\n    std::sort(vec.begin(), vec.end(), Compare());\n    std::cout \u003c\u003c \"Another way\" \u003c\u003c std::endl;\n    std::sort(vec.begin(), vec.end(), [](int a, int b) {\n      return Compare()(a, b);\n    });\n    return 0;\n}\n\n/*****************************\nOne way\nConstructed\nAnother way\nConstructed\nConstructed\nConstructed\nConstructed\nConstructed\nConstructed\nConstructed\nConstructed\n```\n\nWe should fix all the usage if you agree.",
      "parentUuid": "52f37149_d2134cfb",
      "range": {
        "startLine": 595,
        "startChar": 15,
        "endLine": 595,
        "endChar": 53
      },
      "revId": "bde5c8d22a82bcc5ff679fa6f5cd54b88061a3a2",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "edcbac02_c8fcaf53",
        "filename": "redfish-core/include/utils/json_utils.hpp",
        "patchSetId": 1
      },
      "lineNbr": 595,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-07-07T22:20:47Z",
      "side": 1,
      "message": "Yes, I used the wrong word there; Its not static, but sizeof(AlphanumLess) \u003d\u003d 0, so it doesn\u0027t require any effort to construct (it\u0027s one step from a function pointer) so adding it into the loop optimizes to no extra code at compile time.  This is the same pattern that std::less utilizes in other places, so inlining the object makes the code cleaner, and generates the same result.",
      "parentUuid": "c653b642_2a9f6ecd",
      "range": {
        "startLine": 595,
        "startChar": 15,
        "endLine": 595,
        "endChar": 53
      },
      "revId": "bde5c8d22a82bcc5ff679fa6f5cd54b88061a3a2",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0a6897ed_7f8755d6",
        "filename": "redfish-core/include/utils/json_utils.hpp",
        "patchSetId": 1
      },
      "lineNbr": 595,
      "author": {
        "id": 1000678
      },
      "writtenOn": "2022-07-08T08:30:01Z",
      "side": 1,
      "message": "+1, It should be optimized by compiler",
      "parentUuid": "edcbac02_c8fcaf53",
      "range": {
        "startLine": 595,
        "startChar": 15,
        "endLine": 595,
        "endChar": 53
      },
      "revId": "bde5c8d22a82bcc5ff679fa6f5cd54b88061a3a2",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "f130472b_772a82eb",
        "filename": "redfish-core/include/utils/json_utils.hpp",
        "patchSetId": 1
      },
      "lineNbr": 595,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2023-05-19T21:13:38Z",
      "side": 1,
      "message": "Fixed in latest.",
      "parentUuid": "0a6897ed_7f8755d6",
      "range": {
        "startLine": 595,
        "startChar": 15,
        "endLine": 595,
        "endChar": 53
      },
      "revId": "bde5c8d22a82bcc5ff679fa6f5cd54b88061a3a2",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e6fdc329_5e7f5ea7",
        "filename": "redfish-core/include/utils/json_utils.hpp",
        "patchSetId": 1
      },
      "lineNbr": 596,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-07-01T14:35:24Z",
      "side": 1,
      "message": "These should be const, which is going do show the coding error below;  nlohmann::json::operator[] creates an element if it doesn\u0027t exist, which is a case you\u0027ll need to handle.  As written, if the key being searched doesn\u0027t exist, it will be created as null, which isn\u0027t what you intended.",
      "range": {
        "startLine": 596,
        "startChar": 21,
        "endLine": 596,
        "endChar": 56
      },
      "revId": "bde5c8d22a82bcc5ff679fa6f5cd54b88061a3a2",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "da01fbf1_80384593",
        "filename": "redfish-core/include/utils/json_utils.hpp",
        "patchSetId": 1
      },
      "lineNbr": 596,
      "author": {
        "id": 1000682
      },
      "writtenOn": "2022-07-06T01:47:25Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "e6fdc329_5e7f5ea7",
      "range": {
        "startLine": 596,
        "startChar": 21,
        "endLine": 596,
        "endChar": 56
      },
      "revId": "bde5c8d22a82bcc5ff679fa6f5cd54b88061a3a2",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "66f80794_649a99d7",
        "filename": "redfish-core/include/utils/json_utils.hpp",
        "patchSetId": 1
      },
      "lineNbr": 597,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-07-01T14:35:24Z",
      "side": 1,
      "message": "ValueType* please.",
      "range": {
        "startLine": 597,
        "startChar": 14,
        "endLine": 597,
        "endChar": 18
      },
      "revId": "bde5c8d22a82bcc5ff679fa6f5cd54b88061a3a2",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "bcfa10f1_f86afa71",
        "filename": "redfish-core/include/utils/json_utils.hpp",
        "patchSetId": 1
      },
      "lineNbr": 597,
      "author": {
        "id": 1000682
      },
      "writtenOn": "2022-07-06T00:51:47Z",
      "side": 1,
      "message": "Wait, it\u0027s very clear get_ptr returns the corresponding pointer type, right?\n\nThis is similar to omit the type of result of make_shared or make_unique IMO.",
      "parentUuid": "66f80794_649a99d7",
      "range": {
        "startLine": 597,
        "startChar": 14,
        "endLine": 597,
        "endChar": 18
      },
      "revId": "bde5c8d22a82bcc5ff679fa6f5cd54b88061a3a2",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "dfbccebc_b552fe69",
        "filename": "redfish-core/include/utils/json_utils.hpp",
        "patchSetId": 1
      },
      "lineNbr": 597,
      "author": {
        "id": 1000682
      },
      "writtenOn": "2022-07-06T01:47:25Z",
      "side": 1,
      "message": "Ack. Please reopen if it doesn\u0027t make sense.",
      "parentUuid": "bcfa10f1_f86afa71",
      "range": {
        "startLine": 597,
        "startChar": 14,
        "endLine": 597,
        "endChar": 18
      },
      "revId": "bde5c8d22a82bcc5ff679fa6f5cd54b88061a3a2",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e13d5dd5_9e3cb3a1",
        "filename": "redfish-core/include/utils/json_utils.hpp",
        "patchSetId": 1
      },
      "lineNbr": 597,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-07-06T05:11:15Z",
      "side": 1,
      "message": "no, it\u0027s not.  get_ptr is not a standard library function, so there\u0027s no expectation that anyone knows what it returns.",
      "parentUuid": "dfbccebc_b552fe69",
      "range": {
        "startLine": 597,
        "startChar": 14,
        "endLine": 597,
        "endChar": 18
      },
      "revId": "bde5c8d22a82bcc5ff679fa6f5cd54b88061a3a2",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "7d0e876f_a53e42d0",
        "filename": "redfish-core/include/utils/json_utils.hpp",
        "patchSetId": 1
      },
      "lineNbr": 597,
      "author": {
        "id": 1000682
      },
      "writtenOn": "2022-07-06T18:46:03Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "e13d5dd5_9e3cb3a1",
      "range": {
        "startLine": 597,
        "startChar": 14,
        "endLine": 597,
        "endChar": 18
      },
      "revId": "bde5c8d22a82bcc5ff679fa6f5cd54b88061a3a2",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c7a361e1_bd595852",
        "filename": "redfish-core/include/utils/json_utils_test.cpp",
        "patchSetId": 1
      },
      "lineNbr": 15,
      "author": {
        "id": 1000678
      },
      "writtenOn": "2022-07-01T06:59:32Z",
      "side": 1,
      "message": "I wonder what will happen if half the elements can be sorted and half cannot. For example we have 3 valid elements 1 invalid then another 3 valid elements. You need test for this case that documents behaviour. Will all be sorted, none, or it will be partially sorted.",
      "revId": "bde5c8d22a82bcc5ff679fa6f5cd54b88061a3a2",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "42cd4f4a_09f84ebb",
        "filename": "redfish-core/include/utils/json_utils_test.cpp",
        "patchSetId": 1
      },
      "lineNbr": 15,
      "author": {
        "id": 1000682
      },
      "writtenOn": "2022-07-06T01:47:25Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "c7a361e1_bd595852",
      "revId": "bde5c8d22a82bcc5ff679fa6f5cd54b88061a3a2",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "08f5c05c_810015ef",
        "filename": "redfish-core/include/utils/json_utils_test.cpp",
        "patchSetId": 1
      },
      "lineNbr": 15,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-07-06T05:13:44Z",
      "side": 1,
      "message": "Please answer the question asked.  What is the behavior?",
      "parentUuid": "42cd4f4a_09f84ebb",
      "revId": "bde5c8d22a82bcc5ff679fa6f5cd54b88061a3a2",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6bcb8708_54fc1769",
        "filename": "redfish-core/include/utils/json_utils_test.cpp",
        "patchSetId": 1
      },
      "lineNbr": 15,
      "author": {
        "id": 1000678
      },
      "writtenOn": "2022-07-06T12:01:13Z",
      "side": 1,
      "message": "Thank, @Nan Zhou. Test looks fine, I can figure out how algorithm works from looking at it.",
      "parentUuid": "08f5c05c_810015ef",
      "revId": "bde5c8d22a82bcc5ff679fa6f5cd54b88061a3a2",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "c86d4fdb_1ba521b4",
        "filename": "redfish-core/include/utils/json_utils_test.cpp",
        "patchSetId": 1
      },
      "lineNbr": 15,
      "author": {
        "id": 1000682
      },
      "writtenOn": "2022-07-06T18:18:32Z",
      "side": 1,
      "message": "If you take a look at the diff of patchset 1 and 2, I have already added a comment in the function to explain the behavior. \n\nhttps://gerrit.openbmc.org/c/openbmc/bmcweb/+/55047/1..2\n\nNext time I will say \"Done. Added explanation to the function comment.\"",
      "parentUuid": "6bcb8708_54fc1769",
      "revId": "bde5c8d22a82bcc5ff679fa6f5cd54b88061a3a2",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "d831c1cb_06dfe8a9",
        "filename": "redfish-core/include/utils/json_utils_test.cpp",
        "patchSetId": 1
      },
      "lineNbr": 15,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-07-06T19:02:08Z",
      "side": 1,
      "message": "Yep, that would be fine.  Thanks for adding the explaination.",
      "parentUuid": "c86d4fdb_1ba521b4",
      "revId": "bde5c8d22a82bcc5ff679fa6f5cd54b88061a3a2",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    }
  ]
}