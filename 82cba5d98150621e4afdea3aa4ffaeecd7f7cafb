{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "6f1a96c4_f771385a",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 20
      },
      "lineNbr": 0,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2025-08-28T20:17:14Z",
      "side": 1,
      "message": "Seems fine.  Needs to be made to pass CI before it can merge.",
      "revId": "82cba5d98150621e4afdea3aa4ffaeecd7f7cafb",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f093338d_125c348a",
        "filename": "include/dbus_privileges.hpp",
        "patchSetId": 20
      },
      "lineNbr": 178,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2025-08-28T20:17:14Z",
      "side": 1,
      "message": "You\u0027ve changed this in a common method, requestUserInfo, which is reused in two places, one for checking privileges, and one for populating the user on redfish.  This is going to result in 404 being wrong for the user session case if a user is deleted, but their session still exists.\n\nI guess that\u0027s probably ok, previously we would\u0027ve gotten a 500, but please make sure you\u0027ve tested that path.",
      "revId": "82cba5d98150621e4afdea3aa4ffaeecd7f7cafb",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3c85a529_5ae0a30d",
        "filename": "include/dbus_privileges.hpp",
        "patchSetId": 20
      },
      "lineNbr": 178,
      "author": {
        "id": 1002382
      },
      "writtenOn": "2025-10-16T12:29:57Z",
      "side": 1,
      "message": "Hi Ed! Sorry for this late response, was in PTO and forgot about this\n\ncool, I will try to test the path that you mentioned as well\n\nwill get back on this patch by this week",
      "parentUuid": "f093338d_125c348a",
      "revId": "82cba5d98150621e4afdea3aa4ffaeecd7f7cafb",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "956e6193_07e94741",
        "filename": "include/dbus_privileges.hpp",
        "patchSetId": 20
      },
      "lineNbr": 178,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2025-10-21T17:04:43Z",
      "side": 1,
      "message": "I\u0027ve made some minor changes to this (passing the callback through to keep the lambda simple.)\n\nPTAL.",
      "parentUuid": "3c85a529_5ae0a30d",
      "revId": "82cba5d98150621e4afdea3aa4ffaeecd7f7cafb",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5a351526_ee4bc112",
        "filename": "include/dbus_privileges.hpp",
        "patchSetId": 20
      },
      "lineNbr": 178,
      "author": {
        "id": 1002382
      },
      "writtenOn": "2025-10-27T22:15:45Z",
      "side": 1,
      "message": "Hi Ed, thanks for adding the changes, it looks cleaner now ðŸ˜ƒ\n\nI tried to do what you suggested (when a user is deleted but the session still exist). I am not totally sure whether I do it correctly or not, but what I get is that the http status code is 404 after I delete a user\n\nlet me know if you have any concerns! Also I fixed the CI today, it is green now",
      "parentUuid": "956e6193_07e94741",
      "revId": "82cba5d98150621e4afdea3aa4ffaeecd7f7cafb",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2f4466bc_9ffd42e2",
        "filename": "include/dbus_privileges.hpp",
        "patchSetId": 20
      },
      "lineNbr": 178,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2025-10-27T23:42:09Z",
      "side": 1,
      "message": "Have you tested both code paths that hit this?  That\u0027s the real question.  404 would somewhat imply that you hit the 404 handler, not the second path of the code.",
      "parentUuid": "5a351526_ee4bc112",
      "revId": "82cba5d98150621e4afdea3aa4ffaeecd7f7cafb",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "41e3e18e_b388355d",
        "filename": "include/dbus_privileges.hpp",
        "patchSetId": 20
      },
      "lineNbr": 178,
      "author": {
        "id": 1002382
      },
      "writtenOn": "2025-11-03T01:37:56Z",
      "side": 1,
      "message": "Hi Ed! yup, today I just re-tested both path! Also, I am sorry I should put 401 instead of 404 there (was working on something else and not too focus, sorry!)\n\nhere are my full test plan that I just executed:\n\n## path of 401 http code\n### modified device\n- deploy new image to a BMC test device\n- remove account from bmcweb (`curl -X DELETE .../AccountService/Accounts/\u003cremoved-acc\u003e`)\n- use certificate of removed account (`curl --cert\u003d... --key\u003d... .../AccountService/Accounts -v`)\n- expect to get 401\n\n### controlled device\n- remove account from bmcweb (`curl -X DELETE .../AccountService/Accounts/\u003cremoved-acc\u003e`)\n- use certificate of removed account (`curl --cert\u003d... --key\u003d... .../AccountService/Accounts -v`)\n- expect to get 500\n\n---\n\n## path of 500 http code\n### stopped phosphor-user-manager service\n- re-add removed account to the modified BMC device using root user (`curl --user\u003d\"root:\u003croot-pwd\u003e\" --data\u003d\u003cjson-to-readd-removed-acc\u003e -X POST .../AccountService/Accounts`)\n- ssh to the BMC\n- stop the phosphor-user-manager srv (`systemctl stop xyz.openbmc_project.User.Manager`)\n- send curl request (`curl --cert\u003d... --key\u003d... .../AccountService/Accounts -v`)\n- expect to get 500\n\n### healthy phosphor-user-manager service\n- restart the phosphor-user-manager srv inside modified BMC (`systemctl start xyz.openbmc_project.User.Manager`)\n- ensure that the service is healthy (`systemctl status xyz.openbmc_project.User.Manager`)\n- send curl request (`curl --cert\u003d... --key\u003d... .../AccountService/Accounts -v`)\n- expect to get 200 (and response)\n\n---\n\nPlease let me know if the test plan is not covering necessary cases, thank you!!",
      "parentUuid": "2f4466bc_9ffd42e2",
      "revId": "82cba5d98150621e4afdea3aa4ffaeecd7f7cafb",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    }
  ]
}