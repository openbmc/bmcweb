{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "03399a8d_d391c5a8",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 90
      },
      "lineNbr": 0,
      "author": {
        "id": 1000020
      },
      "writtenOn": "2025-09-05T19:27:39Z",
      "side": 1,
      "message": "Put this no top of the utility one?",
      "revId": "440ad764c2ac7979a0e4f672cea8d30e87817834",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e15f474f_77522193",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 90
      },
      "lineNbr": 0,
      "author": {
        "id": 1001604
      },
      "writtenOn": "2025-09-08T13:17:58Z",
      "side": 1,
      "message": "This is refactored to be on top of\n- https://gerrit.openbmc.org/c/openbmc/bmcweb/+/83459\n- https://gerrit.openbmc.org/c/openbmc/bmcweb/+/79009",
      "parentUuid": "03399a8d_d391c5a8",
      "revId": "440ad764c2ac7979a0e4f672cea8d30e87817834",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f94b3df3_7293a833",
        "filename": "redfish-core/lib/assembly.hpp",
        "patchSetId": 90
      },
      "lineNbr": 76,
      "author": {
        "id": 1000020
      },
      "writtenOn": "2025-08-25T18:25:09Z",
      "side": 1,
      "message": "Is it time, this is a separate function? GetAssetinfo?",
      "revId": "440ad764c2ac7979a0e4f672cea8d30e87817834",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ced9fcc7_b75a2216",
        "filename": "redfish-core/lib/assembly.hpp",
        "patchSetId": 90
      },
      "lineNbr": 76,
      "author": {
        "id": 1001604
      },
      "writtenOn": "2025-09-08T13:17:58Z",
      "side": 1,
      "message": "Yes, getAssetInfo is done via https://gerrit.openbmc.org/c/openbmc/bmcweb/+/83459",
      "parentUuid": "f94b3df3_7293a833",
      "revId": "440ad764c2ac7979a0e4f672cea8d30e87817834",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b1a08bc7_142269fd",
        "filename": "redfish-core/lib/assembly.hpp",
        "patchSetId": 90
      },
      "lineNbr": 86,
      "author": {
        "id": 1000020
      },
      "writtenOn": "2025-08-25T18:25:09Z",
      "side": 1,
      "message": "I thought we typically did an empty check for sparePartNumber?",
      "revId": "440ad764c2ac7979a0e4f672cea8d30e87817834",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "6f65f553_7aaaca84",
        "filename": "redfish-core/lib/assembly.hpp",
        "patchSetId": 90
      },
      "lineNbr": 86,
      "author": {
        "id": 1001604
      },
      "writtenOn": "2025-09-08T13:17:58Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "b1a08bc7_142269fd",
      "revId": "440ad764c2ac7979a0e4f672cea8d30e87817834",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "231d03e7_f69ba70b",
        "filename": "redfish-core/lib/assembly.hpp",
        "patchSetId": 90
      },
      "lineNbr": 223,
      "author": {
        "id": 1000020
      },
      "writtenOn": "2025-08-25T18:25:09Z",
      "side": 1,
      "message": "WARNING here",
      "revId": "440ad764c2ac7979a0e4f672cea8d30e87817834",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "544b0a17_e895530f",
        "filename": "redfish-core/lib/assembly.hpp",
        "patchSetId": 90
      },
      "lineNbr": 223,
      "author": {
        "id": 1001604
      },
      "writtenOn": "2025-09-08T13:17:58Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "231d03e7_f69ba70b",
      "revId": "440ad764c2ac7979a0e4f672cea8d30e87817834",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "14566b77_8697e6d0",
        "filename": "redfish-core/lib/assembly.hpp",
        "patchSetId": 90
      },
      "lineNbr": 247,
      "author": {
        "id": 1000020
      },
      "writtenOn": "2025-08-25T18:25:09Z",
      "side": 1,
      "message": "Not sure these comments help much..",
      "revId": "440ad764c2ac7979a0e4f672cea8d30e87817834",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b07dfd7e_fcc3365e",
        "filename": "redfish-core/lib/assembly.hpp",
        "patchSetId": 90
      },
      "lineNbr": 247,
      "author": {
        "id": 1001604
      },
      "writtenOn": "2025-09-08T13:17:58Z",
      "side": 1,
      "message": "Acknowledged",
      "parentUuid": "14566b77_8697e6d0",
      "revId": "440ad764c2ac7979a0e4f672cea8d30e87817834",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "15e652e0_f8881ffc",
        "filename": "redfish-core/lib/assembly.hpp",
        "patchSetId": 90
      },
      "lineNbr": 253,
      "author": {
        "id": 1000020
      },
      "writtenOn": "2025-08-25T18:25:09Z",
      "side": 1,
      "message": "Head method too? \nheadAssembly \n`verb::head`",
      "revId": "440ad764c2ac7979a0e4f672cea8d30e87817834",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e39b543a_8fef1a5d",
        "filename": "redfish-core/lib/assembly.hpp",
        "patchSetId": 90
      },
      "lineNbr": 253,
      "author": {
        "id": 1001604
      },
      "writtenOn": "2025-09-08T13:17:58Z",
      "side": 1,
      "message": "verb::head method is added",
      "parentUuid": "15e652e0_f8881ffc",
      "revId": "440ad764c2ac7979a0e4f672cea8d30e87817834",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d8ee505a_b9671e53",
        "filename": "redfish-core/lib/assembly.hpp",
        "patchSetId": 90
      },
      "lineNbr": 253,
      "author": {
        "id": 1001604
      },
      "writtenOn": "2025-09-08T19:41:02Z",
      "side": 1,
      "message": "When verb::head is added, CI fails on\n\n- 46/58 redfish_test                 FAIL             2.45s   exit status 1\n- 55/58 redfish_oem_routing_test     FAIL             2.67s   exit status 1\n\n```\n\u003d\u003d6614\u003d\u003d    by 0x15915C: std::vector\u003ccrow::Node, std::allocator\u003ccrow::Node\u003e \u003e::_M_default_append(unsigned long) (vector.tcc:835)\n\u003d\u003d6614\u003d\u003d    by 0x15F96C: std::vector\u003ccrow::Node, std::allocator\u003ccrow::Node\u003e \u003e::resize(unsigned long) (stl_vector.h:1146)\n\u003d\u003d6614\u003d\u003d    by 0x14E2E6: crow::Trie\u003ccrow::Node\u003e::newNode() (trie.hpp:324)\n\u003d\u003d6614\u003d\u003d    by 0x156B0E: crow::Trie\u003ccrow::Node\u003e::add(std::basic_string_view\u003cchar, std::char_traits\u003cchar\u003e \u003e, unsigned int) (trie.hpp:249)\n\u003d\u003d6614\u003d\u003d    by 0x144B91: crow::Router::PerMethod::internalAdd(std::basic_string_view\u003cchar, std::char_traits\u003cchar\u003e \u003e, crow::BaseRule*) (routing.hpp:119)\n\u003d\u003d6614\u003d\u003d    by 0x144C59: crow::Router::internalAddRuleObject(std::__cxx11::basic_string\u003cchar, std::char_traits\u003cchar\u003e, std::allocator\u003cchar\u003e \u003e const\u0026, crow::BaseRule*) (routing.hpp:141)\n\u003d\u003d6614\u003d\u003d    by 0x14A797: crow::Router::validate() (routing.hpp:173)\n\u003d\u003d6614\u003d\u003d    by 0x14B11D: UnknownInlinedFun (app.hpp:69)\n\u003d\u003d6614\u003d\u003d    by 0x14B11D: redfish::(anonymous namespace)::OemRouter_FragmentRoutes_Test::TestBody() [clone .lto_priv.0] (redfish_oem_routing_test.cpp:53)\n\u003d\u003d6614\u003d\u003d    by 0x529AF66: HandleSehExceptionsInMethodIfSupported\u003ctesting::Test, void\u003e (gtest.cc:2653)\n\u003d\u003d6614\u003d\u003d    by 0x529AF66: void testing::internal::HandleExceptionsInMethodIfSupported\u003ctesting::Test, void\u003e(testing::Test*, void (testing::Test::*)(), char const*) (gtest.cc:2689)\n\u003d\u003d6614\u003d\u003d    by 0x5288BD5: Run (gtest.cc:2728)\n\u003d\u003d6614\u003d\u003d    by 0x5288BD5: testing::Test::Run() (gtest.cc:2718)\n.....\n```\n\nI think there seems an issue with Router?\nAt this time, I removed verb::head part.",
      "parentUuid": "e39b543a_8fef1a5d",
      "revId": "440ad764c2ac7979a0e4f672cea8d30e87817834",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "5a22bf58_a1baac70",
        "filename": "redfish-core/lib/assembly.hpp",
        "patchSetId": 90
      },
      "lineNbr": 253,
      "author": {
        "id": 1001604
      },
      "writtenOn": "2025-09-20T00:23:45Z",
      "side": 1,
      "message": "It turns out this error happens if `requestRoutesAssembly()` is added before `requestRoutesProcessorCollection()`\n\nError case:\n\n```\n    if constexpr (BMCWEB_REDFISH_CPU_LOG)\n    {\n....\n    }\n\n+    requestRoutesAssembly(app);\n\n    requestRoutesProcessorCollection(app);\n    ...\n```\n\nIf added after that, CI passes. \nThis implies that there seems some issues in dealing with ROUTE handling or perhaps gtest/valgrind itself???\n\nBut for the purpose of making progress, I added requestRoutesAssembly() toward the end of redfish.cpp.\n\n```\n   requestRoutesTrigger(app);\n\n    requestRoutesAssembly(app);\n\n    // Note, this must be the last route registered\n    requestRoutesRedfish(app);\n```",
      "parentUuid": "d8ee505a_b9671e53",
      "revId": "440ad764c2ac7979a0e4f672cea8d30e87817834",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "a547814c_6a1a3663",
        "filename": "redfish-core/lib/assembly.hpp",
        "patchSetId": 90
      },
      "lineNbr": 253,
      "author": {
        "id": 1001604
      },
      "writtenOn": "2025-10-02T20:22:29Z",
      "side": 1,
      "message": "For reference, the error looks like\n\n```\n\u003d\u003d6996\u003d\u003d  Block was alloc\u0027d at\n\u003d\u003d6996\u003d\u003d    at 0x484AFD3: operator new(unsigned long) (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)\n\u003d\u003d6996\u003d\u003d    by 0x1681B7: std::__new_allocator\u003ccrow::Node\u003e::allocate(unsigned long, void const*) (new_allocator.h:151)\n\u003d\u003d6996\u003d\u003d    by 0x159119: UnknownInlinedFun (allocator.h:203)\n\u003d\u003d6996\u003d\u003d    by 0x159119: UnknownInlinedFun (alloc_traits.h:614)\n\u003d\u003d6996\u003d\u003d    by 0x159119: UnknownInlinedFun (stl_vector.h:387)\n\u003d\u003d6996\u003d\u003d    by 0x159119: std::vector\u003ccrow::Node, std::allocator\u003ccrow::Node\u003e \u003e::_M_default_append(unsigned long) (vector.tcc:789)\n\u003d\u003d6996\u003d\u003d    by 0x15F83C: std::vector\u003ccrow::Node, std::allocator\u003ccrow::Node\u003e \u003e::resize(unsigned long) (stl_vector.h:1146)\n\u003d\u003d6996\u003d\u003d    by 0x14E2E6: crow::Trie\u003ccrow::Node\u003e::newNode() (trie.hpp:324)\n\u003d\u003d6996\u003d\u003d    by 0x156C48: crow::Trie\u003ccrow::Node\u003e::add(std::basic_string_view\u003cchar, std::char_traits\u003cchar\u003e \u003e, unsigned int) (trie.hpp:267)\n\u003d\u003d6996\u003d\u003d    by 0x144B91: crow::Router::PerMethod::internalAdd(std::basic_string_view\u003cchar, std::char_traits\u003cchar\u003e \u003e, crow::BaseRule*) (routing.hpp:119)\n\u003d\u003d6996\u003d\u003d    by 0x144C59: crow::Router::internalAddRuleObject(std::__cxx11::basic_string\u003cchar, std::char_traits\u003cchar\u003e, std::allocator\u003cchar\u003e \u003e const\u0026, crow::BaseRule*) (routing.hpp:141)\n\u003d\u003d6996\u003d\u003d    by 0x14A779: crow::Router::validate() (routing.hpp:173)\n\u003d\u003d6996\u003d\u003d    by 0x14B0FF: UnknownInlinedFun (app.hpp:69)\n\u003d\u003d6996\u003d\u003d    by 0x14B0FF: redfish::(anonymous namespace)::OemRouter_FragmentRoutes_Test::TestBody() [clone .lto_priv.0] (redfish_oem_routing_test.cpp:53)\n\u003d\u003d6996\u003d\u003d    by 0x529AF66: HandleSehExceptionsInMethodIfSupported\u003ctesting::Test, void\u003e (gtest.cc:2653)\n\u003d\u003d6996\u003d\u003d    by 0x529AF66: void testing::internal::HandleExceptionsInMethodIfSupported\u003ctesting::Test, void\u003e(testing::Test*, void (testing::Test::*)(), char const*) (gtest.cc:2689)\n\u003d\u003d6996\u003d\u003d    by 0x5288BD5: Run (gtest.cc:2728)\n\u003d\u003d6996\u003d\u003d    by 0x5288BD5: testing::Test::Run() (gtest.cc:2718)\n\u003d\u003d6996\u003d\u003d\n```\n\n\n\n```\n\u003d\u003d6996\u003d\u003d Invalid read of size 8\n\u003d\u003d6996\u003d\u003d    at 0x156B14: crow::Trie\u003ccrow::Node\u003e::add(std::basic_string_view\u003cchar, std::char_traits\u003cchar\u003e \u003e, unsigned int) (trie.hpp:249)\n\u003d\u003d6996\u003d\u003d    by 0x144B91: crow::Router::PerMethod::internalAdd(std::basic_string_view\u003cchar, std::char_traits\u003cchar\u003e \u003e, crow::BaseRule*) (routing.hpp:119)\n\u003d\u003d6996\u003d\u003d    by 0x144C59: crow::Router::internalAddRuleObject(std::__cxx11::basic_string\u003cchar, std::char_traits\u003cchar\u003e, std::allocator\u003cchar\u003e \u003e const\u0026, crow::BaseRule*) (routing.hpp:141)\n\u003d\u003d6996\u003d\u003d    by 0x14A779: crow::Router::validate() (routing.hpp:173)\n\u003d\u003d6996\u003d\u003d    by 0x14B0FF: UnknownInlinedFun (app.hpp:69)\n\u003d\u003d6996\u003d\u003d    by 0x14B0FF: redfish::(anonymous namespace)::OemRouter_FragmentRoutes_Test::TestBody() [clone .lto_priv.0] (redfish_oem_routing_test.cpp:53)\n\u003d\u003d6996\u003d\u003d    by 0x529AF66: HandleSehExceptionsInMethodIfSupported\u003ctesting::Test, void\u003e (gtest.cc:2653)\n\u003d\u003d6996\u003d\u003d    by 0x529AF66: void testing::internal::HandleExceptionsInMethodIfSupported\u003ctesting::Test, void\u003e(testing::Test*, void (testing::Test::*)(), char const*) (gtest.cc:2689)\n\u003d\u003d6996\u003d\u003d    by 0x5288BD5: Run (gtest.cc:2728)\n\u003d\u003d6996\u003d\u003d    by 0x5288BD5: testing::Test::Run() (gtest.cc:2718)\n\u003d\u003d6996\u003d\u003d    by 0x5288D64: testing::TestInfo::Run() (gtest.cc:2874)\n\u003d\u003d6996\u003d\u003d    by 0x528B8A6: Run (gtest.cc:3052)\n\u003d\u003d6996\u003d\u003d    by 0x528B8A6: testing::TestSuite::Run() (gtest.cc:3006)\n\u003d\u003d6996\u003d\u003d    by 0x5290C4B: testing::internal::UnitTestImpl::RunAllTests() (gtest.cc:6004)\n\u003d\u003d6996\u003d\u003d    by 0x529B60E: HandleSehExceptionsInMethodIfSupported\u003ctesting::internal::UnitTestImpl, bool\u003e (gtest.cc:2653)\n\u003d\u003d6996\u003d\u003d    by 0x529B60E: bool testing::internal::HandleExceptionsInMethodIfSupported\u003ctesting::internal::UnitTestImpl, bool\u003e(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) (gtest.cc:2689)\n\u003d\u003d6996\u003d\u003d    by 0x5288DEE: testing::UnitTest::Run() (gtest.cc:5583)\n```",
      "parentUuid": "5a22bf58_a1baac70",
      "revId": "440ad764c2ac7979a0e4f672cea8d30e87817834",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    }
  ]
}