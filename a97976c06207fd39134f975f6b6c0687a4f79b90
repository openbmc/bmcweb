{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "7341bd3f_375ac272",
        "filename": "redfish-core/include/utils/query_param.hpp",
        "patchSetId": 5
      },
      "lineNbr": 48,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-06-10T20:41:47Z",
      "side": 1,
      "message": "nit, generally we don\u0027t do \u003d {} for objects that default construct with no arguments.  can be removed.",
      "range": {
        "startLine": 48,
        "startChar": 47,
        "endLine": 48,
        "endChar": 52
      },
      "revId": "a97976c06207fd39134f975f6b6c0687a4f79b90",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "5f9161fb_82ddeeb2",
        "filename": "redfish-core/include/utils/query_param.hpp",
        "patchSetId": 5
      },
      "lineNbr": 48,
      "author": {
        "id": 1000682
      },
      "writtenOn": "2022-06-10T23:41:21Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "7341bd3f_375ac272",
      "range": {
        "startLine": 48,
        "startChar": 47,
        "endLine": 48,
        "endChar": 52
      },
      "revId": "a97976c06207fd39134f975f6b6c0687a4f79b90",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "c08a2ebb_5e3e1e40",
        "filename": "redfish-core/include/utils/query_param.hpp",
        "patchSetId": 5
      },
      "lineNbr": 48,
      "author": {
        "id": 1000682
      },
      "writtenOn": "2022-06-10T23:43:38Z",
      "side": 1,
      "message": "Oh, right, I now remember why I add this.\n\n```\n../redfish-core/include/utils/query_param_test.cpp:122:73: error: missing initializer for member â€˜redfish::query_param::Query::selectedPropertiesâ€™ [-Werror\u003dmissing-field-initializers]\n  122 |                   Query{.expandLevel \u003d 1, .expandType \u003d ExpandType::Both}),\n      |\n```\n\nIf without explicit initialization, compiler will complain about missing field initializers.",
      "parentUuid": "5f9161fb_82ddeeb2",
      "range": {
        "startLine": 48,
        "startChar": 47,
        "endLine": 48,
        "endChar": 52
      },
      "revId": "a97976c06207fd39134f975f6b6c0687a4f79b90",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "98c70382_14224b3d",
        "filename": "redfish-core/include/utils/query_param.hpp",
        "patchSetId": 5
      },
      "lineNbr": 48,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-06-10T23:46:35Z",
      "side": 1,
      "message": "that honestly feels like a bug in using gcc libstdc++ with clang and partial initialization being a new feature.\n\nOk, fine as is.",
      "parentUuid": "c08a2ebb_5e3e1e40",
      "range": {
        "startLine": 48,
        "startChar": 47,
        "endLine": 48,
        "endChar": 52
      },
      "revId": "a97976c06207fd39134f975f6b6c0687a4f79b90",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "29b54272_b5c0dfa5",
        "filename": "redfish-core/include/utils/query_param.hpp",
        "patchSetId": 5
      },
      "lineNbr": 112,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-06-10T20:41:47Z",
      "side": 1,
      "message": "nit, this is a little subtle that delegated.selectedProperties is empty, so swapping will result in an empty query.selectedProperties\n\nwould it be more clear if we just did\n\ndelegated.selectedProperties \u003d std::move(query.selectedProperties);\nquery.selectedProperties.clear();\n\nJust so it\u0027s more obvious what\u0027s going on?",
      "range": {
        "startLine": 112,
        "startChar": 7,
        "endLine": 112,
        "endChar": 74
      },
      "revId": "a97976c06207fd39134f975f6b6c0687a4f79b90",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "19a031cd_cbf5f7eb",
        "filename": "redfish-core/include/utils/query_param.hpp",
        "patchSetId": 5
      },
      "lineNbr": 112,
      "author": {
        "id": 1000682
      },
      "writtenOn": "2022-06-10T23:41:21Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "29b54272_b5c0dfa5",
      "range": {
        "startLine": 112,
        "startChar": 7,
        "endLine": 112,
        "endChar": 74
      },
      "revId": "a97976c06207fd39134f975f6b6c0687a4f79b90",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "547d190e_cc9a8a77",
        "filename": "redfish-core/include/utils/query_param.hpp",
        "patchSetId": 5
      },
      "lineNbr": 270,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-06-10T20:41:47Z",
      "side": 1,
      "message": "What are the escaping rules on $select properties?\n\nis \"\\,\" a valid property name?",
      "revId": "a97976c06207fd39134f975f6b6c0687a4f79b90",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c84bc434_601adcc1",
        "filename": "redfish-core/include/utils/query_param.hpp",
        "patchSetId": 5
      },
      "lineNbr": 270,
      "author": {
        "id": 1000682
      },
      "writtenOn": "2022-06-10T21:59:30Z",
      "side": 1,
      "message": "I didn\u0027t find any words in the spec talking about validating the properties",
      "parentUuid": "547d190e_cc9a8a77",
      "revId": "a97976c06207fd39134f975f6b6c0687a4f79b90",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "febfbaf4_c3bc9410",
        "filename": "redfish-core/include/utils/query_param.hpp",
        "patchSetId": 5
      },
      "lineNbr": 270,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-06-10T22:10:54Z",
      "side": 1,
      "message": "this goes beyond validation.  if I did\n\n$select\u003d\"\\,\"\nThat I think is valid?\n$select\u003d\",\"\nThat is invalid.\n\nwe should read through the odata spec and understand what the naming limitations are so we can at least detect the base escape case.",
      "parentUuid": "c84bc434_601adcc1",
      "revId": "a97976c06207fd39134f975f6b6c0687a4f79b90",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "39e07704_8d4d2ed3",
        "filename": "redfish-core/include/utils/query_param.hpp",
        "patchSetId": 5
      },
      "lineNbr": 270,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-06-10T22:21:15Z",
      "side": 1,
      "message": "for other examples:\n\nis $select\u003d\"\\0\" allowed?\nwhat about $select\u003d\"\\x24\"?",
      "parentUuid": "febfbaf4_c3bc9410",
      "revId": "a97976c06207fd39134f975f6b6c0687a4f79b90",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "91a6d498_cc352b5d",
        "filename": "redfish-core/include/utils/query_param.hpp",
        "patchSetId": 5
      },
      "lineNbr": 270,
      "author": {
        "id": 1000682
      },
      "writtenOn": "2022-06-10T23:52:19Z",
      "side": 1,
      "message": "I didn\u0027t find anything in odata spec regarding this \n\nhttp://docs.oasis-open.org/odata/odata/v4.01/odata-v4.01-part1-protocol.html#_Toc31358942. \n\nWhat\u0027s your suggestion?",
      "parentUuid": "39e07704_8d4d2ed3",
      "revId": "a97976c06207fd39134f975f6b6c0687a4f79b90",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "848ebd0b_a4d41a2c",
        "filename": "redfish-core/include/utils/query_param.hpp",
        "patchSetId": 5
      },
      "lineNbr": 270,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-06-10T23:57:53Z",
      "side": 1,
      "message": "you\u0027re looking under $select.  Look for a section dealing with property naming conventions/requirements.\n\nSurely it\u0027s not legal to put a null terminator in a property, we just need to find what the exact rulesset is.",
      "parentUuid": "91a6d498_cc352b5d",
      "revId": "a97976c06207fd39134f975f6b6c0687a4f79b90",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b998633f_74dba0ea",
        "filename": "redfish-core/include/utils/query_param.hpp",
        "patchSetId": 5
      },
      "lineNbr": 270,
      "author": {
        "id": 1000682
      },
      "writtenOn": "2022-06-15T01:10:32Z",
      "side": 1,
      "message": "I did some research and added some basic validation. Please take a look at the |queryCapabilities| function.",
      "parentUuid": "848ebd0b_a4d41a2c",
      "revId": "a97976c06207fd39134f975f6b6c0687a4f79b90",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ffc3cc88_28557fa0",
        "filename": "redfish-core/include/utils/query_param.hpp",
        "patchSetId": 5
      },
      "lineNbr": 622,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-06-10T20:41:47Z",
      "side": 1,
      "message": "Does redfish allow $select on arrays?  I\u0027ve never seen that before.  That seems odd, given that an array would be a collection, so $filter would be used, right?",
      "range": {
        "startLine": 621,
        "startChar": 0,
        "endLine": 622,
        "endChar": 59
      },
      "revId": "a97976c06207fd39134f975f6b6c0687a4f79b90",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e11abe62_704b7888",
        "filename": "redfish-core/include/utils/query_param.hpp",
        "patchSetId": 5
      },
      "lineNbr": 622,
      "author": {
        "id": 1000682
      },
      "writtenOn": "2022-06-10T21:59:30Z",
      "side": 1,
      "message": "This branch is needed because of the current algorithm goes to every leaf of the JSON tree.\n\nNo. I didn\u0027t see array can be selected in the spec.\n\nAnd yes, \"select\" arrays should be $filter.",
      "parentUuid": "ffc3cc88_28557fa0",
      "range": {
        "startLine": 621,
        "startChar": 0,
        "endLine": 622,
        "endChar": 59
      },
      "revId": "a97976c06207fd39134f975f6b6c0687a4f79b90",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2e3499be_f0cbbf0c",
        "filename": "redfish-core/include/utils/query_param.hpp",
        "patchSetId": 5
      },
      "lineNbr": 622,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-06-10T22:10:54Z",
      "side": 1,
      "message": "Oh, I see, so we need to select at every level, and an array might have a sublevel.  Ok.\n\nDo we have guidance on how select works for autoexpand resources?",
      "parentUuid": "e11abe62_704b7888",
      "range": {
        "startLine": 621,
        "startChar": 0,
        "endLine": 622,
        "endChar": 59
      },
      "revId": "a97976c06207fd39134f975f6b6c0687a4f79b90",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "6dc8d483_6fa13827",
        "filename": "redfish-core/include/utils/query_param.hpp",
        "patchSetId": 5
      },
      "lineNbr": 622,
      "author": {
        "id": 1000682
      },
      "writtenOn": "2022-06-10T23:41:21Z",
      "side": 1,
      "message": "\u003e Do we have guidance on how select works for autoexpand resources?\n\nMy understanding is that this is the same as $expand + $select, which is unclear. In this commit, AutoExpand is not errored out. And expanded objects can be selected using nested keys.\n\nI can ask this question in the DMTF discussion.",
      "parentUuid": "2e3499be_f0cbbf0c",
      "range": {
        "startLine": 621,
        "startChar": 0,
        "endLine": 622,
        "endChar": 59
      },
      "revId": "a97976c06207fd39134f975f6b6c0687a4f79b90",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2190d3f7_4745de55",
        "filename": "redfish-core/include/utils/query_param.hpp",
        "patchSetId": 5
      },
      "lineNbr": 645,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-06-10T20:41:47Z",
      "side": 1,
      "message": "This looks like it will give the wrong result if message objects are added when select is used.  I suspect we need to add more keys to this list.  Take a look at how the messages:: namespace works, we\u0027ll need to allow all messages through.",
      "range": {
        "startLine": 645,
        "startChar": 0,
        "endLine": 645,
        "endChar": 69
      },
      "revId": "a97976c06207fd39134f975f6b6c0687a4f79b90",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "91a04741_bd660a78",
        "filename": "redfish-core/include/utils/query_param.hpp",
        "patchSetId": 5
      },
      "lineNbr": 645,
      "author": {
        "id": 1000682
      },
      "writtenOn": "2022-06-10T21:59:30Z",
      "side": 1,
      "message": "You mean all error messages should be just selected?\n\nI thought we won\u0027t execute Query parameters if the response is not OK. Is there a case where there are messages with OK response code?",
      "parentUuid": "2190d3f7_4745de55",
      "range": {
        "startLine": 645,
        "startChar": 0,
        "endLine": 645,
        "endChar": 69
      },
      "revId": "a97976c06207fd39134f975f6b6c0687a4f79b90",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "26626ebe_198175f7",
        "filename": "redfish-core/include/utils/query_param.hpp",
        "patchSetId": 5
      },
      "lineNbr": 645,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-06-10T22:10:54Z",
      "side": 1,
      "message": "\u003e You mean all error messages should be just selected?\nThat\u0027s one thing, there are others.  We need to determine the rules.  It might be if there\u0027s an @ in the key name?  but we need to research the specs and understand.\n\n\nYes.  not all messages are fatal.",
      "parentUuid": "91a04741_bd660a78",
      "range": {
        "startLine": 645,
        "startChar": 0,
        "endLine": 645,
        "endChar": 69
      },
      "revId": "a97976c06207fd39134f975f6b6c0687a4f79b90",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "247e8feb_7b5b4b7e",
        "filename": "redfish-core/include/utils/query_param.hpp",
        "patchSetId": 5
      },
      "lineNbr": 645,
      "author": {
        "id": 1000682
      },
      "writtenOn": "2022-06-10T23:57:35Z",
      "side": 1,
      "message": "In the Redfish spec, it only mentioned these four. It doesn\u0027t mention other @ properties.\n\n```\nThe @odata.id and @odata.type properties shall be in the response payload and contain the same values as if $select was omitted. If the @odata.context property is supported, it shall be in the response payload and should be in the context property recommended format. If the @odata.etag property is supported, it shall be in the response payload and contain the same values as if $select was omitted.\n```\n\nIf the message contains these four properties, they will be selected by default as well. What are the other keys?",
      "parentUuid": "26626ebe_198175f7",
      "range": {
        "startLine": 645,
        "startChar": 0,
        "endLine": 645,
        "endChar": 69
      },
      "revId": "a97976c06207fd39134f975f6b6c0687a4f79b90",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "c5fac59a_510b2703",
        "filename": "redfish-core/include/utils/query_param.hpp",
        "patchSetId": 5
      },
      "lineNbr": 645,
      "author": {
        "id": 1000682
      },
      "writtenOn": "2022-06-15T01:11:37Z",
      "side": 1,
      "message": "I will close this. Please reopen if you still have concerns.",
      "parentUuid": "247e8feb_7b5b4b7e",
      "range": {
        "startLine": 645,
        "startChar": 0,
        "endLine": 645,
        "endChar": 69
      },
      "revId": "a97976c06207fd39134f975f6b6c0687a4f79b90",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9f14b8d0_12c83d30",
        "filename": "redfish-core/include/utils/query_param.hpp",
        "patchSetId": 5
      },
      "lineNbr": 645,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-06-16T16:12:06Z",
      "side": 1,
      "message": "It doesn\u0027t mention other @ properties.\n\n\nThey\u0027re not @ properties, they\u0027re messages, for example, when errors occur, or there are warnings.  If you\u0027d like them to clarify the spec in that regard, we can discuss it in a meeting, but considering that messages sit outside the redfish schemas, it seems that they should not be effected by select.\n\n\"error\" is one type of these keys.",
      "parentUuid": "c5fac59a_510b2703",
      "range": {
        "startLine": 645,
        "startChar": 0,
        "endLine": 645,
        "endChar": 69
      },
      "revId": "a97976c06207fd39134f975f6b6c0687a4f79b90",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ba617682_efb4df0d",
        "filename": "redfish-core/include/utils/query_param.hpp",
        "patchSetId": 5
      },
      "lineNbr": 645,
      "author": {
        "id": 1000682
      },
      "writtenOn": "2022-06-27T16:31:01Z",
      "side": 1,
      "message": "Adding error to this list should work, right?",
      "parentUuid": "9f14b8d0_12c83d30",
      "range": {
        "startLine": 645,
        "startChar": 0,
        "endLine": 645,
        "endChar": 69
      },
      "revId": "a97976c06207fd39134f975f6b6c0687a4f79b90",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "fadfab98_7b156d7d",
        "filename": "redfish-core/include/utils/query_param.hpp",
        "patchSetId": 5
      },
      "lineNbr": 645,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-06-27T16:55:09Z",
      "side": 1,
      "message": "it\u0027s just just error.  You will need to append all properties message, which to do that will require reading the spec.",
      "parentUuid": "ba617682_efb4df0d",
      "range": {
        "startLine": 645,
        "startChar": 0,
        "endLine": 645,
        "endChar": 69
      },
      "revId": "a97976c06207fd39134f975f6b6c0687a4f79b90",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "92379934_01b7e76b",
        "filename": "redfish-core/include/utils/query_param.hpp",
        "patchSetId": 5
      },
      "lineNbr": 645,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-06-27T17:50:42Z",
      "side": 1,
      "message": "First sentence should\u0027ve read \"It\u0027s not just error\"",
      "parentUuid": "fadfab98_7b156d7d",
      "range": {
        "startLine": 645,
        "startChar": 0,
        "endLine": 645,
        "endChar": 69
      },
      "revId": "a97976c06207fd39134f975f6b6c0687a4f79b90",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8c0a42fd_116b0839",
        "filename": "redfish-core/include/utils/query_param.hpp",
        "patchSetId": 5
      },
      "lineNbr": 645,
      "author": {
        "id": 1000682
      },
      "writtenOn": "2022-06-27T18:59:50Z",
      "side": 1,
      "message": "I don\u0027t understand. What are \"all properties message\"? In the current algorithm, if \"error\" is selected, all attributes under error will be selected as well, e.g., \"error/message\".\n\nIn the spec, I didn\u0027t find any other top level nodes in response that need to be selected.\n \nhttps://redfish.dmtf.org/schemas/DSP0266_1.15.0.html#service-responses",
      "parentUuid": "92379934_01b7e76b",
      "range": {
        "startLine": 645,
        "startChar": 0,
        "endLine": 645,
        "endChar": 69
      },
      "revId": "a97976c06207fd39134f975f6b6c0687a4f79b90",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f6de344c_48044ffb",
        "filename": "redfish-core/include/utils/query_param.hpp",
        "patchSetId": 5
      },
      "lineNbr": 645,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-06-27T19:12:41Z",
      "side": 1,
      "message": "Check out section 8.6, 9.3.3.1 (and I\u0027m sure there\u0027s others). in the specification.  They outline the message requirements.\n\nFrom the beginning of 8.6 \"HTTP status codes often do not provide enough information to enable deterministic error semantic\".\n\n\nWhen select is used, we shouldn\u0027t be stripping the messages as well.",
      "parentUuid": "8c0a42fd_116b0839",
      "range": {
        "startLine": 645,
        "startChar": 0,
        "endLine": 645,
        "endChar": 69
      },
      "revId": "a97976c06207fd39134f975f6b6c0687a4f79b90",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f194a6f3_d87ba38d",
        "filename": "redfish-core/include/utils/query_param.hpp",
        "patchSetId": 5
      },
      "lineNbr": 645,
      "author": {
        "id": 1000682
      },
      "writtenOn": "2022-06-27T19:42:09Z",
      "side": 1,
      "message": "\u003e When select is used, we shouldn\u0027t be stripping the messages as well.\n\nThis is already handled by this implementation:\n\n1. \"HTTP status codes often do not provide enough information to enable deterministic error semantics\" is under \"8.6 Error responses\". I would assume responses here have error http code, so that these query parameters won\u0027t be execute at all.\n\n2. Even if there is case \"8.6 Error responses\" have Ok HTTP codes (which I didn\u0027t find a case in the spec). I added \"error\" in this array, so all attributes under it will be selected.\n\nDo you still have concerns on this?",
      "parentUuid": "f6de344c_48044ffb",
      "range": {
        "startLine": 645,
        "startChar": 0,
        "endLine": 645,
        "endChar": 69
      },
      "revId": "a97976c06207fd39134f975f6b6c0687a4f79b90",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1fe1a062_19895c94",
        "filename": "redfish-core/include/utils/query_param.hpp",
        "patchSetId": 5
      },
      "lineNbr": 645,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-06-28T18:46:43Z",
      "side": 1,
      "message": "\u003e \u003e When select is used, we shouldn\u0027t be stripping the messages as well.\n\u003e \n\u003e This is already handled by this implementation:\n\u003e \n\u003e 1. \"HTTP status codes often do not provide enough information to enable deterministic error semantics\" is under \"8.6 Error responses\". I would assume responses here have error http code, so that these query parameters won\u0027t be execute at all.\n\nI think you\u0027ve read that incorrectly.  that statement means that NOT all messages will result in an error code.  There\u0027s a number of messages that return 200, but will still have messages.\n\n\u003e \n\u003e 2. Even if there is case \"8.6 Error responses\" have Ok HTTP codes (which I didn\u0027t find a case in the spec). \n\nThere is that case.\n\n\u003e I added \"error\" in this array, so all attributes under it will be selected.\n\u003e \n\u003e Do you still have concerns on this?\n\nYes, there are other parameters other than \"error\" that can contain a message, including per property messages.",
      "parentUuid": "f194a6f3_d87ba38d",
      "range": {
        "startLine": 645,
        "startChar": 0,
        "endLine": 645,
        "endChar": 69
      },
      "revId": "a97976c06207fd39134f975f6b6c0687a4f79b90",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "df329805_a3b38e8e",
        "filename": "redfish-core/include/utils/query_param.hpp",
        "patchSetId": 5
      },
      "lineNbr": 645,
      "author": {
        "id": 1000682
      },
      "writtenOn": "2022-06-28T19:05:56Z",
      "side": 1,
      "message": "Let me try to find these parameters other than \"error\".\n\nDoes adding them into this array (we might get it into a static set instead as it grows) solve your concern?",
      "parentUuid": "1fe1a062_19895c94",
      "range": {
        "startLine": 645,
        "startChar": 0,
        "endLine": 645,
        "endChar": 69
      },
      "revId": "a97976c06207fd39134f975f6b6c0687a4f79b90",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ec2178cf_9265738b",
        "filename": "redfish-core/include/utils/query_param.hpp",
        "patchSetId": 5
      },
      "lineNbr": 645,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-06-28T19:56:00Z",
      "side": 1,
      "message": "Yes, if we have the complete list here, I think the concern would be solved, but there are some that can\u0027t be direct string matches (ie per property messages) so I suspect this code will need to change.",
      "parentUuid": "df329805_a3b38e8e",
      "range": {
        "startLine": 645,
        "startChar": 0,
        "endLine": 645,
        "endChar": 69
      },
      "revId": "a97976c06207fd39134f975f6b6c0687a4f79b90",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ce46fe66_3fd11f32",
        "filename": "redfish-core/include/utils/query_param.hpp",
        "patchSetId": 5
      },
      "lineNbr": 645,
      "author": {
        "id": 1000682
      },
      "writtenOn": "2022-07-20T19:04:06Z",
      "side": 1,
      "message": "Revive this.\n\nI created an issue in https://redfish.dmtf.org/schemas/DSP0266_1.15.1.html#payload-annotations.\n\nFirstly, it might be that we are just worrying too much and the other annotations don\u0027t need to implicitly selected.\n\nSecondly, do we implement any of the other annotations today in bmcweb? If not, can we accept this patch as the first iteration and evolve it in the future as needed?",
      "parentUuid": "ec2178cf_9265738b",
      "range": {
        "startLine": 645,
        "startChar": 0,
        "endLine": 645,
        "endChar": 69
      },
      "revId": "a97976c06207fd39134f975f6b6c0687a4f79b90",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b690ed20_31d1177a",
        "filename": "redfish-core/include/utils/query_param.hpp",
        "patchSetId": 5
      },
      "lineNbr": 645,
      "author": {
        "id": 1000682
      },
      "writtenOn": "2022-07-20T19:59:08Z",
      "side": 1,
      "message": "Wrong link. \n\nhttps://github.com/DMTF/Redfish/issues/5175\n\n\"Based on the wording today, I would expect things like @Message.ExtendedInfo and other annotations to be omitted.\"\n\nWe can discuss that in the next DMTF meeting if you want.",
      "parentUuid": "ce46fe66_3fd11f32",
      "range": {
        "startLine": 645,
        "startChar": 0,
        "endLine": 645,
        "endChar": 69
      },
      "revId": "a97976c06207fd39134f975f6b6c0687a4f79b90",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b2f67819_125e1a24",
        "filename": "redfish-core/include/utils/query_param.hpp",
        "patchSetId": 5
      },
      "lineNbr": 645,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-07-20T20:38:58Z",
      "side": 1,
      "message": "Cool.\n\n\u003e Firstly, it might be that we are just worrying too much and the other annotations don\u0027t need to implicitly selected.\n\nIf that\u0027s true, then we should get a quick answer from DMTF (I\u0027m assuming we\u0027ll talk about it tomorrow) and that should be the end of it;  Lets figure out what the consensus is, and then this patchset should be pretty doable to update (or maybe is already correct as it stands).\n\n\nThanks for starting that!",
      "parentUuid": "b690ed20_31d1177a",
      "range": {
        "startLine": 645,
        "startChar": 0,
        "endLine": 645,
        "endChar": 69
      },
      "revId": "a97976c06207fd39134f975f6b6c0687a4f79b90",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "de961e67_388c3d76",
        "filename": "redfish-core/include/utils/query_param.hpp",
        "patchSetId": 5
      },
      "lineNbr": 645,
      "author": {
        "id": 1000682
      },
      "writtenOn": "2022-07-21T16:08:26Z",
      "side": 1,
      "message": "DMTF said in the current spec, implementation should omit these unless selected.\n\nGiven that we don\u0027t yet have these per property annotations, could we merge this patch as the first iteration?",
      "parentUuid": "b2f67819_125e1a24",
      "range": {
        "startLine": 645,
        "startChar": 0,
        "endLine": 645,
        "endChar": 69
      },
      "revId": "a97976c06207fd39134f975f6b6c0687a4f79b90",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3da43469_ab2c9314",
        "filename": "redfish-core/include/utils/query_param.hpp",
        "patchSetId": 5
      },
      "lineNbr": 645,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-07-21T16:34:47Z",
      "side": 1,
      "message": "\u003e DMTF said in the current spec, implementation should omit these unless selected.\n\nYep, I was in the discussion, and they said that might not be the intent, and we spent about 2 minutes talking about it given the time constraints.  Considering that this patch has been in review for a while, and it took us 4 weeks to file the question, we need to give DMTF equal time to respond;  Waiting a little longer (I\u0027m assuming til next Tuesday) until we have the intended answer on this seems like an ok compromise.\n\nOnce we have the \"intent\" called out, we can discuss what to do with this patch, and if we want to check in this patchset as is.\n\n\nDid anyone do the testing on the interop lab to see how most other systems implemented this?",
      "parentUuid": "de961e67_388c3d76",
      "range": {
        "startLine": 645,
        "startChar": 0,
        "endLine": 645,
        "endChar": 69
      },
      "revId": "a97976c06207fd39134f975f6b6c0687a4f79b90",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5c5ef43b_8d9ce64b",
        "filename": "redfish-core/include/utils/query_param.hpp",
        "patchSetId": 5
      },
      "lineNbr": 645,
      "author": {
        "id": 1000682
      },
      "writtenOn": "2022-07-22T16:22:33Z",
      "side": 1,
      "message": "\u003e Did anyone do the testing on the interop lab to see how most other systems implemented this?\n\nThese three companies implement $select: Lenovo, HPE, and Dell. All of them have the same behavior: these annotations are omitted unless selected explicitly.\n\n```\n/redfish/v1/Systems/1?$select\u003dBoot\n{\n    \"@odata.context\": \"/redfish/v1/$metadata#ComputerSystem.ComputerSystem\",\n    \"@odata.id\": \"/redfish/v1/Systems/System.Embedded.1\",\n    \"@odata.type\": \"#ComputerSystem.v1_10_0.ComputerSystem\",\n    \"Boot\": {\n        \"BootOptions\": {\n            \"@odata.id\": \"/redfish/v1/Systems/System.Embedded.1/BootOptions\"\n        },\n        \"Certificates\": {\n            \"@odata.id\": \"/redfish/v1/Systems/System.Embedded.1/Boot/Certificates\"\n        },\n        \"BootOrder\": [\n            \"Boot0005\",\n            \"Boot0000\",\n            \"Boot0001\"\n        ],\n        \"BootOrder@odata.count\": 3,\n        \"BootSourceOverrideEnabled\": \"Disabled\",\n        \"BootSourceOverrideMode\": \"UEFI\",\n        \"BootSourceOverrideTarget\": \"None\",\n        \"UefiTargetBootSourceOverride\": null,\n        \"BootSourceOverrideTarget@Redfish.AllowableValues\": [\n            \"None\",\n            \"Pxe\",\n            \"Floppy\",\n            \"Cd\",\n            \"Hdd\",\n            \"BiosSetup\",\n            \"Utilities\",\n            \"UefiTarget\",\n            \"SDCard\",\n            \"UefiHttp\"\n        ]\n    }\n}\n\n/redfish/v1/Systems/System.Embedded.1?$select\u003dBoot/BootSourceOverrideTarget\n{\n    \"@odata.context\": \"/redfish/v1/$metadata#ComputerSystem.ComputerSystem\",\n    \"@odata.id\": \"/redfish/v1/Systems/System.Embedded.1\",\n    \"@odata.type\": \"#ComputerSystem.v1_10_0.ComputerSystem\",\n    \"Boot\": {\n        \"BootSourceOverrideTarget\": \"None\"\n    }\n}\n\n```",
      "parentUuid": "3da43469_ab2c9314",
      "range": {
        "startLine": 645,
        "startChar": 0,
        "endLine": 645,
        "endChar": 69
      },
      "revId": "a97976c06207fd39134f975f6b6c0687a4f79b90",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "57f4d55c_483a61a2",
        "filename": "redfish-core/include/utils/query_param.hpp",
        "patchSetId": 5
      },
      "lineNbr": 645,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-07-23T15:13:10Z",
      "side": 1,
      "message": "Ok, that\u0027s really good information to have.  The second one shows that context, id and type are included, so we did the right thing there.  Did you check to see if they validate input?\n\nIf not, that\u0027s probably ok.\n\nThis patch I think should be ready to go in.",
      "parentUuid": "5c5ef43b_8d9ce64b",
      "range": {
        "startLine": 645,
        "startChar": 0,
        "endLine": 645,
        "endChar": 69
      },
      "revId": "a97976c06207fd39134f975f6b6c0687a4f79b90",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3d6bfbde_9f8b832b",
        "filename": "redfish-core/include/utils/query_param.hpp",
        "patchSetId": 5
      },
      "lineNbr": 645,
      "author": {
        "id": 1000682
      },
      "writtenOn": "2022-07-24T16:48:41Z",
      "side": 1,
      "message": "Did you check to see if they validate input?\n\n```\n/redfish/v1/Systems/1?$select\u003dBoot/NotExist\n\n{\n    \"PCIeFunctions@odata.count\": 6,\n    \"@odata.type\": \"#ComputerSystem.v1_11_0.ComputerSystem\",\n    \"@odata.id\": \"/redfish/v1/Systems/1\",\n    \"@odata.etag\": \"\\\"25bd2d9a1ea4630e845d97\\\"\",\n    \"Boot\": {},\n    \"PCIeDevices@odata.count\": 5\n}\n```",
      "parentUuid": "57f4d55c_483a61a2",
      "range": {
        "startLine": 645,
        "startChar": 0,
        "endLine": 645,
        "endChar": 69
      },
      "revId": "a97976c06207fd39134f975f6b6c0687a4f79b90",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "146e0567_96fbc7dd",
        "filename": "redfish-core/include/utils/query_param.hpp",
        "patchSetId": 5
      },
      "lineNbr": 645,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-07-25T01:45:39Z",
      "side": 1,
      "message": "interesting.  Iâ€™m surprised itâ€™s that common considering they input validation of network input is such a common requirement.\n\nIâ€™m assuming all the systems operate that way?",
      "parentUuid": "3d6bfbde_9f8b832b",
      "range": {
        "startLine": 645,
        "startChar": 0,
        "endLine": 645,
        "endChar": 69
      },
      "revId": "a97976c06207fd39134f975f6b6c0687a4f79b90",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e071eb0e_d624bb85",
        "filename": "redfish-core/include/utils/query_param.hpp",
        "patchSetId": 5
      },
      "lineNbr": 645,
      "author": {
        "id": 1000682
      },
      "writtenOn": "2022-07-26T00:25:46Z",
      "side": 1,
      "message": "\u003e  Iâ€™m surprised itâ€™s that common considering they input validation of network input is such a common requirement.\n\nWho\u0027re \"they\"?\n\n\u003e Iâ€™m assuming all the systems operate that way?\n\nI checked all systems available on interop lab today.\n\nHPE and Lenovo didn\u0027t implement validation. Dell did validate the input of $select. By doing some reverse engineering, I believe what they do is checking if the value of $select is in resolvable in the final JSON. If not, they return 400.\n\nWDYU? Do you want this patch to be perfect? Or we can improve in future patchsets? \n\nI prefer improve in future patchsets. This patch has simple validation already (it checks it is a valid path). And it has been in review for a while.",
      "parentUuid": "146e0567_96fbc7dd",
      "range": {
        "startLine": 645,
        "startChar": 0,
        "endLine": 645,
        "endChar": 69
      },
      "revId": "a97976c06207fd39134f975f6b6c0687a4f79b90",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "28498b3c_9cdce5e9",
        "filename": "redfish-core/include/utils/query_param.hpp",
        "patchSetId": 5
      },
      "lineNbr": 645,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-07-26T02:37:50Z",
      "side": 1,
      "message": "\u003e \u003e  Iâ€™m surprised itâ€™s that common considering they input validation of network input is such a common requirement.\n\u003e \n\u003e Who\u0027re \"they\"?\n\nThe other system vendors (non openbmc)\n\n\u003e \n\u003e \u003e Iâ€™m assuming all the systems operate that way?\n\u003e \n\u003e I checked all systems available on interop lab today.\n\u003e \n\u003e HPE and Lenovo didn\u0027t implement validation. Dell did validate the input of $select. By doing some reverse engineering, I believe what they do is checking if the value of $select is in resolvable in the final JSON. If not, they return 400.\n\nThat seems problematic too for backward compatibility, if a parameter gets added later.\n\n\u003e \n\u003e WDYU? Do you want this patch to be perfect? Or we can improve in future patchsets? \n\nI\u0027m ok with not comparing against a fixed list, but SOME kind of validation is required  to meet the security principals we require.  https://cheatsheetseries.owasp.org/cheatsheets/Input_Validation_Cheat_Sheet.html#implementing-input-validation\n\nSure if you want to break it up into another patch, that\u0027s fine, but I\u0027d like to have some understanding of what we need before this patchset merges.\n\nWhat about:\nProperty is in the range [A-Za-z0-9]\nProperty is less than 40 characters long.\n\n\n\u003e \n\u003e I prefer improve in future patchsets.\n\nUnfortunately in open source, people pull and deploy continuously, so if we check in bugs, we get CVEs;  As written, this feature isn\u0027t behind the option flag, if you want to do it incrementally, put it behind the option flag, and it can probably go in.\n\n\u003e This patch has simple validation already (it checks it is a valid path). And it has been in review for a while.\n\n\n\nAre we sure we have the recursive bits correct?",
      "parentUuid": "e071eb0e_d624bb85",
      "range": {
        "startLine": 645,
        "startChar": 0,
        "endLine": 645,
        "endChar": 69
      },
      "revId": "a97976c06207fd39134f975f6b6c0687a4f79b90",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e4735474_8736e1f2",
        "filename": "redfish-core/include/utils/query_param.hpp",
        "patchSetId": 5
      },
      "lineNbr": 645,
      "author": {
        "id": 1000682
      },
      "writtenOn": "2022-07-26T03:14:03Z",
      "side": 1,
      "message": "\u003e The other system vendors (non openbmc)\n\nI did check all systems in interop lab. What else do you want me to do?\n\n\u003e That seems problematic too for backward compatibility, if a parameter gets added later.\n\nAre you saying returning 400 by checking if a property is in the final JSON is problematic if a new attribute is added? Why is that? Could you elaborate?\n\n\u003e I\u0027m ok with not comparing against a fixed list, but SOME kind of validation is required  to meet the security principals we require.  https://cheatsheetseries.owasp.org/cheatsheets/Input_Validation_Cheat_Sheet.html#implementing-input-validation\n\u003e Sure if you want to break it up into another patch, that\u0027s fine, but I\u0027d like to have some understanding of what we need before this patchset merges.\n\u003e What about:\n\u003e Property is in the range [A-Za-z0-9]\n\u003e Property is less than 40 characters long.\n\nThis can be implemented in this patch. But this seems to me OpenBMC specific, not in the Redfish spec. Any other requirements besides this? Do you want to limit the number of properties being selected?\n\n\u003e Unfortunately in open source, people pull and deploy continuously, so if we check in bugs, we get CVEs;  As written, this feature isn\u0027t behind the option flag, if you want to do it incrementally, put it behind the option flag, and it can probably go in.\n\nThis is behind insecure-query-params, right?\n\n\u003e Are we sure we have the recursive bits correct?\n\nCould you please point out which part are wrong so I can fix them?\n\nI am okay with fixing concerns without massive change ðŸ˜Š. But it is difficult if we go with A then several weeks later we drop A completely and say we need to do B.",
      "parentUuid": "28498b3c_9cdce5e9",
      "range": {
        "startLine": 645,
        "startChar": 0,
        "endLine": 645,
        "endChar": 69
      },
      "revId": "a97976c06207fd39134f975f6b6c0687a4f79b90",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "12a46f62_5df9ccd1",
        "filename": "redfish-core/include/utils/query_param.hpp",
        "patchSetId": 5
      },
      "lineNbr": 645,
      "author": {
        "id": 1000682
      },
      "writtenOn": "2022-07-27T17:19:27Z",
      "side": 1,
      "message": "I have implemented \n\n```\nWhat about:\nProperty is in the range [A-Za-z0-9]\nProperty is less than 40 characters long.\n```\n\nHowever, some properties might contain @, ., #, and /. I added these chars as well. 40 is not enough for some nested properties. I loose the limit to 60.",
      "parentUuid": "e4735474_8736e1f2",
      "range": {
        "startLine": 645,
        "startChar": 0,
        "endLine": 645,
        "endChar": 69
      },
      "revId": "a97976c06207fd39134f975f6b6c0687a4f79b90",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4cb1dfff_e5fb80e3",
        "filename": "redfish-core/include/utils/query_param.hpp",
        "patchSetId": 5
      },
      "lineNbr": 645,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-07-28T01:06:55Z",
      "side": 1,
      "message": "\u003e \u003e The other system vendors (non openbmc)\n\u003e \n\u003e I did check all systems in interop lab. What else do you want me to do?\n\u003e \n\u003e \u003e That seems problematic too for backward compatibility, if a parameter gets added later.\n\u003e \n\u003e Are you saying returning 400 by checking if a property is in the final JSON is problematic if a new attribute is added? Why is that? Could you elaborate?\n\u003e \n\u003e \u003e I\u0027m ok with not comparing against a fixed list, but SOME kind of validation is required  to meet the security principals we require.  https://cheatsheetseries.owasp.org/cheatsheets/Input_Validation_Cheat_Sheet.html#implementing-input-validation\n\u003e \u003e Sure if you want to break it up into another patch, that\u0027s fine, but I\u0027d like to have some understanding of what we need before this patchset merges.\n\u003e \u003e What about:\n\u003e \u003e Property is in the range [A-Za-z0-9]\n\u003e \u003e Property is less than 40 characters long.\n\u003e \n\u003e This can be implemented in this patch. But this seems to me OpenBMC specific, not in the Redfish spec.\n\nThe naming is the redfish specification naming pattern.  the 40 is intended to be longer than Redfish would ever put in a Property.\n\n\u003e Any other requirements besides this? Do you want to limit the number of properties being selected?\n\nThat\u0027s probably a good idea too.  Maybe a limit of 50?\n\n\u003e \n\u003e \u003e Unfortunately in open source, people pull and deploy continuously, so if we check in bugs, we get CVEs;  As written, this feature isn\u0027t behind the option flag, if you want to do it incrementally, put it behind the option flag, and it can probably go in.\n\u003e \n\u003e This is behind insecure-query-params, right?\n \nAs written, I didn\u0027t think it was, but I can look more tomorrow.\n\n\u003e \n\u003e \u003e Are we sure we have the recursive bits correct?\n\u003e \n\u003e Could you please point out which part are wrong so I can fix them?\n\nI\u0027m asking the question, because I don\u0027t know the answer.  When we select things like Foo/Bar, we need to only recurse into the Complex objects, not the resources, the resources would reset to the start.  That seems subtle, which is why I\u0027m asking how confident you are that it\u0027s right.  if you\u0027re confident, then that\u0027s fine.\n\n\u003e \n\u003e I am okay with fixing concerns without massive change ðŸ˜Š. But it is difficult if we go with A then several weeks later we drop A completely and say we need to do B.\n\nChange happens in the project.  Either the options are:\n1. We leave things in review until we\u0027re CERTAIN they\u0027re correct, well tested, and bug free, then once it\u0027s merged they don\u0027t have to change.\n2. We merge things that look correct, and adapt to change where needed.\n\nFWIW, I generally try to go for #2.",
      "parentUuid": "e4735474_8736e1f2",
      "range": {
        "startLine": 645,
        "startChar": 0,
        "endLine": 645,
        "endChar": 69
      },
      "revId": "a97976c06207fd39134f975f6b6c0687a4f79b90",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "04bed7bb_02982840",
        "filename": "redfish-core/include/utils/query_param.hpp",
        "patchSetId": 5
      },
      "lineNbr": 645,
      "author": {
        "id": 1000682
      },
      "writtenOn": "2022-07-28T01:34:56Z",
      "side": 1,
      "message": "\u003e When we select things like Foo/Bar, we need to only recurse into the Complex objects, not the resources, the resources would reset to the start. \n\nI don\u0027t understand this comment. I agree the recursive part is subtle but we are programming on a tree, and recursion algorithm is intuitive on tree, right? We used recursion on expand before already. I have tried to write unit test to cover all cases. If you find a gap in the test case, I can add.\n\n\u003e 2. We merge things that look correct, and adapt to change where needed.\n\nGiven that some of the issues are really ambiguous and we don\u0027t know the answer (neither does DMTF). I prefer going for #2.",
      "parentUuid": "4cb1dfff_e5fb80e3",
      "range": {
        "startLine": 645,
        "startChar": 0,
        "endLine": 645,
        "endChar": 69
      },
      "revId": "a97976c06207fd39134f975f6b6c0687a4f79b90",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "739a9244_eee242b1",
        "filename": "redfish-core/include/utils/query_param.hpp",
        "patchSetId": 5
      },
      "lineNbr": 645,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-07-29T01:55:14Z",
      "side": 1,
      "message": "\u003e  I agree the recursive part is subtle but we are programming on a tree, and recursion algorithm is intuitive on tree, right?\n\nNope, there are two types of Redfish structures in an object, a ComplexType, and a Resource.  As written this recurses into both, which I don\u0027t believe it should.\n\n\n\u003e Given that some of the issues are really ambiguous and we don\u0027t know the answer (neither does DMTF). I prefer going for #2.\n\nSure, but I don\u0027t believe the complex type versus property is ambiguous at this point.  Has there been any more discussion on the issue trackers?\n\nArguably this is a good reason to wait for a response from DMTF about how this should behave.",
      "parentUuid": "04bed7bb_02982840",
      "range": {
        "startLine": 645,
        "startChar": 0,
        "endLine": 645,
        "endChar": 69
      },
      "revId": "a97976c06207fd39134f975f6b6c0687a4f79b90",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c21bcecc_9ee4aa9a",
        "filename": "redfish-core/include/utils/query_param.hpp",
        "patchSetId": 5
      },
      "lineNbr": 645,
      "author": {
        "id": 1000682
      },
      "writtenOn": "2022-07-29T02:29:08Z",
      "side": 1,
      "message": "\u003e Nope, there are two types of Redfish structures in an object, a ComplexType, and a Resource.  As written this recurses into both, which I don\u0027t believe it should.\n\nWhy does this matter from an implementation point of view? The spec clearly said \"The syntax for properties in objects or properties in arrays of objects shall be the object and property names concatenated with a slash (/).\". Why shouldn\u0027t it recurse into both Resource and ComplexType? Which one should it recurse? And, by Resource you mean an \"URI-addressable Redfish data structure\"? Why is it involved? We don\u0027t have expand here.\n\n\u003e Arguably this is a good reason to wait for a response from DMTF about how this should behave.\n\nThe ticket I create is not about complextype. It is about annotation properties. https://github.com/DMTF/Redfish/issues/5175\n\nThe latest feedback is that we are doing the correct thing here: \"error\" will always exist regardless of $select. Other annotation properties aren\u0027t a must.",
      "parentUuid": "739a9244_eee242b1",
      "range": {
        "startLine": 645,
        "startChar": 0,
        "endLine": 645,
        "endChar": 69
      },
      "revId": "a97976c06207fd39134f975f6b6c0687a4f79b90",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "3243b42c_59376262",
        "filename": "redfish-core/include/utils/query_param.hpp",
        "patchSetId": 5
      },
      "lineNbr": 645,
      "author": {
        "id": 1000682
      },
      "writtenOn": "2022-07-29T21:59:01Z",
      "side": 1,
      "message": "I believe this thread can be closed. Outstanding concerns are moved to other threads.",
      "parentUuid": "c21bcecc_9ee4aa9a",
      "range": {
        "startLine": 645,
        "startChar": 0,
        "endLine": 645,
        "endChar": 69
      },
      "revId": "a97976c06207fd39134f975f6b6c0687a4f79b90",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "922c099c_15520871",
        "filename": "redfish-core/include/utils/query_param.hpp",
        "patchSetId": 5
      },
      "lineNbr": 645,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-08-01T14:32:07Z",
      "side": 1,
      "message": "\u003eWhy does this matter from an implementation point of view? The spec clearly said \"The syntax for properties in objects or properties in arrays of objects shall be the object and property names concatenated with a slash (/).\" Why shouldn\u0027t it recurse into both Resource and ComplexType\n\nBecause in complex objects, the elements aren\u0027t \"Properties\".  So the above statement doesn\u0027t apply.",
      "parentUuid": "3243b42c_59376262",
      "range": {
        "startLine": 645,
        "startChar": 0,
        "endLine": 645,
        "endChar": 69
      },
      "revId": "a97976c06207fd39134f975f6b6c0687a4f79b90",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f19c0fa6_dfce885f",
        "filename": "redfish-core/include/utils/query_param.hpp",
        "patchSetId": 5
      },
      "lineNbr": 670,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-06-10T20:41:47Z",
      "side": 1,
      "message": "in theory a select with nothing in it is invalid right?  We probably don\u0027t need an optimization for this case, I would expect it to return a query error earlier.",
      "range": {
        "startLine": 667,
        "startChar": 0,
        "endLine": 670,
        "endChar": 5
      },
      "revId": "a97976c06207fd39134f975f6b6c0687a4f79b90",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "445e11e4_15eebb11",
        "filename": "redfish-core/include/utils/query_param.hpp",
        "patchSetId": 5
      },
      "lineNbr": 670,
      "author": {
        "id": 1000682
      },
      "writtenOn": "2022-06-10T21:59:30Z",
      "side": 1,
      "message": "I believe what you mentioned here is a different thing. This branch handles that after $select, the result JSON becomes empty. And yeah, it can be just removed. \n\nAnd I can add a branch in the parsing part to error out when $select value is empty.",
      "parentUuid": "f19c0fa6_dfce885f",
      "range": {
        "startLine": 667,
        "startChar": 0,
        "endLine": 670,
        "endChar": 5
      },
      "revId": "a97976c06207fd39134f975f6b6c0687a4f79b90",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "16ead850_f914f698",
        "filename": "redfish-core/include/utils/query_param.hpp",
        "patchSetId": 5
      },
      "lineNbr": 670,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-06-10T22:10:54Z",
      "side": 1,
      "message": "I think you\u0027ve seen my concern.  I\u0027m going to resolve, and we\u0027ll reopen this if it\u0027s still an issue.",
      "parentUuid": "445e11e4_15eebb11",
      "range": {
        "startLine": 667,
        "startChar": 0,
        "endLine": 670,
        "endChar": 5
      },
      "revId": "a97976c06207fd39134f975f6b6c0687a4f79b90",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f3116985_78f03220",
        "filename": "redfish-core/include/utils/query_param.hpp",
        "patchSetId": 5
      },
      "lineNbr": 671,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-06-10T20:41:47Z",
      "side": 1,
      "message": "In terms of algorithms, this is making a complete copy of the data set, and several copies of each key in the dataset.  In general in bmcweb, we try to avoid complete replacement of the json object, as it has lead to subtle bugs in the past with async operations.\n\ncould we just, as part of recursiveSelect, do something like\n\n\nrecursiveSelect(json, selectList){\n\n    auto key \u003d json.begin();\n    while(key !\u003d json.end()){\n       if (key.first in selectLIst){\n          recursiveSelect(key.second, selectList);\n          continue;\n          key++;\n       }\n       \n       key \u003d json.erase(key);\n    }\n}\n\nI think this also greatly simplifies the \"parentSelected\" behavior.",
      "range": {
        "startLine": 671,
        "startChar": 0,
        "endLine": 671,
        "endChar": 29
      },
      "revId": "a97976c06207fd39134f975f6b6c0687a4f79b90",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a1319eac_8e21edfe",
        "filename": "redfish-core/include/utils/query_param.hpp",
        "patchSetId": 5
      },
      "lineNbr": 671,
      "author": {
        "id": 1000682
      },
      "writtenOn": "2022-06-10T21:59:30Z",
      "side": 1,
      "message": "This doesn\u0027t work when selected properties are nested keys, for example, \"Parameters/AllowableValues\". We still need to do recursion and traverse to the leaves.\n\n\u003e this is making a complete copy of the data set, and several copies of each key in the dataset\n\nOnly $selected keys are copied. And only $selected values are copied.\n\nLet me think whether erase while doing recursion is possible",
      "parentUuid": "f3116985_78f03220",
      "range": {
        "startLine": 671,
        "startChar": 0,
        "endLine": 671,
        "endChar": 29
      },
      "revId": "a97976c06207fd39134f975f6b6c0687a4f79b90",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3d7a21cf_8d36fab0",
        "filename": "redfish-core/include/utils/query_param.hpp",
        "patchSetId": 5
      },
      "lineNbr": 671,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-06-10T22:10:54Z",
      "side": 1,
      "message": "\u003e This doesn\u0027t work when selected properties are nested keys, for example, \"Parameters/AllowableValues\". We still need to do recursion and traverse to the leaves.\n\nI\u0027m not following why this doesn\u0027t work.  Sure, I didn\u0027t handle the split on the key to do that matching and construct the new allowlist.  That would look nearly identical to the code in readJson, so it seems like it should be doable.\n\n\u003e \n\u003e \u003e this is making a complete copy of the data set, and several copies of each key in the dataset\n\u003e \n\u003e Only $selected keys are copied. And only $selected values are copied.\n\nYep, but they\u0027re still copied and reconstructed.\n\n\u003e \n\u003e Let me think whether erase while doing recursion is possible\n\nCool.  Let me know if you need help.",
      "parentUuid": "a1319eac_8e21edfe",
      "range": {
        "startLine": 671,
        "startChar": 0,
        "endLine": 671,
        "endChar": 29
      },
      "revId": "a97976c06207fd39134f975f6b6c0687a4f79b90",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "740e23e8_fe7acc94",
        "filename": "redfish-core/include/utils/query_param.hpp",
        "patchSetId": 5
      },
      "lineNbr": 671,
      "author": {
        "id": 1000682
      },
      "writtenOn": "2022-06-10T23:41:21Z",
      "side": 1,
      "message": "Please take a look at what I have now",
      "parentUuid": "3d7a21cf_8d36fab0",
      "range": {
        "startLine": 671,
        "startChar": 0,
        "endLine": 671,
        "endChar": 29
      },
      "revId": "a97976c06207fd39134f975f6b6c0687a4f79b90",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d58e68d9_17f55409",
        "filename": "redfish-core/include/utils/query_param.hpp",
        "patchSetId": 5
      },
      "lineNbr": 730,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-06-10T20:41:47Z",
      "side": 1,
      "message": "We should be using a redfish message for this.",
      "range": {
        "startLine": 729,
        "startChar": 12,
        "endLine": 730,
        "endChar": 61
      },
      "revId": "a97976c06207fd39134f975f6b6c0687a4f79b90",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c02c095d_c303a5b5",
        "filename": "redfish-core/include/utils/query_param.hpp",
        "patchSetId": 5
      },
      "lineNbr": 730,
      "author": {
        "id": 1000682
      },
      "writtenOn": "2022-06-10T21:59:30Z",
      "side": 1,
      "message": "Right, that\u0027s what I wanted to do until I didn\u0027t find a not implemented message in https://github.com/openbmc/bmcweb/blob/24861a286eb148fcec22afecffb73b596752700f/redfish-core/include/error_messages.hpp",
      "parentUuid": "d58e68d9_17f55409",
      "range": {
        "startLine": 729,
        "startChar": 12,
        "endLine": 730,
        "endChar": 61
      },
      "revId": "a97976c06207fd39134f975f6b6c0687a4f79b90",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ce6dec89_49622a01",
        "filename": "redfish-core/include/utils/query_param.hpp",
        "patchSetId": 5
      },
      "lineNbr": 730,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-06-10T22:10:54Z",
      "side": 1,
      "message": "that file is losely based on the Base registry, which is defined by DMTF.  FWIW, I think this shouldn\u0027t use not_implemented, it should do queryParameterValueFormatError, given that it\u0027s a combination of query params that\u0027s not available (and isn\u0027t really defined by the standard yet).",
      "parentUuid": "c02c095d_c303a5b5",
      "range": {
        "startLine": 729,
        "startChar": 12,
        "endLine": 730,
        "endChar": 61
      },
      "revId": "a97976c06207fd39134f975f6b6c0687a4f79b90",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "4b9db72f_522c7b89",
        "filename": "redfish-core/include/utils/query_param.hpp",
        "patchSetId": 5
      },
      "lineNbr": 730,
      "author": {
        "id": 1000682
      },
      "writtenOn": "2022-06-10T23:41:21Z",
      "side": 1,
      "message": "I changed to queryParameterValueFormatError and moved them into the parse function.",
      "parentUuid": "ce6dec89_49622a01",
      "range": {
        "startLine": 729,
        "startChar": 12,
        "endLine": 730,
        "endChar": 61
      },
      "revId": "a97976c06207fd39134f975f6b6c0687a4f79b90",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    }
  ]
}