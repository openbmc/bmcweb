{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "0df64beb_601ce5d8",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 19,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2023-12-12T22:35:08Z",
      "side": 1,
      "message": "The automated tooling checks for this header on logout:\n\nhttps://owasp.org/www-project-secure-headers/ci/headers_add.json\n\nI don\u0027t see where that\u0027s documented though.",
      "revId": "9e2bc6b2c7fc1caf40cf77ba01055c1f8756becd",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "cd88031a_60a353a0",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 19,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2023-12-12T22:37:33Z",
      "side": 1,
      "message": "Nevermind found it.\n\nhttps://owasp.org/www-project-secure-headers/#clear-site-data",
      "parentUuid": "0df64beb_601ce5d8",
      "revId": "9e2bc6b2c7fc1caf40cf77ba01055c1f8756becd",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "eec5c235_d109d60c",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 23,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2023-12-12T22:30:38Z",
      "side": 1,
      "message": "This is kinda terrifying as a design (as is kinda proven by this bug being possible).  Is there any examples of doing this kind of design anywhere else?",
      "range": {
        "startLine": 23,
        "startChar": 0,
        "endLine": 23,
        "endChar": 63
      },
      "revId": "9e2bc6b2c7fc1caf40cf77ba01055c1f8756becd",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "97614912_d8814c61",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 25,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2023-12-12T22:30:38Z",
      "side": 1,
      "message": "Wouldn\u0027t it be easier to just strip out that header in the proxy?  That means that BMC can stay at the highest level of security, and the proxy can decide on its own user security policy?\n\nPresumably you guys already had to strip out or rewrite the XSS headers to make this work at all?",
      "revId": "9e2bc6b2c7fc1caf40cf77ba01055c1f8756becd",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2f00eb5e_7ddc9357",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 25,
      "author": {
        "id": 1000020
      },
      "writtenOn": "2023-12-18T21:43:50Z",
      "side": 1,
      "message": "\u003e Presumably you guys already had to strip out or rewrite the XSS headers to make this work at all?\n\nI asked our team this and they said:\n\".. we do not touch any headers for OpenBMC Systems. We are using tomcat connectr which will do the redirection as a Proxy.\"",
      "parentUuid": "97614912_d8814c61",
      "revId": "9e2bc6b2c7fc1caf40cf77ba01055c1f8756becd",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "33c804e3_a8a33c23",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 25,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2023-12-18T21:47:31Z",
      "side": 1,
      "message": "Right, and in the tomcat connector, they MUST be rewriting things like the Location header, otherwise cross site scripting (which is essentially what the proxy is doing) checks would kick in.... or I\u0027m missing something.",
      "parentUuid": "2f00eb5e_7ddc9357",
      "revId": "9e2bc6b2c7fc1caf40cf77ba01055c1f8756becd",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3295a58b_be6ca9a4",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 25,
      "author": {
        "id": 1000021
      },
      "writtenOn": "2024-10-17T07:42:10Z",
      "side": 1,
      "message": "reading a bit of tomcat configuration it appears that there are at least two ways of configuring a proxy and one references a header rewrite module although it seems to be imiplementing a \"shared API\" with some windows ecosystem.\n\nhttps://tomcat.apache.org/tomcat-9.0-doc/proxy-howto.html#Apache_httpd_Proxy_Support\nhttps://tomcat.apache.org/connectors-doc/common_howto/proxy.html\n  specifically mod_rewrite and mod_headers\n  \nHence it\u0027s vague what is actually configured in the proxy and the effort to enable an alternative to this feature.  Not that I expect reviewers to discover limitations of code written in java.",
      "parentUuid": "33c804e3_a8a33c23",
      "revId": "9e2bc6b2c7fc1caf40cf77ba01055c1f8756becd",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "625c7054_cecf500b",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 34,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2023-12-12T22:36:08Z",
      "side": 1,
      "message": "Lets get the OWASP Venom test suite re-run (which this will likely fail).",
      "revId": "9e2bc6b2c7fc1caf40cf77ba01055c1f8756becd",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5a3c5b9d_5391c2f3",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 34,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2023-12-14T20:11:05Z",
      "side": 1,
      "message": "To be clear, I might be ok with us not passing the Venom suite (we didn\u0027t before that patch), but lets make that decision explicitly and consciously.",
      "parentUuid": "625c7054_cecf500b",
      "revId": "9e2bc6b2c7fc1caf40cf77ba01055c1f8756becd",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4636d3a3_569b294a",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2024-02-22T22:17:41Z",
      "side": 1,
      "message": "Been a few months.  What do we want to do here?",
      "revId": "9e2bc6b2c7fc1caf40cf77ba01055c1f8756becd",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "52f9a86f_95359bcf",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000235
      },
      "writtenOn": "2024-02-23T18:18:33Z",
      "side": 1,
      "message": "I almost want to propose a new meson (build-time) option to control this ~ https://github.com/openbmc/bmcweb/blob/master/meson_options.txt\n\noption(\n    \u0027clear-site-data-on-logout\u0027,\n    type: \u0027feature\u0027,\n    value: \u0027enabled\u0027,\n    description: \u0027\u0027\u0027Use the Clear-Site-Data header on the logout response. Enable\n                    for better security. Disable to allow complex scenarios of\n                    concurrent sessions to share storage.\u0027\u0027\u0027\n)",
      "parentUuid": "4636d3a3_569b294a",
      "revId": "9e2bc6b2c7fc1caf40cf77ba01055c1f8756becd",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "4be4a81b_001e11c3",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000235
      },
      "writtenOn": "2024-02-23T18:18:33Z",
      "side": 1,
      "message": "A new bmcweb meson feature?",
      "revId": "9e2bc6b2c7fc1caf40cf77ba01055c1f8756becd",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5ec828a0_7fa175f0",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2024-02-29T20:39:35Z",
      "side": 1,
      "message": "Before we talk about that, can we get clarity on why folks would disable the option?  I think it\u0027s one of the below:\n\n1. We believe that the original author (me) read the OWASP guidelines wrong and this header isn\u0027t required in their requirements.  (to be clear, I\u0027m open to this if someone has docs that I haven\u0027t read).  If this is true, the option isn\u0027t needed at all.\n2. We believe that OWASP is wrong in this case, and we should override their opinion (ideally by discussing with them first).  Could we open a patch up to them removing https://github.com/oshp/oshp-validator/blob/c3befa0633839ff7fe3b83ca6566abe77595b8dd/tests_suite.yml#L84 and see what they say?\n3. We believe that OWASP isn\u0027t a relevant security authority, and we should replace it with something else.  If so, what is that authority?  I don\u0027t think anyone on this review can claim to be an authority on http browser security (definitely including myself).\n\n\nFrankly, just because it breaks a downstream use case doesn\u0027t mean that we should simply shut off security forever because of it.  Maybe we stage that option over the course of 6 months so the proxy you guys have can catch up?  I\u0027m open to that.\n\nIn nginx proxies, this would be trivially solved by putting:\n\nproxy_hide_header Clear-Site-Data\n\nIn the proxy config, then OpenBMC doesn\u0027t have to maintain tech debt for something downstream, for which (so far as I can tell) we\u0027ve followed best practices.  Has that been considered?",
      "parentUuid": "52f9a86f_95359bcf",
      "revId": "9e2bc6b2c7fc1caf40cf77ba01055c1f8756becd",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "376509f1_fc7790ec",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000021
      },
      "writtenOn": "2024-10-17T07:42:10Z",
      "side": 1,
      "message": "I read up a bit on tomcat only because I\u0027ve been thinking about 13.3.2.2 and architecting a path to a non-transparent proxy following the highest security option of creating a BFF  recommended in the OAUTH SPA draft (intended to be incorporated into OAUTH 2.1 per its draft).\n\nThis architecture will also considers adding webauthn and hence passkeys and u2f (fido2 and fido1) and separation of the proxy will likely be configurable.  It builds on my comments to the Redfish OAuth design 58313 and actual OAUTH may be optional.\n\n\nhttps://datatracker.ietf.org/doc/html/draft-ietf-oauth-browser-based-apps-18#name-backend-for-frontend-bff\n\nhttps://gerrit.openbmc.org/c/openbmc/docs/+/58313: docs: add a design doc for Redfish OAuth\n\nhttps://www.w3.org/TR/webauthn-2/",
      "revId": "9e2bc6b2c7fc1caf40cf77ba01055c1f8756becd",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d2688540_65c90e5d",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2024-10-17T16:45:47Z",
      "side": 1,
      "message": "I\u0027ve come to the conclusion that I don\u0027t care enough about passing venom and clearing headers has caused more bugs than expected.  Gunnar, if you get this patch rebased, I\u0027m ok for it to merge.",
      "revId": "9e2bc6b2c7fc1caf40cf77ba01055c1f8756becd",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    }
  ]
}