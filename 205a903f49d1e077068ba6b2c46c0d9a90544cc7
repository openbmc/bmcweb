{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "4e15b3d5_11b2bec5",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-05-24T14:46:11Z",
      "side": 1,
      "message": "I realize this is WIP, but figured I\u0027d give a couple pointers to lead you down the right path.",
      "revId": "205a903f49d1e077068ba6b2c46c0d9a90544cc7",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f1baf953_8a4b2ee9",
        "filename": "http/http_response.hpp",
        "patchSetId": 1
      },
      "lineNbr": 36,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-05-24T14:46:11Z",
      "side": 1,
      "message": "Response is meant to represent a generic, HTTP response.  Aggregation and collections are a property of Redfish, so that behavior needs to go in a Redfish layer somewhere.",
      "range": {
        "startLine": 32,
        "startChar": 0,
        "endLine": 36,
        "endChar": 0
      },
      "revId": "205a903f49d1e077068ba6b2c46c0d9a90544cc7",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4b4faba8_2b36c2ef",
        "filename": "http/http_response.hpp",
        "patchSetId": 1
      },
      "lineNbr": 36,
      "author": {
        "id": 1001303
      },
      "writtenOn": "2022-05-24T21:19:48Z",
      "side": 1,
      "message": "I need to be able to track this flag per each individual response.  If it can\u0027t go here then I think the only other option would be as a member variable of AsyncResp.\n\nIf I can\u0027t put a flag in AsyncResp then I think my next options are:\n1) Perform another satellite config D-Bus lookup at the end of the endpoints to decide if I need to attempt to fix any of the links.  \n2) Modify the response\u0027s completion handler so that it fixes the links before calling the original completion handler function.",
      "parentUuid": "f1baf953_8a4b2ee9",
      "range": {
        "startLine": 32,
        "startChar": 0,
        "endLine": 36,
        "endChar": 0
      },
      "revId": "205a903f49d1e077068ba6b2c46c0d9a90544cc7",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "206609d1_52dc18a4",
        "filename": "http/http_response.hpp",
        "patchSetId": 1
      },
      "lineNbr": 36,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-07-20T19:43:03Z",
      "side": 1,
      "message": "\u003e I need to be able to track this flag per each individual response.  If it can\u0027t go here then I think the only other option would be as a member variable of AsyncResp.\n\nThat has the same problem.  AsyncResp applies to non redfish responses.  Generally when we need to attach data, we attach it to the completion handler, which CAN be specific to a given protocol.\n\n\u003e \n\u003e If I can\u0027t put a flag in AsyncResp then I think my next options are:\n\u003e 1) Perform another satellite config D-Bus lookup at the end of the endpoints to decide if I need to attempt to fix any of the links.  \n\nCan\u0027t you just keep the satellite struct around?\n\n\u003e 2) Modify the response\u0027s completion handler so that it fixes the links before calling the original completion handler function.\n\n(in the voice of the Mandalorian) This is the way.",
      "parentUuid": "4b4faba8_2b36c2ef",
      "range": {
        "startLine": 32,
        "startChar": 0,
        "endLine": 36,
        "endChar": 0
      },
      "revId": "205a903f49d1e077068ba6b2c46c0d9a90544cc7",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8d186732_94080906",
        "filename": "redfish-core/include/redfish_aggregator.hpp",
        "patchSetId": 1
      },
      "lineNbr": 324,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-05-24T14:46:11Z",
      "side": 1,
      "message": "Couple things here:\n1. Don\u0027t use regex.  We have specialized functions for unpacking a uri that handle escaping properly (is boost::urls);  Please use them.\n2. This isn\u0027t a complete listing of every collection type in the system, and isn\u0027t a list that I\u0027m interested in maintaining over time.  This list either needs to be:\n1. Generated from schemas (preferred, but hard)\n2. Rely on some intrinsic, like the fact that the \"Members\" property exists and is an array, liked we do in other places.",
      "range": {
        "startLine": 321,
        "startChar": 0,
        "endLine": 324,
        "endChar": 91
      },
      "revId": "205a903f49d1e077068ba6b2c46c0d9a90544cc7",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c1793a31_081d8c7a",
        "filename": "redfish-core/include/redfish_aggregator.hpp",
        "patchSetId": 1
      },
      "lineNbr": 324,
      "author": {
        "id": 1001303
      },
      "writtenOn": "2022-05-24T21:19:48Z",
      "side": 1,
      "message": "\u003e This isn\u0027t a complete listing of every collection type in the system, and isn\u0027t a list that I\u0027m interested in maintaining over time. \nI was not trying to implement all collections, just a subset of the form \"/redfish/v1/\u003cCollectionName\u003e/\".  If I need to support each collection type then couldn\u0027t I assume that any \"/redfish/v1/\u003cstr\u003e/\u003cstr\u003e\" is an aggregated resource and then any \"/redfish/v1/\u003cstr\u003e\" is a collection?\n\n\u003e Rely on some intrinsic, like the fact that the \"Members\" property exists and is an array, liked we do in other places.\nThis might be tricky because a collection could exist on the satellite and not on the host. The \"Members\" property would exist, but none of the entries would belong to the aggregating BMC.  We would need to make sure that the code does not accidentally add \"main_\" to collection objects that are actually located on a satellite.",
      "parentUuid": "8d186732_94080906",
      "range": {
        "startLine": 321,
        "startChar": 0,
        "endLine": 324,
        "endChar": 91
      },
      "revId": "205a903f49d1e077068ba6b2c46c0d9a90544cc7",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0618c51c_641bbab3",
        "filename": "redfish-core/include/redfish_aggregator.hpp",
        "patchSetId": 1
      },
      "lineNbr": 324,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-07-20T19:43:03Z",
      "side": 1,
      "message": "I think we talked through the above on chat, but if you still need an answer to this, let me know.",
      "parentUuid": "c1793a31_081d8c7a",
      "range": {
        "startLine": 321,
        "startChar": 0,
        "endLine": 324,
        "endChar": 91
      },
      "revId": "205a903f49d1e077068ba6b2c46c0d9a90544cc7",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "53117f1a_4240f90a",
        "filename": "redfish-core/lib/managers.hpp",
        "patchSetId": 1
      },
      "lineNbr": 2348,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-05-24T14:46:11Z",
      "side": 1,
      "message": "Changing this URI is going to break a lot of stuff.  Technically it\u0027s allowed in the spec, but people hardcoding this over time have lead to a mediocre situation.  Could we just prefix the aggregated resources with an ID that denotes them as aggregated, and leave the existing routes alone?  I suspect that will get this patch merged faster.",
      "range": {
        "startLine": 2348,
        "startChar": 0,
        "endLine": 2348,
        "endChar": 71
      },
      "revId": "205a903f49d1e077068ba6b2c46c0d9a90544cc7",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "12e216e3_0c06173a",
        "filename": "redfish-core/lib/managers.hpp",
        "patchSetId": 1
      },
      "lineNbr": 2348,
      "author": {
        "id": 1001303
      },
      "writtenOn": "2022-05-24T21:19:48Z",
      "side": 1,
      "message": "The original intention was that the routing code would remove the prefix before it ever gets passed to the handler.  That would have left the existing routes intact.  Unfortunately, there is not currently an appropriate location to hook the handler.\n\nThis is now moot following Discord discussion beginning here: https://discord.com/channels/775381525260664832/855566794994221117/978720524140183622.  The plan is to forgo using \"main_\" to denote local IDs for the time being.",
      "parentUuid": "53117f1a_4240f90a",
      "range": {
        "startLine": 2348,
        "startChar": 0,
        "endLine": 2348,
        "endChar": 71
      },
      "revId": "205a903f49d1e077068ba6b2c46c0d9a90544cc7",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    }
  ]
}