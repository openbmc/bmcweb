{
  "comments": [
    {
      "key": {
        "uuid": "693457fa_b02b72d4",
        "filename": "/COMMIT_MSG",
        "patchSetId": 5
      },
      "lineNbr": 28,
      "author": {
        "id": 1000235
      },
      "writtenOn": "2020-08-12T20:26:21Z",
      "side": 1,
      "message": "s/possibily/possibility/",
      "range": {
        "startLine": 28,
        "startChar": 44,
        "endLine": 28,
        "endChar": 53
      },
      "revId": "e8d17817b15a915069cd8341a36d1aab993795b3",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3adbd1eb_84284788",
        "filename": "/COMMIT_MSG",
        "patchSetId": 5
      },
      "lineNbr": 28,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2020-08-12T20:55:30Z",
      "side": 1,
      "message": "Will fix.",
      "parentUuid": "693457fa_b02b72d4",
      "range": {
        "startLine": 28,
        "startChar": 44,
        "endLine": 28,
        "endChar": 53
      },
      "revId": "e8d17817b15a915069cd8341a36d1aab993795b3",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6b2e85d7_3bc2ae2c",
        "filename": "/COMMIT_MSG",
        "patchSetId": 5
      },
      "lineNbr": 64,
      "author": {
        "id": 1000020
      },
      "writtenOn": "2020-08-12T19:44:45Z",
      "side": 1,
      "message": "It moves the login screen to bmcweb.. \nIt makes it tougher to support different GUIs, e.g. phosphor-webui\u0027s login screen is different than webui-vue \n\nUpdates to theming need to happen in 2 repos now. \n\nThought on how we support things like password change needed?\nhttps://gerrit.openbmc-project.xyz/c/openbmc/bmcweb/+/29136\nhttps://gerrit.openbmc-project.xyz/c/openbmc/webui-vue/+/33955",
      "revId": "e8d17817b15a915069cd8341a36d1aab993795b3",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "904073c6_efb60dab",
        "filename": "/COMMIT_MSG",
        "patchSetId": 5
      },
      "lineNbr": 64,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2020-08-12T20:55:30Z",
      "side": 1,
      "message": "\"Updates to themeing need to happen in 2 repos now. \"\n\nTechnically this was already a problem, it\u0027s just that nobody cared to theme the redfish UI, given it\u0027s really engineering facing.  This just makes the problem more noticeable.\n\n\"It makes it tougher to support different GUIs, e.g. phosphor-webui\u0027s login screen is different than webui-vue \"\n\nMaintaining 2 webuis can\u0027t be the long term project direction, and realistically we can\u0027t be holding people to validating 2 separate webuis for every change made to the backend.  What\u0027s your plan for merging webui-vue with phosphor-webui?   Don\u0027t get me wrong, I fired up webui-vue a few weeks back, and I really like the direction you\u0027ve taken it in.  It\u0027s way cleaner (even if it is a litter bigger binary-size wise:) ) we just need to figure out a way to make it maintainable in that phosphor-webui and bmcweb had a lot of specific handshaking to make a lot of flows \"just work\".  I see a lot of that got copied into webui-vue, which is good, but patches moving forward can\u0027t have to consider 2 different UIs in all cases.\n\nMy kneejerk reaction was to put this behind a BMCWEB_INSECURE flag, so the webui-vue users can continue to use it in the less secure mode, until webui-vue makes the equivalent changes (note, webui-vue looks like is already doesn\u0027t handle mtls auth, so most these changes need made before a full cutover anyway).  With that said, I\u0027m open your your thoughts on it.  Should this wait until you and your team have come to full feature parity with phosphor-webui to not break anyone, or are we better off forcing a config option on users?  Given the hard fork, and the webuis required reliance on non-spec driven apis, I\u0027m sort of not sure what to do here.\n\n\"Thought on how we support things like password change needed?\nhttps://gerrit.openbmc-project.xyz/c/openbmc/bmcweb/+/29136\nhttps://gerrit.openbmc-project.xyz/c/openbmc/webui-vue/+/33955\"\n\nIn the same way we transfer the \"you\u0027re already logged in\" info to phosphor-webui, you can transfer the \"you need to change your password\" info for the ui to react to.  I\u0027d probably do it as a 301 to an appropriate \"Change your password\" route.  I can take a look at specific patches when I handle the first TODO below.",
      "parentUuid": "6b2e85d7_3bc2ae2c",
      "revId": "e8d17817b15a915069cd8341a36d1aab993795b3",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "91cd3eaa_b150e03e",
        "filename": "include/authorization.hpp",
        "patchSetId": 5
      },
      "lineNbr": 212,
      "author": {
        "id": 1000235
      },
      "writtenOn": "2020-08-12T20:26:21Z",
      "side": 1,
      "message": "Correct.  But I am not sure which routes should be white listed here. Excerpt from Redfish spec DSP0266 1.9.1 section 7.2.3 (\"OData service and metadata document requests\"):\n\u003e Service shall not require authentication to retrieve the OData metadata document or the OData service document.\n\nAnd see also section 8.4 (\"OData metadata responses\").\n\nI don\u0027t fully understand this.  Should BMCWeb allow unauthenticated GET for the following two documents?:\n- /redfish/v1/$metadata\n- /redfish/v1/odata",
      "revId": "e8d17817b15a915069cd8341a36d1aab993795b3",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "afacbaf9_d75785b1",
        "filename": "include/authorization.hpp",
        "patchSetId": 5
      },
      "lineNbr": 212,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2020-08-12T20:55:30Z",
      "side": 1,
      "message": "Yes it should.  I missed $metadata.  Good catch (although it was in my todos in the commit message) :)",
      "parentUuid": "91cd3eaa_b150e03e",
      "revId": "e8d17817b15a915069cd8341a36d1aab993795b3",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "42176760_324f2f36",
        "filename": "include/authorization.hpp",
        "patchSetId": 5
      },
      "lineNbr": 216,
      "author": {
        "id": 1000235
      },
      "writtenOn": "2020-08-12T20:26:21Z",
      "side": 1,
      "message": "See my comment above.  This allows unauthenticated GETs for resources *under* the odata service root.  Is that needed?  Is that what the spec says?",
      "revId": "e8d17817b15a915069cd8341a36d1aab993795b3",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ba838570_e4452250",
        "filename": "include/authorization.hpp",
        "patchSetId": 5
      },
      "lineNbr": 216,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2020-08-12T20:55:30Z",
      "side": 1,
      "message": "I believe the answer to that is yes.  At the very least it matches the old behavior in this regard.  If we want to change the behavior here, I\u0027m open to it, but that feels like a different patch.  The intent is to keep the old behavior for redfish resources.",
      "parentUuid": "42176760_324f2f36",
      "revId": "e8d17817b15a915069cd8341a36d1aab993795b3",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f54f3014_775b0f70",
        "filename": "include/authorization.hpp",
        "patchSetId": 5
      },
      "lineNbr": 216,
      "author": {
        "id": 1000235
      },
      "writtenOn": "2020-08-13T02:24:57Z",
      "side": 1,
      "message": "I see it now... from the old webroutes.hpp.  I\u0027ll accept that.",
      "parentUuid": "ba838570_e4452250",
      "revId": "e8d17817b15a915069cd8341a36d1aab993795b3",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b4a144a0_42540084",
        "filename": "include/authorization.hpp",
        "patchSetId": 5
      },
      "lineNbr": 241,
      "author": {
        "id": 1000235
      },
      "writtenOn": "2020-08-12T20:26:21Z",
      "side": 1,
      "message": "Bypassing authentication because route is on whitelist.",
      "range": {
        "startLine": 241,
        "startChar": 45,
        "endLine": 241,
        "endChar": 76
      },
      "revId": "e8d17817b15a915069cd8341a36d1aab993795b3",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0170f867_f49f91e9",
        "filename": "include/authorization.hpp",
        "patchSetId": 5
      },
      "lineNbr": 241,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2020-08-12T20:55:30Z",
      "side": 1,
      "message": "You don\u0027t want to print the req.target() in the log?  That seems useful.  I can rephrase, but I really dislike the word \"bypassing\", as it implies that it\u0027s a backdoor.",
      "parentUuid": "b4a144a0_42540084",
      "range": {
        "startLine": 241,
        "startChar": 45,
        "endLine": 241,
        "endChar": 76
      },
      "revId": "e8d17817b15a915069cd8341a36d1aab993795b3",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "88c869fc_4046b39f",
        "filename": "include/authorization.hpp",
        "patchSetId": 5
      },
      "lineNbr": 241,
      "author": {
        "id": 1000235
      },
      "writtenOn": "2020-08-13T02:24:57Z",
      "side": 1,
      "message": "Sorry, this was a nit.  How about: Ignoring authentication because route is on whitelist.",
      "parentUuid": "0170f867_f49f91e9",
      "range": {
        "startLine": 241,
        "startChar": 45,
        "endLine": 241,
        "endChar": 76
      },
      "revId": "e8d17817b15a915069cd8341a36d1aab993795b3",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "eddff58e_d40c7d72",
        "filename": "include/authorization.hpp",
        "patchSetId": 5
      },
      "lineNbr": 241,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2020-08-14T21:15:22Z",
      "side": 1,
      "message": "works for me.  I might slightly amend to:\n\n\"Ignoring authentication because \u003curl\u003e is on the whitelist.\"",
      "parentUuid": "88c869fc_4046b39f",
      "range": {
        "startLine": 241,
        "startChar": 45,
        "endLine": 241,
        "endChar": 76
      },
      "revId": "e8d17817b15a915069cd8341a36d1aab993795b3",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a6bf4c22_8ab2528d",
        "filename": "include/authorization.hpp",
        "patchSetId": 5
      },
      "lineNbr": 291,
      "author": {
        "id": 1000235
      },
      "writtenOn": "2020-08-12T20:26:21Z",
      "side": 1,
      "message": "Does this introduce a nit incompatibility?  For browsers that have saved the BMC URL (\"/#/login\") in their history, and subsequently connect to the BMC after it is updated with this new code, what is the browser\u0027s behavior?\nNote: I am not requesting a code change, just want to understand the situation.",
      "revId": "e8d17817b15a915069cd8341a36d1aab993795b3",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7fe2ce06_155bd491",
        "filename": "include/authorization.hpp",
        "patchSetId": 5
      },
      "lineNbr": 291,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2020-08-12T20:55:30Z",
      "side": 1,
      "message": "\"Does this introduce a nit incompatibility?\"\n\nNot to my knowledge.  If you save the url \"/#/login\" in your browser, the backend would see:\nGET /#/login -\u003e 301 redirect to /login\nPOST /login with credentials -\u003e 301 redirect to /#/login\nGET / -\u003e 200 returns angular SPA\nAngular launches the #/login route, sees \"IsAuthenticated\" in cookie, route redirect to /#/overview, as \"next\" is invalid.\n\nSo far as I\u0027m aware, the user is none the wiser.",
      "parentUuid": "a6bf4c22_8ab2528d",
      "revId": "e8d17817b15a915069cd8341a36d1aab993795b3",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "30cd7773_8cef6192",
        "filename": "include/authorization.hpp",
        "patchSetId": 5
      },
      "lineNbr": 291,
      "author": {
        "id": 1000235
      },
      "writtenOn": "2020-08-13T02:24:57Z",
      "side": 1,
      "message": "Got it.  Thanks for explaining.",
      "parentUuid": "7fe2ce06_155bd491",
      "revId": "e8d17817b15a915069cd8341a36d1aab993795b3",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "143ee250_c504f29e",
        "filename": "include/login_routes.hpp",
        "patchSetId": 5
      },
      "lineNbr": 210,
      "author": {
        "id": 1000235
      },
      "writtenOn": "2020-08-12T20:26:21Z",
      "side": 1,
      "message": "s/two/multiple/",
      "range": {
        "startLine": 210,
        "startChar": 37,
        "endLine": 210,
        "endChar": 40
      },
      "revId": "e8d17817b15a915069cd8341a36d1aab993795b3",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9d3e0212_c90aaad6",
        "filename": "include/login_routes.hpp",
        "patchSetId": 5
      },
      "lineNbr": 210,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2020-08-12T20:55:30Z",
      "side": 1,
      "message": "Will fix.",
      "parentUuid": "143ee250_c504f29e",
      "range": {
        "startLine": 210,
        "startChar": 37,
        "endLine": 210,
        "endChar": 40
      },
      "revId": "e8d17817b15a915069cd8341a36d1aab993795b3",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d91320a7_59015b3f",
        "filename": "static/login/index.html",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 1000020
      },
      "writtenOn": "2020-08-12T20:00:24Z",
      "side": 1,
      "message": "Why do these need to be in bmcweb though? \nWhy can\u0027t they still be in the GUI ?\n\nif bmcweb has \n\n    // it\u0027s allowed to GET root node without authentication\n    if (boost::beast::http::verb::get \u003d\u003d req.method())\n    {\n        if (req.url \u003d\u003d \"/redfish/v1\" || req.url \u003d\u003d \"/redfish/v1/\" ||\n            req.url \u003d\u003d \"/redfish\" || req.url \u003d\u003d \"/redfish/\" ||\n            req.url \u003d\u003d \"/login\" || req.url \u003d\u003d \"/login/login.css\" ||\n\t\n            req.url \u003d\u003d \"/login/logo.svg\" || req.url \u003d\u003d \"/favicon.ico\")\n\t\n        // TODO(ed) redfish static assets need allowed through, right?\n        {\n\nIf the GUI has the same file names?",
      "revId": "e8d17817b15a915069cd8341a36d1aab993795b3",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "48c912a0_c79e989a",
        "filename": "static/login/index.html",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2020-08-12T20:55:30Z",
      "side": 1,
      "message": "\"Why do these need to be in bmcweb though?\"\n\nSee the first comment in the commit message.  A lot of people run bmcweb without the UI.  In the very old pre phosphor-webui world, the (terrible) angular webui was checked into bmcweb directly, to avoid problems like this, and was selected with a config option.\n\nAlso, at some point, this will likely turn into a template, to pass hidden form information forward like most conventional forms setups do, and that will require bmcweb to have the template information in the repo.",
      "parentUuid": "d91320a7_59015b3f",
      "revId": "e8d17817b15a915069cd8341a36d1aab993795b3",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b5c98639_5875333f",
        "filename": "static/login/index.html",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 1000235
      },
      "writtenOn": "2020-08-13T02:24:57Z",
      "side": 1,
      "message": "Thanks for the explanation; I am starting to understand.  \nWhat is the use case to have a login page without any function behind it?\nAssuming the login page is needed, if it is built into BMCWeb as proposed here, should there be a way to configure it out?\nAlternately, can it be offered as an alternative/peer to the phosphor-webui and webui-vue repos?",
      "parentUuid": "48c912a0_c79e989a",
      "revId": "e8d17817b15a915069cd8341a36d1aab993795b3",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "039dc834_584ce1f4",
        "filename": "static/login/index.html",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2020-08-14T21:15:22Z",
      "side": 1,
      "message": "\u003e What is the use case to have a login page without any function behind it?\n\nbmcweb has plenty of functions without the webui present.  Redfish being the big one people tend to expect to \"just work\"\n\n\u003e Assuming the login page is needed, if it is built into BMCWeb as proposed here, should there be a way to configure it out?\n\nWe could....  but from an architectural standpoint, we should probably tie it to the use of cookie auth, as those are inter-related.  With that said, today Cookie auth is a runtime feature, not compile time.\n\nWhat would the goal be for compiling it out?  Reduced attack surface?",
      "parentUuid": "b5c98639_5875333f",
      "revId": "e8d17817b15a915069cd8341a36d1aab993795b3",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "dea90ec7_ded4636f",
        "filename": "static/login/index.html",
        "patchSetId": 5
      },
      "lineNbr": 13,
      "author": {
        "id": 1000020
      },
      "writtenOn": "2020-08-12T19:44:45Z",
      "side": 1,
      "message": "This makes changing the logo harder, across multiple repos, not a deal-breaker and maybe we don\u0027t care much about what companies do downstream",
      "revId": "e8d17817b15a915069cd8341a36d1aab993795b3",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "cd230b28_0ad5f1ca",
        "filename": "static/login/index.html",
        "patchSetId": 5
      },
      "lineNbr": 13,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2020-08-12T20:55:30Z",
      "side": 1,
      "message": "See above.  I wonder if we just need to combine the phosphor-webui, bmcweb, and webui-vue repos again?  That would give a single place for all this stuff, and we could select which UI we wanted with a config parameter.  I need to give that more thought, and I don\u0027t love how monolithic that makes things, but it would solve the \"one logo to rule them all\" issue.",
      "parentUuid": "dea90ec7_ded4636f",
      "revId": "e8d17817b15a915069cd8341a36d1aab993795b3",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d3ef028d_53476b84",
        "filename": "static/login/index.html",
        "patchSetId": 5
      },
      "lineNbr": 19,
      "author": {
        "id": 1000020
      },
      "writtenOn": "2020-08-12T19:44:45Z",
      "side": 1,
      "message": "tabs?",
      "range": {
        "startLine": 19,
        "startChar": 1,
        "endLine": 19,
        "endChar": 2
      },
      "revId": "e8d17817b15a915069cd8341a36d1aab993795b3",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "27563873_191dbe8b",
        "filename": "static/login/index.html",
        "patchSetId": 5
      },
      "lineNbr": 19,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2020-08-12T20:55:30Z",
      "side": 1,
      "message": "GRRRRR... Will fix.",
      "parentUuid": "d3ef028d_53476b84",
      "range": {
        "startLine": 19,
        "startChar": 1,
        "endLine": 19,
        "endChar": 2
      },
      "revId": "e8d17817b15a915069cd8341a36d1aab993795b3",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "00617797_771aa6f0",
        "filename": "static/login/index.html",
        "patchSetId": 5
      },
      "lineNbr": 22,
      "author": {
        "id": 1000020
      },
      "writtenOn": "2020-08-12T19:44:45Z",
      "side": 1,
      "message": "So the webui-vue has a field for language selection..",
      "revId": "e8d17817b15a915069cd8341a36d1aab993795b3",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4ea3f536_711200ac",
        "filename": "static/login/index.html",
        "patchSetId": 5
      },
      "lineNbr": 22,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2020-08-12T20:55:30Z",
      "side": 1,
      "message": "Cool?  phosphor-webui (the current standard) doesn\u0027t.  How do you think we could fix this the discrepancy between the two?",
      "parentUuid": "00617797_771aa6f0",
      "revId": "e8d17817b15a915069cd8341a36d1aab993795b3",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2c040ff2_9028068c",
        "filename": "static/login/index.html",
        "patchSetId": 5
      },
      "lineNbr": 22,
      "author": {
        "id": 1000281
      },
      "writtenOn": "2020-08-15T02:00:20Z",
      "side": 1,
      "message": "It would be a great deal of work to get translation into phosphor-webui. I am not sure if you were suggesting some sort of parity between the two.",
      "parentUuid": "4ea3f536_711200ac",
      "revId": "e8d17817b15a915069cd8341a36d1aab993795b3",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d40d8de2_fb92b7c7",
        "filename": "static/login/index.html",
        "patchSetId": 5
      },
      "lineNbr": 22,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2020-08-15T03:11:16Z",
      "side": 1,
      "message": "I\u0027m not saying we add translation to phosphor-webui (although I do remember spending a lot of time reviewing a patch on it that never went in).\nLet me ask another way, given the constraints that:\na. People use multiple UI today (phosphor-webui and webui-vue)\nb. They host functionally different login pages\nc. Moving login to bmcweb helps avoid fingerprinting, dos attacks, and is good for security in general.\n\nHow do you suggest we move something like this forward?  I can add a language field, but that\u0027s going to break phosphor-webui.  If that\u0027s what you\u0027re asking for, I\u0027m happy to do it, but I suspect there\u0027s a better solution you have in mind?",
      "parentUuid": "2c040ff2_9028068c",
      "revId": "e8d17817b15a915069cd8341a36d1aab993795b3",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c1ca158e_bbfa7843",
        "filename": "static/login/index.html",
        "patchSetId": 5
      },
      "lineNbr": 22,
      "author": {
        "id": 1000020
      },
      "writtenOn": "2020-08-15T17:27:09Z",
      "side": 1,
      "message": "webui-vue - uses Redfish, is translated, is themeable, and doesn\u0027t suffer some of the anti-patterns that exist in phosphor-webui today, and most importantly is built on an active framework.\n\nIBM switched 2 of their systems to webui-vue\nhttps://gerrit.openbmc-project.xyz/c/openbmc/meta-ibm/+/35445\n\nwebui-vue doesn\u0027t have:\nvirtual media (but there is a commit to add that here: https://gerrit.openbmc-project.xyz/c/openbmc/webui-vue/+/35396)\ndoesn\u0027t have SNMP support (IBM plans to add after Redfish SNMP is implemented in bmcweb)\nthe redfish browser \n2 file code update\nit doesn\u0027t have the maturity phosphor-webui does, is probably missing of some of those edge cases/bug fixes we added over the years\n\nbut despite it missing a few features, I would save it is a much better base to continue forward on. Can we make webui-vue the standard?\n\nEd, what would it take for you to switch to using webui-vue?",
      "parentUuid": "d40d8de2_fb92b7c7",
      "revId": "e8d17817b15a915069cd8341a36d1aab993795b3",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4f85e81c_bfe8571a",
        "filename": "static/login/index.html",
        "patchSetId": 5
      },
      "lineNbr": 22,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2020-08-17T14:27:15Z",
      "side": 1,
      "message": "To be clear, I\u0027m already stated I think webui-vue looks much nicer, and I\u0027m happy to answer that in more detail (I\u0027ll send an email to the list).  For the context of this patchset, I\u0027d really like if we could avoid turning this into a \"webui-vue vs phosphor-webui\" thing, as that\u0027s very much not the intent of this patchset.\n\nI\u0027d like feedback on how you think this patchset needs to change to make bmcweb more secure, and remove a longstanding and well reported bug.  If IBM",
      "parentUuid": "c1ca158e_bbfa7843",
      "revId": "e8d17817b15a915069cd8341a36d1aab993795b3",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "82d17358_88ad6ce0",
        "filename": "static/login/index.html",
        "patchSetId": 5
      },
      "lineNbr": 22,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2020-08-17T18:32:15Z",
      "side": 1,
      "message": "wants to use webui-vue, they can, and I\u0027m happy to add a BMCWEB_INSECURE_* build option that they can use, but I\u0027m trying to see if you have any other ideas.",
      "parentUuid": "4f85e81c_bfe8571a",
      "revId": "e8d17817b15a915069cd8341a36d1aab993795b3",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ed2ca1d2_7ba59ad9",
        "filename": "static/login/index.html",
        "patchSetId": 5
      },
      "lineNbr": 22,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2020-08-25T21:56:54Z",
      "side": 1,
      "message": "Gunnary, Derick, Any ideas on how to best get this done, or is BMCWEB_INSECURE_* flags the best option?",
      "parentUuid": "82d17358_88ad6ce0",
      "revId": "e8d17817b15a915069cd8341a36d1aab993795b3",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4240b476_8f9e38c8",
        "filename": "static/login/index.html",
        "patchSetId": 5
      },
      "lineNbr": 22,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2020-08-25T22:49:17Z",
      "side": 1,
      "message": "Gunnar.... sorry for typoing your name :)",
      "parentUuid": "ed2ca1d2_7ba59ad9",
      "revId": "e8d17817b15a915069cd8341a36d1aab993795b3",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3bcd7985_ffe56665",
        "filename": "static/login/index.html",
        "patchSetId": 5
      },
      "lineNbr": 22,
      "author": {
        "id": 1000020
      },
      "writtenOn": "2020-08-26T02:34:50Z",
      "side": 1,
      "message": "Hey Ed, Let me talk with Derick and Yoshie and will get back to you tomorrow.",
      "parentUuid": "4240b476_8f9e38c8",
      "revId": "e8d17817b15a915069cd8341a36d1aab993795b3",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "81a9b8c4_cdfda9e5",
        "filename": "static/login/index.html",
        "patchSetId": 5
      },
      "lineNbr": 22,
      "author": {
        "id": 1000020
      },
      "writtenOn": "2020-08-26T20:01:44Z",
      "side": 1,
      "message": "https://gerrit.openbmc-project.xyz/c/openbmc/webui-vue/+/35875/1/vue.config.js#6\nCreates a separate chunk for login page and then the authenticated code.\nIt does add a bit to the image, 20kb but we believe a solution like this is better because themeing is easier (in one repo), translation can be supported, and for now we can support both GUIs.",
      "parentUuid": "3bcd7985_ffe56665",
      "revId": "e8d17817b15a915069cd8341a36d1aab993795b3",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "03d53754_0fe62a39",
        "filename": "static/login/index.html",
        "patchSetId": 5
      },
      "lineNbr": 22,
      "author": {
        "id": 1000020
      },
      "writtenOn": "2020-08-26T20:03:58Z",
      "side": 1,
      "message": "Everyone in the GUI design workgroup, held the opinion we should move to webui-vue and sunset phosphor-webui in the future (now I know this isn\u0027t the entire community but was 3 or 4 companies). The problem with the flag is until this support is added to webui-vue, this \"insecure\" flag would be required to use webui-vue (the GUI the design workgroup wants to move forward with).\n\nI also feel this is a bit of a stretch to call this an insecure flag.",
      "parentUuid": "81a9b8c4_cdfda9e5",
      "revId": "e8d17817b15a915069cd8341a36d1aab993795b3",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "98e2aacd_82402d81",
        "filename": "static/login/index.html",
        "patchSetId": 5
      },
      "lineNbr": 22,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2020-08-26T20:55:17Z",
      "side": 1,
      "message": "Your separate chunk idea defeats the point of #1, #3, #4, and #6 from the original commit message.  The payload is still relatively large, which makes it a prime source for DOS attacks, and executes javascript in unauthenticated browsers, which makes it susceptible to attacks of that nature if the javascript has bugs (I\u0027m not saying that it does).\n\n\"It does add a bit to the image, 20kb but we believe a solution like this is better because themeing is easier (in one repo), translation can be supported, and for now we can support both GUIs.\"\nHow does this solve the \"supports both GUIs\" problem?  Do you have a patchset for phosphor-webui as well?\nAlso, translation can be supported either way, the issue is that it was done in javascript, which is fixable if you want to move the translation to a post-login context.\n\n\n\"Everyone in the GUI design workgroup, held the opinion we should move to webui-vue and sunset phosphor-webui in the future (now I know this isn\u0027t the entire community but was 3 or 4 companies\"\nCool, having that many people publicly say that on the mailing list, and start putting patches toward webui-vue to fix its missing features should help a lot with its forward progress.  I\u0027m not really sure what that has to do with this patch though, unless you\u0027re suggesting that I should wait for webui-vue to be 100% accepted by the community before proceeding.  If that\u0027s what you\u0027re proposing, can you and the other 3-4 companies give a timeline for the complete 100% community changeover including testing and stabilizing?  If not, or the date is significantly in the future, we still have the same problem.\nAlso note that this patch largely targets those that do not use the webui for security or size reasons.  I\u0027m going to guess none of those people were in your working group.\nAlso, can you get these 3-4 companies to put their assurances on the mailing list that they will dedicate testing and development effort toward webui-vue, and put patchsets out toward the webui-vue port?  If not, then it\u0027s all just talk in a meeting.\n\n\"I also feel this is a bit of a stretch to call this an insecure flag.\"\nWhat would you like to call it?  \"less secure\"? \"Increases dos attack surface\"?  The original intent of BMCWEB_INSECURE flags were to call out when there existed a more secure way to do things, but we needed to keep the old behavior available for the external users that needed it.  This seems like a perfect candidate under that definition, although I\u0027m happy to call it something else if you have a suggestion for what it could be renamed to.",
      "parentUuid": "03d53754_0fe62a39",
      "revId": "e8d17817b15a915069cd8341a36d1aab993795b3",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b71ec148_e7f3b85d",
        "filename": "static/login/index.html",
        "patchSetId": 5
      },
      "lineNbr": 22,
      "author": {
        "id": 1000281
      },
      "writtenOn": "2020-08-27T19:50:33Z",
      "side": 1,
      "message": "\u003e The payload is still relatively large, which makes it a prime source for DOS attacks, and executes javascript in unauthenticated browsers, which makes it susceptible to attacks of that nature if the javascript has bugs (I\u0027m not saying that it does).\n\nIs it possible that you could come talk to this point and the proposal overall to the GUI Design Work Group on Wednesday, 9/2 at 10:00 AM CT? We want to make security top priority. We also want to understand the criticality of this issue since it will mean significant rework to translation, won\u0027t support customization, and will require another repo requiring client-side development. \n\n\u003e Also, translation can be supported either way, the issue is that it was done in javascript, which is fixable if you want to move the translation to a post-login context.\n\nThe purpose of having it pre-login was a user experience decision. The users valued being able change their language pre-login rather than having to login first. Removing language from the login page results in the feature being less discoverable. If we were to try to mitigate that concern, we would need to make design changes, test with users, and also validate with the changes with the community.\n\n\u003e Also, can you get these 3-4 companies to put their assurances on the mailing list that they will dedicate testing and development effort toward webui-vue, and put patchsets out toward the webui-vue port?  If not, then it\u0027s all just talk in a meeting.\n\nSome of this is documented in the GUI Design Work Group notes. Intel and Phoenix technologies have both stated that they are moving to the webui-vue and Intel is actively contributing with KVM and Virtual Media. \n\n\u003e unless you\u0027re suggesting that I should wait for webui-vue to be 100% accepted by the community before proceeding\n\nWhat does 100% acceptance entail? We have sent information to the mail list, as well as sharing the path in the GUI Design Work Group. My brief experience on this project has been that the GUI receives minimal feedback other than from IBM and Intel.",
      "parentUuid": "98e2aacd_82402d81",
      "revId": "e8d17817b15a915069cd8341a36d1aab993795b3",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "abe7f96f_6475ca2d",
        "filename": "static/login/index.html",
        "patchSetId": 5
      },
      "lineNbr": 22,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2020-08-27T21:44:17Z",
      "side": 1,
      "message": "\"What does 100% acceptance entail?\"\n\nIn the context of this patchset, it means that we can break phosphor-webui (in lieu of fixing webui-vue) and there will be no impact to the project, which is what you\u0027re asking me to do in this change.  As-is, I don\u0027t think we can do that (maybe I\u0027m wrong?).\n\n\"Is it possible that you could come talk to this point and the proposal overall to the GUI Design Work Group... \"\n\nThis change has been discussed at several working groups, including the webserver working group, and the UI working group (probably before you joined regularly).  Given that neither of those discussions got captured properly, I\u0027d rather take a different track, and keep the discussion in a forum that we can reference later.  If more description is needed, I\u0027m happy to add it to the commit message if you can point out where you\u0027re confused, but I\u0027d like to keep it in text format.  Technically this could be put forward in the security workgroup, the webui workgroup, or the Redfish (no longer held) workgroup.  Doing it in reviews is the only way to ensure that we hit the required audience.\n\n\"The purpose of having it pre-login was a user experience decision. The users valued being able change their language pre-login rather than having to login first. Removing language from the login page results in the feature being less discoverable. If we were to try to mitigate that concern, we would need to make design changes, test with users, and also validate with the changes with the community.\"\n\nUnderstood.  To be clear, it\u0027s a good change, but because the webui got forked/replaced, and uses internal APIs (like websockets and cookie auth that we\u0027re talking about here), this causes the problem we\u0027re in now.  Do you have any solutions?\n\nI\u0027m not saying you need to rework webui-vue.  I\u0027ve given options that require no changes to webui-vue, and leave it in the less secure state it was already in.",
      "parentUuid": "b71ec148_e7f3b85d",
      "revId": "e8d17817b15a915069cd8341a36d1aab993795b3",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b4d04e32_bc792470",
        "filename": "static/login/login.css",
        "patchSetId": 5
      },
      "lineNbr": 140,
      "author": {
        "id": 1000235
      },
      "writtenOn": "2020-08-12T20:26:21Z",
      "side": 1,
      "message": "remove trailing tab",
      "revId": "e8d17817b15a915069cd8341a36d1aab993795b3",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f9741ca5_392c0d2b",
        "filename": "static/login/login.css",
        "patchSetId": 5
      },
      "lineNbr": 140,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2020-08-12T20:55:30Z",
      "side": 1,
      "message": "will fix.",
      "parentUuid": "b4d04e32_bc792470",
      "revId": "e8d17817b15a915069cd8341a36d1aab993795b3",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    }
  ]
}