{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "12c8b532_cdb58ddf",
        "filename": "redfish-core/lib/metric_report_definition.hpp",
        "patchSetId": 74
      },
      "lineNbr": 202,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2023-01-09T18:38:53Z",
      "side": 1,
      "message": "In looking at https://redfish.dmtf.org/schemas/v1/MetricReportDefinition_v1.xml\n\nI don\u0027t see a field called \"Id\", Is there something I\u0027m missing?",
      "revId": "ae7b5114c5e5423243ecef15b5fb9183062b6eb9",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f86be063_adb4ada5",
        "filename": "redfish-core/lib/metric_report_definition.hpp",
        "patchSetId": 74
      },
      "lineNbr": 202,
      "author": {
        "id": 1000678
      },
      "writtenOn": "2023-01-10T10:00:11Z",
      "side": 1,
      "message": "This is strange. In json file \"Id\" is present https://redfish.dmtf.org/schemas/v1/MetricReportDefinition.v1_4_2.json",
      "parentUuid": "12c8b532_cdb58ddf",
      "revId": "ae7b5114c5e5423243ecef15b5fb9183062b6eb9",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a085d148_d6f5baee",
        "filename": "redfish-core/lib/metric_report_definition.hpp",
        "patchSetId": 74
      },
      "lineNbr": 202,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2023-01-19T17:00:08Z",
      "side": 1,
      "message": "ACK, looks like it\u0027s inherited from Resource, although we don\u0027t really use it anywhere.\n\n\"The value shall conform with the \u0027Id\u0027 clause of the Redfish Specification.\"\n\nHave you verified that all input meets the specification?  Considering this comes from a user, it seems unlikely that it would meet the specification without escaping/input validation.",
      "parentUuid": "f86be063_adb4ada5",
      "revId": "ae7b5114c5e5423243ecef15b5fb9183062b6eb9",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2b830cf0_148c0163",
        "filename": "redfish-core/lib/metric_report_definition.hpp",
        "patchSetId": 74
      },
      "lineNbr": 202,
      "author": {
        "id": 1000678
      },
      "writtenOn": "2023-01-20T11:00:02Z",
      "side": 1,
      "message": "All of the mentioned cases are validated in backend to avoid code duplication between backend and bmcweb. We tested that if user provides invalid data there is proper response send on dbus.\n\nWe need to perform full validation in backend because of possible other users. For example other services that may want to call telemetry dbus API. Since it is safe to call AddReport we decided to not duplicate this code in bmcweb.\n\nCan we keep it as is? Or should we copy paste id validation code to bmcweb?",
      "parentUuid": "a085d148_d6f5baee",
      "revId": "ae7b5114c5e5423243ecef15b5fb9183062b6eb9",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5524b5a4_c1388c16",
        "filename": "redfish-core/lib/metric_report_definition.hpp",
        "patchSetId": 74
      },
      "lineNbr": 202,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2023-01-31T17:18:31Z",
      "side": 1,
      "message": "\u003e Can we keep it as is? Or should we copy paste id validation code to bmcweb?\n\nNeither.  Strings from need escaped for URI usages when used in a URI.",
      "parentUuid": "2b830cf0_148c0163",
      "revId": "ae7b5114c5e5423243ecef15b5fb9183062b6eb9",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "89516f33_2b463f31",
        "filename": "redfish-core/lib/metric_report_definition.hpp",
        "patchSetId": 74
      },
      "lineNbr": 202,
      "author": {
        "id": 1000678
      },
      "writtenOn": "2023-02-09T10:34:26Z",
      "side": 1,
      "message": "Ok, I restored this check. That should ensure that user input will satisfy redfish Id and backend requirements.",
      "parentUuid": "5524b5a4_c1388c16",
      "revId": "ae7b5114c5e5423243ecef15b5fb9183062b6eb9",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f70b4fc7_d421b991",
        "filename": "redfish-core/lib/metric_report_definition.hpp",
        "patchSetId": 74
      },
      "lineNbr": 259,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2023-01-09T18:38:53Z",
      "side": 1,
      "message": "From: https://redfish.dmtf.org/schemas/v1/MetricReportDefinition_v1.xml\n\n\u003e This property should not be present if MetricProperties is present.\n\nWhere is that handled in this code?  I don\u0027t see anything that ensures these two params are mutually exclusive.",
      "range": {
        "startLine": 259,
        "startChar": 28,
        "endLine": 259,
        "endChar": 53
      },
      "revId": "ae7b5114c5e5423243ecef15b5fb9183062b6eb9",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "dcd559a4_9872a897",
        "filename": "redfish-core/lib/metric_report_definition.hpp",
        "patchSetId": 74
      },
      "lineNbr": 259,
      "author": {
        "id": 1000678
      },
      "writtenOn": "2023-01-10T10:00:11Z",
      "side": 1,
      "message": "You are right. It is a bug. I will fix it.",
      "parentUuid": "f70b4fc7_d421b991",
      "range": {
        "startLine": 259,
        "startChar": 28,
        "endLine": 259,
        "endChar": 53
      },
      "revId": "ae7b5114c5e5423243ecef15b5fb9183062b6eb9",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "8ae1ed1e_fe0616e7",
        "filename": "redfish-core/lib/metric_report_definition.hpp",
        "patchSetId": 74
      },
      "lineNbr": 259,
      "author": {
        "id": 1000678
      },
      "writtenOn": "2023-01-19T14:03:44Z",
      "side": 1,
      "message": "MetricId was used like any other Id which was wrong. MetricId can be used to identify metric instead of MetricProperty. We are currently not using MetricId for that purpose so we deleted MetricId for the time being.",
      "parentUuid": "dcd559a4_9872a897",
      "range": {
        "startLine": 259,
        "startChar": 28,
        "endLine": 259,
        "endChar": 53
      },
      "revId": "ae7b5114c5e5423243ecef15b5fb9183062b6eb9",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5e82df41_5d58caa9",
        "filename": "redfish-core/lib/metric_report_definition.hpp",
        "patchSetId": 74
      },
      "lineNbr": 413,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2023-01-09T18:38:53Z",
      "side": 1,
      "message": "Common error #12",
      "range": {
        "startLine": 413,
        "startChar": 12,
        "endLine": 413,
        "endChar": 78
      },
      "revId": "ae7b5114c5e5423243ecef15b5fb9183062b6eb9",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2d28e53a_0a7f0988",
        "filename": "redfish-core/lib/metric_report_definition.hpp",
        "patchSetId": 74
      },
      "lineNbr": 413,
      "author": {
        "id": 1000678
      },
      "writtenOn": "2023-01-10T10:00:11Z",
      "side": 1,
      "message": "Do you mean \"TelemetryService/\" + args.id.value_or(\"\")? This field is verified by backend. If needed we can duplicate this validation in bmcweb.",
      "parentUuid": "5e82df41_5d58caa9",
      "range": {
        "startLine": 413,
        "startChar": 12,
        "endLine": 413,
        "endChar": 78
      },
      "revId": "ae7b5114c5e5423243ecef15b5fb9183062b6eb9",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2333a513_8efa1556",
        "filename": "redfish-core/lib/metric_report_definition.hpp",
        "patchSetId": 74
      },
      "lineNbr": 413,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2023-01-19T17:00:08Z",
      "side": 1,
      "message": "I mean that you\u0027re combining two fields, including a user-facing field, without using the appropriate escaping methods.  What if a user picks the id of empty string?  What if the user picks an id that contains a / in it?  This is why we use the appropriate classes that handle escaping/descaping of user data, per owasp and coding standards.",
      "parentUuid": "2d28e53a_0a7f0988",
      "range": {
        "startLine": 413,
        "startChar": 12,
        "endLine": 413,
        "endChar": 78
      },
      "revId": "ae7b5114c5e5423243ecef15b5fb9183062b6eb9",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e7a35c54_4ff0748d",
        "filename": "redfish-core/lib/metric_report_definition.hpp",
        "patchSetId": 74
      },
      "lineNbr": 413,
      "author": {
        "id": 1000678
      },
      "writtenOn": "2023-01-20T11:00:02Z",
      "side": 1,
      "message": "Same reply as in one of the above comments:\n\n\u003d\u003d\u003d\u003d\nAll of the mentioned cases are validated in backend to avoid code duplication between backend and bmcweb. We tested that if user provides invalid data there is proper response send on dbus.\n\nWe need to perform full validation in backend because of possible other users. For example other services that may want to call telemetry dbus API. Since it is safe to call AddReport we decided to not duplicate this code in bmcweb.\n\nCan we keep it as is? Or should we copy paste id validation code to bmcweb?",
      "parentUuid": "2333a513_8efa1556",
      "range": {
        "startLine": 413,
        "startChar": 12,
        "endLine": 413,
        "endChar": 78
      },
      "revId": "ae7b5114c5e5423243ecef15b5fb9183062b6eb9",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "5ef7c5ed_72d704e0",
        "filename": "redfish-core/lib/metric_report_definition.hpp",
        "patchSetId": 74
      },
      "lineNbr": 413,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2023-01-31T17:18:31Z",
      "side": 1,
      "message": "\u003e validated in backend\n\nNothing in the dbus interface gaurantees that these are representable without escaping as html URIs.  There\u0027s no reason to believe at this level that the backend knows anything about HTML URI escaping (nor should it know how to escape an HTTP uri).\n\nI\u0027m not that bothered by it.  Fine as is.",
      "parentUuid": "e7a35c54_4ff0748d",
      "range": {
        "startLine": 413,
        "startChar": 12,
        "endLine": 413,
        "endChar": 78
      },
      "revId": "ae7b5114c5e5423243ecef15b5fb9183062b6eb9",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "331a521d_75e16335",
        "filename": "redfish-core/lib/metric_report_definition.hpp",
        "patchSetId": 74
      },
      "lineNbr": 417,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2023-01-09T18:38:53Z",
      "side": 1,
      "message": "This seems like something that needs constraints put on it.  A default interval of MAX_UINT64_t is nonsensical.  It\u0027s either required for the type, or it\u0027s not used.",
      "range": {
        "startLine": 417,
        "startChar": 0,
        "endLine": 417,
        "endChar": 73
      },
      "revId": "ae7b5114c5e5423243ecef15b5fb9183062b6eb9",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b3c662c7_9d927510",
        "filename": "redfish-core/lib/metric_report_definition.hpp",
        "patchSetId": 74
      },
      "lineNbr": 417,
      "author": {
        "id": 1000678
      },
      "writtenOn": "2023-01-10T10:00:11Z",
      "side": 1,
      "message": "Sure, I will do it",
      "parentUuid": "331a521d_75e16335",
      "range": {
        "startLine": 417,
        "startChar": 0,
        "endLine": 417,
        "endChar": 73
      },
      "revId": "ae7b5114c5e5423243ecef15b5fb9183062b6eb9",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "4902b7b8_f5363429",
        "filename": "redfish-core/lib/metric_report_definition.hpp",
        "patchSetId": 74
      },
      "lineNbr": 417,
      "author": {
        "id": 1000678
      },
      "writtenOn": "2023-01-19T14:03:44Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "b3c662c7_9d927510",
      "range": {
        "startLine": 417,
        "startChar": 0,
        "endLine": 417,
        "endChar": 73
      },
      "revId": "ae7b5114c5e5423243ecef15b5fb9183062b6eb9",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "af3dc618_1f44b98d",
        "filename": "redfish-core/lib/metric_report_definition.hpp",
        "patchSetId": 74
      },
      "lineNbr": 419,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2023-01-09T18:38:53Z",
      "side": 1,
      "message": "Can you please make all of these actual defaults on the class itself, rather than calling value_or many many times?  That makes it more clear what these defaults are, and would be much easier to read.",
      "revId": "ae7b5114c5e5423243ecef15b5fb9183062b6eb9",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8902ca6e_ea869d97",
        "filename": "redfish-core/lib/metric_report_definition.hpp",
        "patchSetId": 74
      },
      "lineNbr": 419,
      "author": {
        "id": 1000678
      },
      "writtenOn": "2023-01-10T10:00:11Z",
      "side": 1,
      "message": "Sure, I will do it",
      "parentUuid": "af3dc618_1f44b98d",
      "revId": "ae7b5114c5e5423243ecef15b5fb9183062b6eb9",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "14a33e1e_dfa69ed5",
        "filename": "redfish-core/lib/metric_report_definition.hpp",
        "patchSetId": 74
      },
      "lineNbr": 419,
      "author": {
        "id": 1000678
      },
      "writtenOn": "2023-01-19T14:03:44Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "8902ca6e_ea869d97",
      "revId": "ae7b5114c5e5423243ecef15b5fb9183062b6eb9",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6c00de4c_813458cf",
        "filename": "redfish-core/lib/metric_report_definition.hpp",
        "patchSetId": 74
      },
      "lineNbr": 484,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2023-01-09T18:38:53Z",
      "side": 1,
      "message": "Common error #1",
      "range": {
        "startLine": 484,
        "startChar": 27,
        "endLine": 484,
        "endChar": 40
      },
      "revId": "ae7b5114c5e5423243ecef15b5fb9183062b6eb9",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4a272dae_9cdc8e42",
        "filename": "redfish-core/lib/metric_report_definition.hpp",
        "patchSetId": 74
      },
      "lineNbr": 484,
      "author": {
        "id": 1000678
      },
      "writtenOn": "2023-01-10T10:00:11Z",
      "side": 1,
      "message": "Thanks, I overlooked it. I will fix it.",
      "parentUuid": "6c00de4c_813458cf",
      "range": {
        "startLine": 484,
        "startChar": 27,
        "endLine": 484,
        "endChar": 40
      },
      "revId": "ae7b5114c5e5423243ecef15b5fb9183062b6eb9",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "8995e7cc_de744be4",
        "filename": "redfish-core/lib/metric_report_definition.hpp",
        "patchSetId": 74
      },
      "lineNbr": 484,
      "author": {
        "id": 1000678
      },
      "writtenOn": "2023-01-19T14:03:44Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "4a272dae_9cdc8e42",
      "range": {
        "startLine": 484,
        "startChar": 27,
        "endLine": 484,
        "endChar": 40
      },
      "revId": "ae7b5114c5e5423243ecef15b5fb9183062b6eb9",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "3f7c9c48_7c52e231",
        "filename": "redfish-core/lib/metric_report_definition.hpp",
        "patchSetId": 74
      },
      "lineNbr": 484,
      "author": {
        "id": 1000678
      },
      "writtenOn": "2023-01-19T14:03:44Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "4a272dae_9cdc8e42",
      "range": {
        "startLine": 484,
        "startChar": 27,
        "endLine": 484,
        "endChar": 40
      },
      "revId": "ae7b5114c5e5423243ecef15b5fb9183062b6eb9",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0916611c_5572001b",
        "filename": "redfish-core/lib/telemetry_service.hpp",
        "patchSetId": 74
      },
      "lineNbr": 87,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2023-01-09T18:38:53Z",
      "side": 1,
      "message": "As a general rule, dbus enums in openbmc take the form of:\n\nxyz.openbmc_project.Namespace.Enum.Value\n\nThis does not fit with redfish, and generally requires a conversion function to convert one enum to another, while handling errors.  As-written, either the service you tested against wasn\u0027t publishing the enum appropriately to the phosphor-dbus-interfaces standard, or this can\u0027t have passed the redfish service validator.",
      "range": {
        "startLine": 86,
        "startChar": 0,
        "endLine": 87,
        "endChar": 46
      },
      "revId": "ae7b5114c5e5423243ecef15b5fb9183062b6eb9",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c129942a_705cf153",
        "filename": "redfish-core/lib/telemetry_service.hpp",
        "patchSetId": 74
      },
      "lineNbr": 87,
      "author": {
        "id": 1000678
      },
      "writtenOn": "2023-01-10T10:00:11Z",
      "side": 1,
      "message": "We will change it so the backend will use enums in form of xyz.openbmc_project.Namespace.Enum.Value",
      "parentUuid": "0916611c_5572001b",
      "range": {
        "startLine": 86,
        "startChar": 0,
        "endLine": 87,
        "endChar": 46
      },
      "revId": "ae7b5114c5e5423243ecef15b5fb9183062b6eb9",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "a651dd0a_01b15346",
        "filename": "redfish-core/lib/telemetry_service.hpp",
        "patchSetId": 74
      },
      "lineNbr": 87,
      "author": {
        "id": 1000678
      },
      "writtenOn": "2023-01-19T14:03:44Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "c129942a_705cf153",
      "range": {
        "startLine": 86,
        "startChar": 0,
        "endLine": 87,
        "endChar": 46
      },
      "revId": "ae7b5114c5e5423243ecef15b5fb9183062b6eb9",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    }
  ]
}