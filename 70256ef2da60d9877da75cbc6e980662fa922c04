{
  "comments": [
    {
      "key": {
        "uuid": "fba26f8f_86763254",
        "filename": "redfish-core/lib/metric_definition.hpp",
        "patchSetId": 90
      },
      "lineNbr": 1,
      "author": {
        "id": 1000678
      },
      "writtenOn": "2021-09-03T07:31:03Z",
      "side": 1,
      "message": "There is idea to move path of this code to telemetry-service.\n\nReason for this change is this data could be calculated once for each sensor, so it can be cached in TelemetryService which would greatly increase performance.\n\nInstead of doing several dbus calls to different services (ObjectMapper, Sensor services) each time redfish will gather necessary information, make one dbus call to TelemetryService, receive response and fill in response.\n\nEd, what do you think about it.",
      "revId": "70256ef2da60d9877da75cbc6e980662fa922c04",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d74d5b68_5a964a8a",
        "filename": "redfish-core/lib/metric_definition.hpp",
        "patchSetId": 90
      },
      "lineNbr": 192,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2021-08-13T17:47:25Z",
      "side": 1,
      "message": "Numeric versus gauge seems like a subtle difference.  Are you sure that Numeric is correct here?  Based on reading the schema, I suspect our sensors could be either.",
      "range": {
        "startLine": 192,
        "startChar": 58,
        "endLine": 192,
        "endChar": 65
      },
      "revId": "70256ef2da60d9877da75cbc6e980662fa922c04",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3ec79c3e_03116835",
        "filename": "redfish-core/lib/metric_definition.hpp",
        "patchSetId": 90
      },
      "lineNbr": 192,
      "author": {
        "id": 1000678
      },
      "writtenOn": "2021-08-19T08:25:44Z",
      "side": 1,
      "message": "Gauge looks like physical sensor can have higher value, but we limit it and never show result above gauge max value. In this case Numeric is more precise because Telemetry doesn\u0027t modify value of this sensor, that\u0027s why Gauge would be incorrect.",
      "parentUuid": "d74d5b68_5a964a8a",
      "range": {
        "startLine": 192,
        "startChar": 58,
        "endLine": 192,
        "endChar": 65
      },
      "revId": "70256ef2da60d9877da75cbc6e980662fa922c04",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "40504ec1_c8907c1e",
        "filename": "redfish-core/lib/metric_definition.hpp",
        "patchSetId": 90
      },
      "lineNbr": 192,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2021-08-20T17:49:09Z",
      "side": 1,
      "message": "OpenBMC sensors have limits defined by MaxValue and MinValue....  Can you quote the part of the spec that you\u0027re looking at?\n\nFWIW, I\u0027m ok with this interpretation, I\u0027d just like to make sure we\u0027ve documented why we picked it.",
      "parentUuid": "3ec79c3e_03116835",
      "range": {
        "startLine": 192,
        "startChar": 58,
        "endLine": 192,
        "endChar": 65
      },
      "revId": "70256ef2da60d9877da75cbc6e980662fa922c04",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a181614b_414d21a2",
        "filename": "redfish-core/lib/metric_definition.hpp",
        "patchSetId": 90
      },
      "lineNbr": 192,
      "author": {
        "id": 1000678
      },
      "writtenOn": "2021-08-31T14:13:31Z",
      "side": 1,
      "message": "I had talk with John Leung one of the contributors (https://www.dmtf.org/sites/default/files/standards/documents/DSP2051_1.0.0.pdf)\n\nYou are right we should use Gauge for sensors that expose Min/Max on dbus and physical sensors for those who doesn\u0027t (report nan).",
      "parentUuid": "40504ec1_c8907c1e",
      "range": {
        "startLine": 192,
        "startChar": 58,
        "endLine": 192,
        "endChar": 65
      },
      "revId": "70256ef2da60d9877da75cbc6e980662fa922c04",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bf998604_24dcbbb4",
        "filename": "redfish-core/lib/metric_definition.hpp",
        "patchSetId": 90
      },
      "lineNbr": 194,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2021-08-13T17:47:25Z",
      "side": 1,
      "message": "This can\u0027t be assumed.  I\u0027m not sure how to generate it based on dbus replies (we might need a new interface) but for now, it\u0027s incorrect for things like phosphor-virtual-sensor, or cfm sensor.",
      "range": {
        "startLine": 194,
        "startChar": 62,
        "endLine": 194,
        "endChar": 76
      },
      "revId": "70256ef2da60d9877da75cbc6e980662fa922c04",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3baaa17b_0873c623",
        "filename": "redfish-core/lib/metric_definition.hpp",
        "patchSetId": 90
      },
      "lineNbr": 194,
      "author": {
        "id": 1000678
      },
      "writtenOn": "2021-09-01T11:45:02Z",
      "side": 1,
      "message": "For virtual sensors we should include information about CalculationParameters which is telemetry specific. It doesn\u0027t seem right to add that information to each of virtual sensors. It will be possible (not yet implemented) to add new MetricDefinition using TelemetryService API.\n\nAs far as I understand we should assume all dbus sensors PhysicalSensor and use Calculated/Synthesized if user wants to create MetricReport with CollectionFunction set to Average/Min/Max. I still need to clarify it.\n\nhttps://redfish.dmtf.org/redfish/mockups/v1/1058#TelemetryService--MetricDefinitions--OutletAirflowTemp",
      "parentUuid": "bf998604_24dcbbb4",
      "range": {
        "startLine": 194,
        "startChar": 62,
        "endLine": 194,
        "endChar": 76
      },
      "revId": "70256ef2da60d9877da75cbc6e980662fa922c04",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e9f38f14_8f1c93d0",
        "filename": "redfish-core/lib/metric_definition.hpp",
        "patchSetId": 90
      },
      "lineNbr": 194,
      "author": {
        "id": 1000678
      },
      "writtenOn": "2021-09-03T07:00:21Z",
      "side": 1,
      "message": "Let\u0027s assume we will add information about sensors being virtual. We will also have to add some telemetry information to each sensor to make it work according to schema.\n\nWe have \u0027ImplementationType\u0027 which contains 3 types of virtual sensor \u0027DigitalMeter\u0027 which is not based on any other sensor it can measure system downtime for example, disk ussage. This doesn\u0027t require additional information.\n\nWe have \u0027Calculated\u0027 which should include algorithm and list of sensors it uses to produce result.\n\nWe have \u0027Synthesized\u0027 which only includes list of sensors it uses to produce result.\n\nIf sensor exposes new phosphor-virtual-sensor interface we should be able to determine if it\u0027s Calculated, Synthesized or DigitalMeter. If it doesn\u0027t we can assume it\u0027s PhysicalSensor.\n\nAs a transition period (or permanent solution) we will also new new field in sensor interface with information if it\u0027s physical or virtual.\n\nThere is also idea to add new \u0027ImplementationType\u0027 value (Unknown) to schema which would say that we don\u0027t have enough information how sensor is implemented.\n\nHow does it sound for you?",
      "parentUuid": "3baaa17b_0873c623",
      "range": {
        "startLine": 194,
        "startChar": 62,
        "endLine": 194,
        "endChar": 76
      },
      "revId": "70256ef2da60d9877da75cbc6e980662fa922c04",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    }
  ]
}