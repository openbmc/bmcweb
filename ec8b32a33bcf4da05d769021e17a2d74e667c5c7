{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "2ac9a925_9c349df4",
        "filename": "redfish-core/lib/metric_report_definition.hpp",
        "patchSetId": 1
      },
      "lineNbr": 1178,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2025-07-28T16:21:46Z",
      "side": 1,
      "message": "Pretty sure this needs to be in the verifyCommonErrors clause on line 1197?\n\nOtherwise we\u0027d potentially set an ok condition, then set an error later.  Might as well just be setting the ok code when we know we\u0027re done.\n\nAs a note, the below would probably be better written inverted, so the \"good\" condition happened at the end of the method.\n\n\n    if (verifyCommonErrors(asyncResp-\u003eres, id, ec))\n    {\n        messages::internalError(asyncResp-\u003eres);\n        return;\n    }\n\n    asyncResp-\u003eres.result(boost::beast::http::status::no_content);\n    \n    \n    but up to you if you want to do that",
      "revId": "ec8b32a33bcf4da05d769021e17a2d74e667c5c7",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6634ffa1_a120967d",
        "filename": "redfish-core/lib/metric_report_definition.hpp",
        "patchSetId": 1
      },
      "lineNbr": 1178,
      "author": {
        "id": 1001329
      },
      "writtenOn": "2025-07-29T07:18:07Z",
      "side": 1,
      "message": "\u003e Otherwise we\u0027d potentially set an ok condition, then set an error later.  Might as well just be setting the ok code when we know we\u0027re done.\n\nI\u0027m not sure I fully understand this. Right now, we\u0027re leaving the function right after setting an ok condition.\n\nI agree that inverting the logic will improve overall readability of this code. Would You mind if I do this in another patch? I could focus then on covering the whole file, while limiting this change only to fixing this specific issue.",
      "parentUuid": "2ac9a925_9c349df4",
      "revId": "ec8b32a33bcf4da05d769021e17a2d74e667c5c7",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d2c7bbb6_c90a48f1",
        "filename": "redfish-core/lib/metric_report_definition.hpp",
        "patchSetId": 1
      },
      "lineNbr": 1178,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2025-07-29T15:55:14Z",
      "side": 1,
      "message": "you don\u0027t have to do the inversion, that\u0027s fine, but as you\u0027ve written this, you\u0027re now bypassing verifyCommonErrors, which does a very similar check against ec.\n\nhttps://github.com/openbmc/bmcweb/blob/8d9cf72d00ccbbdd070849601ce8f37bc01cb8c8/redfish-core/lib/metric_report_definition.hpp#L89\n\nIf you\u0027d rather handle this error, here, it\u0027s fine, but we need to drop it from verifyCommonErrors.\n\nMy suggestion was that we should just rely on verifyCommonErrors, and use that to drive the no_content return code.",
      "parentUuid": "6634ffa1_a120967d",
      "revId": "ec8b32a33bcf4da05d769021e17a2d74e667c5c7",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "94f4993c_b4a6eb4d",
        "filename": "redfish-core/lib/metric_report_definition.hpp",
        "patchSetId": 1
      },
      "lineNbr": 1178,
      "author": {
        "id": 1001329
      },
      "writtenOn": "2025-07-30T08:58:59Z",
      "side": 1,
      "message": "I get Your point now. The problem is that we cannot put no_content as the default code into `verifyCommonErrors` function as is, because it depends on the request itself (different code is sent for example here: https://github.com/openbmc/bmcweb/blob/8d9cf72d00ccbbdd070849601ce8f37bc01cb8c8/redfish-core/lib/metric_report_definition.hpp#L757 or here: https://github.com/openbmc/bmcweb/blob/8d9cf72d00ccbbdd070849601ce8f37bc01cb8c8/redfish-core/lib/metric_report_definition.hpp#L905 ). \n\nI\u0027m not implying that it\u0027s impossible - I can rework the function according to Your suggestion. But since doing this would affect the whole file (note that the same pattern for error handling is repeated for every request in this scope), I\u0027d rather opt for doing it in another patch. Is it fine to You?",
      "parentUuid": "d2c7bbb6_c90a48f1",
      "revId": "ec8b32a33bcf4da05d769021e17a2d74e667c5c7",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "46841910_3e7de3fe",
        "filename": "redfish-core/lib/metric_report_definition.hpp",
        "patchSetId": 1
      },
      "lineNbr": 1178,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2025-07-30T15:19:29Z",
      "side": 1,
      "message": "I wasn\u0027t asking for it to go into verifyCommonErrors, I was asking for it to move from this line to line like so.\n\n    if (!verifyCommonErrors(asyncResp-\u003eres, id, ec))\n    {\n        asyncResp-\u003eres.result(boost::beast::http::status::no_content);\n        return;\n    }\n    \n    \nThis to me seemed like a one line change and simpler than what\u0027s here.",
      "parentUuid": "94f4993c_b4a6eb4d",
      "revId": "ec8b32a33bcf4da05d769021e17a2d74e667c5c7",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    }
  ]
}