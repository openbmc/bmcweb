{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "7ab51f91_842025bc",
        "filename": "/COMMIT_MSG",
        "patchSetId": 7
      },
      "lineNbr": 72,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2024-08-29T15:40:52Z",
      "side": 1,
      "message": "In the design proposed I would expect this to go in phosphor-user-manager and be accessed over dbus, not in bmcweb.",
      "range": {
        "startLine": 71,
        "startChar": 0,
        "endLine": 72,
        "endChar": 26
      },
      "revId": "4bfd6d6e9faca1f801ccc05fe42d3716feabb720",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3f8733fa_fe92d5ae",
        "filename": "/COMMIT_MSG",
        "patchSetId": 7
      },
      "lineNbr": 72,
      "author": {
        "id": 1001762
      },
      "writtenOn": "2024-08-29T16:08:20Z",
      "side": 1,
      "message": "I was advised not to pass tokens over DBUS. Is it so?",
      "parentUuid": "7ab51f91_842025bc",
      "range": {
        "startLine": 71,
        "startChar": 0,
        "endLine": 72,
        "endChar": 26
      },
      "revId": "4bfd6d6e9faca1f801ccc05fe42d3716feabb720",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "828f8b21_779aa0b5",
        "filename": "/COMMIT_MSG",
        "patchSetId": 7
      },
      "lineNbr": 72,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2024-08-29T17:48:58Z",
      "side": 1,
      "message": "I\u0027m not really sure where you got that advice, but generally we wouldn\u0027t use pam for this kind of thing.",
      "parentUuid": "3f8733fa_fe92d5ae",
      "range": {
        "startLine": 71,
        "startChar": 0,
        "endLine": 72,
        "endChar": 26
      },
      "revId": "4bfd6d6e9faca1f801ccc05fe42d3716feabb720",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2fb42fb7_39090724",
        "filename": "/COMMIT_MSG",
        "patchSetId": 7
      },
      "lineNbr": 72,
      "author": {
        "id": 1001762
      },
      "writtenOn": "2024-08-30T07:32:01Z",
      "side": 1,
      "message": "True, that is the reason I tried to implement it using https://github.com/abhilashraju/totp_verifiers/blob/master/totp2.hpp .But this looks like an overkill? \n\nRegarding moving it to user manager\n\nCan we move entire auth(pam) implementation to user manager? not sure if plain secrets can be passed over Dbus. If Dbus does not have an encryption channel then  perhaps an https communication will do the job.",
      "parentUuid": "828f8b21_779aa0b5",
      "range": {
        "startLine": 71,
        "startChar": 0,
        "endLine": 72,
        "endChar": 26
      },
      "revId": "4bfd6d6e9faca1f801ccc05fe42d3716feabb720",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "56c69381_9519b59e",
        "filename": "/COMMIT_MSG",
        "patchSetId": 7
      },
      "lineNbr": 72,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2024-08-31T19:17:55Z",
      "side": 1,
      "message": "\u003e True, that is the reason I tried to implement it using https://github.com/abhilashraju/totp_verifiers/blob/master/totp2.hpp .But this looks like an overkill? \n\nI can\u0027t speak to who gave you that advice or why, but IMO, lets implement this in the expected way (just using dbus values) and if we need to change it, we can treat it as a change, and document why we\u0027re doing it then.\n\n\u003e \n\u003e Regarding moving it to user manager\n\u003e \n\u003e Can we move entire auth(pam) implementation to user manager? not sure if plain secrets can be passed over Dbus. If Dbus does not have an encryption channel then  perhaps an https communication will do the job.\n\nFWIW, I\u0027m trying to do exactly that here: https://gerrit.openbmc.org/c/openbmc/bmcweb/+/65401\n\nEventually that code in the separate daemon could go into phosphor-user-manager.  We\u0027d need to figure out how to get phosphor-user-manager to do non-blocking calls, but that\u0027s something I think we can solve.  There were concerns about passing plaintext passwords (given the reusability and lack of timeout) over dbus, but that can be mitigated with FDs like we do for KVM\nhttps://github.com/openbmc/bmcweb/blob/f056d96a7c4d54f3e7d5ef92bd501f8cd6edb432/include/credential_pipe.hpp#L16",
      "parentUuid": "2fb42fb7_39090724",
      "range": {
        "startLine": 71,
        "startChar": 0,
        "endLine": 72,
        "endChar": 26
      },
      "revId": "4bfd6d6e9faca1f801ccc05fe42d3716feabb720",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a9dabda8_b302b586",
        "filename": "include/pam_authenticate.hpp",
        "patchSetId": 7
      },
      "lineNbr": 185,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2024-08-29T15:40:52Z",
      "side": 1,
      "message": "Just make a single member method here.  No need for a struct at this point.",
      "revId": "4bfd6d6e9faca1f801ccc05fe42d3716feabb720",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a3df1164_031a92e6",
        "filename": "include/pam_authenticate.hpp",
        "patchSetId": 7
      },
      "lineNbr": 185,
      "author": {
        "id": 1001762
      },
      "writtenOn": "2024-08-29T16:08:20Z",
      "side": 1,
      "message": "if the Totp verify method goes to user-manager then we don\u0027t need this function in bmcweb.",
      "parentUuid": "a9dabda8_b302b586",
      "revId": "4bfd6d6e9faca1f801ccc05fe42d3716feabb720",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a4a68aec_a3b1dd9c",
        "filename": "include/pam_authenticate.hpp",
        "patchSetId": 7
      },
      "lineNbr": 185,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2024-08-29T17:48:58Z",
      "side": 1,
      "message": "üëç",
      "parentUuid": "a3df1164_031a92e6",
      "revId": "4bfd6d6e9faca1f801ccc05fe42d3716feabb720",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    }
  ]
}