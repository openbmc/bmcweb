{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "ba266a5a_5b8132a5",
        "filename": "/COMMIT_MSG",
        "patchSetId": 9
      },
      "lineNbr": 15,
      "author": {
        "id": 1000020
      },
      "writtenOn": "2024-03-12T15:09:58Z",
      "side": 1,
      "message": "I think another sentence like: \n\n\"Since the path is /redfish/v1/Systems/system/PCIeDevices and we already have a link from /redfish/v1/Systems/system/, remove the link here in Chassis. This is just a link, and since another link already exists, this should not break clients.\"",
      "revId": "cd8d3e129c808b1ae96a4b65f15efb31a88f51c0",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d91f060a_12e6f3d8",
        "filename": "/COMMIT_MSG",
        "patchSetId": 9
      },
      "lineNbr": 15,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2024-03-12T20:27:53Z",
      "side": 1,
      "message": "I\u0027m quite confused why this is a problem.  Looking at it, all chassis will point to the single system endpoint, which will contain all the PCIe devices.\n\nCan we get a better explanation of why this is an issue?  In addition, can we get an explanation of what clients that relied on this property should do instead?",
      "revId": "cd8d3e129c808b1ae96a4b65f15efb31a88f51c0",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "62dfd414_20beacee",
        "filename": "/COMMIT_MSG",
        "patchSetId": 9
      },
      "lineNbr": 15,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2024-03-12T20:27:53Z",
      "side": 1,
      "message": "\u003e we already have a link from /redfish/v1/Systems/system/\n\nThat lets you traverse the tree, but doesn\u0027t really help with \"what devices are in this chassis\" type questions?",
      "parentUuid": "ba266a5a_5b8132a5",
      "revId": "cd8d3e129c808b1ae96a4b65f15efb31a88f51c0",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4ddf8978_0e74f21b",
        "filename": "/COMMIT_MSG",
        "patchSetId": 9
      },
      "lineNbr": 15,
      "author": {
        "id": 1000020
      },
      "writtenOn": "2024-03-13T02:55:17Z",
      "side": 1,
      "message": "https://redfish.dmtf.org/schemas/v1/PCIeDevice.v1_13_0.json\n\n        \"Links\": {\n            \"additionalProperties\": false,\n            \"description\": \"The links to other resources that are related to this resource.\",\n            \"longDescription\": \"This Redfish Specification-described type shall contain links to resources that are related to but are not contained by, or subordinate to, this resource.\",\n            \"patternProperties\": {\n                \"^([a-zA-Z_][a-zA-Z0-9_]*)?@(odata|Redfish|Message)\\\\.[a-zA-Z_][a-zA-Z0-9_]*$\": {\n                    \"description\": \"This property shall specify a valid odata or Redfish property.\",\n                    \"type\": [\n                        \"array\",\n                        \"boolean\",\n                        \"integer\",\n                        \"number\",\n                        \"null\",\n                        \"object\",\n                        \"string\"\n                    ]\n                }\n            },\n            \"properties\": {\n                \"Chassis\": {\n                    \"description\": \"An array of links to the chassis in which the PCIe device is contained.\",\n                    \"items\": {\n                        \"$ref\": \"http://redfish.dmtf.org/schemas/v1/Chassis.json#/definitions/Chassis\"\n                    },\n                    \"longDescription\": \"This property shall contain an array of links to resources of type Chassis that represent the physical containers associated with this resource.\",\n                    \"readonly\": true,\n                    \"type\": \"array\"\n                },\n\nIs the property you want for  \"what devices are in this chassis\" type.",
      "parentUuid": "62dfd414_20beacee",
      "revId": "cd8d3e129c808b1ae96a4b65f15efb31a88f51c0",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5f859480_cef9b63f",
        "filename": "/COMMIT_MSG",
        "patchSetId": 9
      },
      "lineNbr": 15,
      "author": {
        "id": 1000020
      },
      "writtenOn": "2024-03-13T02:55:17Z",
      "side": 1,
      "message": "Two things (and please add this to your comment msg/correct me if I\u0027m not getting the problem):\n1) Redfish defines paths resources can be implemented at: \n```\n\u003cAnnotation Term\u003d\"Redfish.Uris\"\u003e\n\u003cCollection\u003e\n\u003cString\u003e\n/redfish/v1/Chassis/{ChassisId}/PCIeDevices/{PCIeDeviceId}\n\u003c/String\u003e\n\u003cString\u003e\n/redfish/v1/Systems/{ComputerSystemId}/PCIeDevices/{PCIeDeviceId}\n\u003c/String\u003e\n```\nPCIeDevices were put under Systems. Redfish is a hypermedia API; there should always be a link from parent to child. We have this today.\nhttps://github.com/openbmc/bmcweb/blob/9970e93f794d0110de436828775e333e81330ad5/redfish-core/include/utils/pcie_util.hpp#L43\n\nThe link from Chassis to /redfish/v1/Systems/system/PCIeDevices is unexpected and worse than that, breaks for \n\n2) This breaks for multiple chassis systems, it assumes all PCIeDevices are in all Chasiss. \n\nWe could have put PCIeDevices under Chassis but they were put under system instead. I can see a case for either, I think Systems is fine though and Redfish gives us a way to link PCIeDevices to a Chassis but it isn\u0027t this, it is Links/Chassis on the PCIeDevice schema.\nRemove this link, one day an association will probably be needed to fill out Links/Chassis on PCIeDevice.\n\n\u003e In addition, can we get an explanation of what clients that relied on this property should do instead?\n\nThe link is still there, it is just in the system resource only now. The case of walking the whole tree isn\u0027t broke. Clients shouldn\u0027t be assuming some link.. We are removing wrong information here.",
      "parentUuid": "d91f060a_12e6f3d8",
      "revId": "cd8d3e129c808b1ae96a4b65f15efb31a88f51c0",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d77e43a0_78828989",
        "filename": "/COMMIT_MSG",
        "patchSetId": 9
      },
      "lineNbr": 15,
      "author": {
        "id": 1000353
      },
      "writtenOn": "2024-03-13T08:11:53Z",
      "side": 1,
      "message": "I have updated the commit msg with more information, please let me know if still I need to add more infos there.",
      "parentUuid": "5f859480_cef9b63f",
      "revId": "cd8d3e129c808b1ae96a4b65f15efb31a88f51c0",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "169b0af6_6164049a",
        "filename": "/COMMIT_MSG",
        "patchSetId": 9
      },
      "lineNbr": 15,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2024-03-14T03:44:01Z",
      "side": 1,
      "message": "\u003e The link from Chassis to /redfish/v1/Systems/system/PCIeDevices is unexpected \n\nOk, I see the problem, we put PCIeDevices as a property, when the code should\u0027ve been \n\n        asyncResp-\u003eres.jsonValue[\"Links\"][\"PCIeDevices\"][\"@odata.id\"] \u003d\n            \"/redfish/v1/Systems/system/PCIeDevices\";\n\nNote, the links added to the above.\n\n\n\u003e This breaks for multiple chassis systems, it assumes all PCIeDevices are in all Chasiss. \n\nRight, which was the assumption at the time.  Do we have any examples of a multi-chassis system today?  I haven\u0027t seen a lot of other patches worry about that.\n\n\n\nI would say lets put it under links where it belongs, to fix the \"bug\", and point folks to the new location, and when we get examples of multi-chassis systems, we can figure out what the right behavior is for those.  I\u0027m not comfortable with this patch, which basically removes something that clients might have used, and says (in effect) \"Good luck finding an alternative\".\n\nIf this link is wrong on multi-chassis systems, why aren\u0027t we just making it correct?",
      "parentUuid": "d77e43a0_78828989",
      "revId": "cd8d3e129c808b1ae96a4b65f15efb31a88f51c0",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5db84dac_f2d09d9b",
        "filename": "/COMMIT_MSG",
        "patchSetId": 9
      },
      "lineNbr": 15,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2024-03-14T03:44:01Z",
      "side": 1,
      "message": "So, put this under that instead of deleting it?",
      "parentUuid": "4ddf8978_0e74f21b",
      "revId": "cd8d3e129c808b1ae96a4b65f15efb31a88f51c0",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "bc26000f_183fb42d",
        "filename": "/COMMIT_MSG",
        "patchSetId": 9
      },
      "lineNbr": 15,
      "author": {
        "id": 1000020
      },
      "writtenOn": "2024-03-14T05:14:53Z",
      "side": 1,
      "message": "Need an association for that link. I think this is a step in the right direction. Can we get an association for review in PDI for that link?",
      "parentUuid": "5db84dac_f2d09d9b",
      "revId": "cd8d3e129c808b1ae96a4b65f15efb31a88f51c0",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "353210ef_a9c522de",
        "filename": "/COMMIT_MSG",
        "patchSetId": 9
      },
      "lineNbr": 15,
      "author": {
        "id": 1000020
      },
      "writtenOn": "2024-03-14T05:14:53Z",
      "side": 1,
      "message": "\u003e Do we have any examples of a multi-chassis system today? I haven\u0027t seen a lot of other patches worry about that.\n\nYes, IBM supports a multiple chassis system. With chassis upstream, being both boards and chassis, I thought most companies have multiple chassis. I remember we had a special flag to assume one chassis but that support is long gone. \n\n\u003e  I\u0027m not comfortable with this patch, which basically removes something that clients might have used, and says (in effect) \"Good luck finding an alternative\".\n\nThe link is still there.. It is under the parent of the PCIeDevices.. \"/redfish/v1/Systems/system/\".. \nI am struggling to understand why a client is looking here for the PCIeDevices",
      "parentUuid": "169b0af6_6164049a",
      "revId": "cd8d3e129c808b1ae96a4b65f15efb31a88f51c0",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    }
  ]
}