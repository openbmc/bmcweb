{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "6a0bb79e_70dfd6d5",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 7
      },
      "lineNbr": 0,
      "author": {
        "id": 1000593
      },
      "writtenOn": "2022-06-24T01:29:39Z",
      "side": 1,
      "message": "Thank you for looking into this. It will be great to have this cleaned up.\n\nI will abandon my simplistic approach in: https://gerrit.openbmc.org/c/openbmc/bmcweb/+/54834",
      "revId": "601af42061bee5a69ad6576d62fabb37cba9dc28",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "77a48049_53b4264b",
        "filename": "src/dbus_singleton.cpp",
        "patchSetId": 7
      },
      "lineNbr": 12,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-06-24T15:31:11Z",
      "side": 1,
      "message": "I suspect for the moment we don\u0027t need the DBus singleton class at all to solve the immediate problem, right?  Yes, our use of a raw pointer here isn\u0027t the best, but over time we should work with the sdbusplus maintainers to figure out what the intended pattern here is.\n\nIdeally systembus would just be an RAII object on stack declared after the io_context.... in fact, I wonder if that\u0027s what we should just do?",
      "range": {
        "startLine": 12,
        "startChar": 5,
        "endLine": 12,
        "endChar": 18
      },
      "revId": "601af42061bee5a69ad6576d62fabb37cba9dc28",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "38c61fa5_eb534830",
        "filename": "src/dbus_singleton.cpp",
        "patchSetId": 7
      },
      "lineNbr": 12,
      "author": {
        "id": 1000682
      },
      "writtenOn": "2022-06-24T16:16:10Z",
      "side": 1,
      "message": "Yes, that\u0027s exactly my idea. Please take a look at what I have now.\n\nRaw extern pointer was kept to avoid massive treeside change.",
      "parentUuid": "77a48049_53b4264b",
      "range": {
        "startLine": 12,
        "startChar": 5,
        "endLine": 12,
        "endChar": 18
      },
      "revId": "601af42061bee5a69ad6576d62fabb37cba9dc28",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "cc6bfdf5_4fc5a250",
        "filename": "src/dbus_singleton.cpp",
        "patchSetId": 7
      },
      "lineNbr": 23,
      "author": {
        "id": 1000593
      },
      "writtenOn": "2022-06-24T01:29:39Z",
      "side": 1,
      "message": "I am not sure I understand. It looks as if on line 27 you will call this function with a nullptr. That will create issues on line 23 when you build a connection.\n\nI suspect you want to create the bus (asio::connection) one time, in initialize.\nAnd every subsequent DBusSingleton::systemBus() call,  return  weak_pointer to it (or a reference because it is static).",
      "range": {
        "startLine": 23,
        "startChar": 44,
        "endLine": 23,
        "endChar": 46
      },
      "revId": "601af42061bee5a69ad6576d62fabb37cba9dc28",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7e9a9993_55e6db77",
        "filename": "src/dbus_singleton.cpp",
        "patchSetId": 7
      },
      "lineNbr": 23,
      "author": {
        "id": 1000682
      },
      "writtenOn": "2022-06-24T01:43:22Z",
      "side": 1,
      "message": "Please see\n\nhttps://stackoverflow.com/questions/21395459/how-to-pass-argument-in-a-singleton\nhttps://stackoverflow.com/questions/449436/singleton-instance-declared-as-static-variable-of-getinstance-method-is-it-thre/449823#449823\n\nline 27 will only be called after line 12. And then, in following calls of line 27, line 23 won\u0027t be executed at all. That\u0027s the main idea of using static local variable. More information in https://laristra.github.io/flecsi/src/developer-guide/patterns/meyers_singleton.html.\n\nIf we hit nullptr issue here, my test will fail immediately",
      "parentUuid": "cc6bfdf5_4fc5a250",
      "range": {
        "startLine": 23,
        "startChar": 44,
        "endLine": 23,
        "endChar": 46
      },
      "revId": "601af42061bee5a69ad6576d62fabb37cba9dc28",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "56b296bf_c9fcf96e",
        "filename": "src/dbus_singleton.cpp",
        "patchSetId": 7
      },
      "lineNbr": 23,
      "author": {
        "id": 1000682
      },
      "writtenOn": "2022-06-24T16:16:10Z",
      "side": 1,
      "message": "Not applied anymore.",
      "parentUuid": "7e9a9993_55e6db77",
      "range": {
        "startLine": 23,
        "startChar": 44,
        "endLine": 23,
        "endChar": 46
      },
      "revId": "601af42061bee5a69ad6576d62fabb37cba9dc28",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    }
  ]
}