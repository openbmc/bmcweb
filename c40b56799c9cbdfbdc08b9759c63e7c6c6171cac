{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "9eaf7907_94be7d1a",
        "filename": "redfish-core/lib/update_service.hpp",
        "patchSetId": 50
      },
      "lineNbr": 802,
      "author": {
        "id": 1000885
      },
      "writtenOn": "2022-02-23T22:50:47Z",
      "side": 1,
      "message": "Any tip on\n```\ndiff --git a/redfish-core/lib/update_service.hpp b/redfish-core/lib/update_service.hpp\nindex 21265eb..ae703b5 100644\n--- a/redfish-core/lib/update_service.hpp\n+++ b/redfish-core/lib/update_service.hpp\n@@ -789,8 +789,7 @@ inline static void\n     sdbusplus::asio::setProperty\u003cbool\u003e(\n         *crow::connections::systemBus, service, path,\n         \"xyz.openbmc_project.Software.Settings\", \"WriteProtected\",\n-        std::move(writeProtected),\n-        [asyncResp](const boost::system::error_code ec) {\n+        writeProtected, [asyncResp](const boost::system::error_code ec) {\n             if (ec)\n             {\n                 BMCWEB_LOG_ERROR \u003c\u003c \"setWriteProtected D-Bus responses error: \"\n```\n?\n\nAfter I moved it it failed again with\n```\nc++ -Ibmcweb.p -I. -I.. -I../include -I../redfish-core/include -I../redfish-core/lib -I../http -I/usr/local/include -flto\u003dauto -fdiagnostics-color\u003dnever -D_FILE_OFFSET_BITS\u003d64 -Wall -Winvalid-pch -Wnon-virtual-dtor -Wextra -Wpedantic -Werror -std\u003dc++20 -fno-rtti -g -fno-lto -DBMCWEB_ENABLE_BASIC_AUTHENTICATION -DBMCWEB_ENABLE_COOKIE_AUTHENTICATION -DBMCWEB_ENABLE_HOST_SERIAL_WEBSOCKET -DBMCWEB_ENABLE_SSL -DBMCWEB_ENABLE_KVM -DBMCWEB_ENABLE_MUTUAL_TLS_AUTHENTICATION -DBMCWEB_ENABLE_REDFISH -DBMCWEB_ALLOW_DEPRECATED_POWER_THERMAL -DBMCWEB_ENABLE_REDFISH_HOST_LOGGER -DBMCWEB_ENABLE_SESSION_AUTHENTICATION -DBMCWEB_ENABLE_STATIC_HOSTING -DBMCWEB_ENABLE_VM_WEBSOCKET -DBMCWEB_ENABLE_XTOKEN_AUTHENTICATION -Wcast-align -Wconversion -Wformat\u003d2 -Wold-style-cast -Woverloaded-virtual -Wsign-conversion -Wunused -Wno-attributes -Wduplicated-cond -Wduplicated-branches -Wlogical-op -Wunused-parameter -Wnull-dereference -Wdouble-promotion -DBMCWEB_ENABLE_LOGGING -DBMCWEB_ENABLE_DEBUG -DBOOST_ALLOW_DEPRECATED_HEADERS -DBOOST_ASIO_NO_DEPRECATED -DBOOST_ASIO_SEPARATE_COMPILATION -DBOOST_BEAST_SEPARATE_COMPILATION -DBOOST_BEAST_USE_STD_STRING_VIEW -DJSON_NOEXCEPTION -DBOOST_ASIO_DISABLE_THREADS -DBOOST_ALL_NO_LIB -DBOOST_SYSTEM_NO_DEPRECATED -DBOOST_ERROR_CODE_HEADER_ONLY -DBOOST_COROUTINES_NO_DEPRECATION_WARNING -MD -MQ bmcweb.p/src_webserver_main.cpp.o -MF bmcweb.p/src_webserver_main.cpp.o.d -o bmcweb.p/src_webserver_main.cpp.o -c ../src/webserver_main.cpp\nIn file included from ../redfish-core/include/redfish.hpp:46,\n                 from ../src/webserver_main.cpp:17:\n../redfish-core/include/../lib/update_service.hpp: In function ‘void redfish::setWriteProtected(const std::shared_ptr\u003cbmcweb::AsyncResp\u003e\u0026, const string\u0026, const string\u0026, bool)’:\n../redfish-core/include/../lib/update_service.hpp:789:39: error: no matching function for call to ‘setProperty\u003cbool\u003e(std::__shared_ptr_access\u003csdbusplus::asio::connection, __gnu_cxx::_S_atomic, false, false\u003e::element_type\u0026, const string\u0026, const string\u0026, const char [38], const char [15], bool\u0026, redfish::setWriteProtected(const std::shared_ptr\u003cbmcweb::AsyncResp\u003e\u0026, const string\u0026, const string\u0026, bool)::\u003clambda(boost::system::error_code)\u003e)’\n  789 |     sdbusplus::asio::setProperty\u003cbool\u003e(\n      |     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n  790 |         *crow::connections::systemBus, service, path,\n      |         ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n  791 |         \"xyz.openbmc_project.Software.Settings\", \"WriteProtected\",\n      |         ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n  792 |         writeProtected, [asyncResp](const boost::system::error_code ec) {\n      |         ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n  793 |             if (ec)\n      |             ~~~~~~~                    \n  794 |             {\n      |             ~                          \n  795 |                 BMCWEB_LOG_ERROR \u003c\u003c \"setWriteProtected D-Bus responses error: \"\n      |                 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n  796 |                                  \u003c\u003c ec;\n      |                                  ~~~~~~\n  797 |                 messages::internalError(asyncResp-\u003eres);\n      |                 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n  798 |                 return;\n      |                 ~~~~~~~                \n  799 |             }\n      |             ~                          \n  800 |             messages::success(asyncResp-\u003eres);\n      |             ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n  801 |         });\n      |         ~~                             \nIn file included from ../redfish-core/lib/metric_report.hpp:9,\n                 from ../redfish-core/include/event_service_manager.hpp:17,\n                 from ../include/ibm/management_console_rest.hpp:8,\n                 from ../src/webserver_main.cpp:11:\n/usr/local/include/sdbusplus/asio/property.hpp:85:13: note: candidate: ‘template\u003cclass T, class Handler\u003e void sdbusplus::asio::setProperty(sdbusplus::asio::connection\u0026, const string\u0026, const string\u0026, const string\u0026, const string\u0026, T\u0026\u0026, Handler\u0026\u0026)’\n   85 | inline void setProperty(sdbusplus::asio::connection\u0026 bus,\n      |             ^~~~~~~~~~~\n/usr/local/include/sdbusplus/asio/property.hpp:85:13: note:   template argument deduction/substitution failed:\nIn file included from ../redfish-core/include/redfish.hpp:46,\n                 from ../src/webserver_main.cpp:17:\n../redfish-core/include/../lib/update_service.hpp:792:9: note:   cannot convert ‘writeProtected’ (type ‘bool’) to type ‘bool\u0026\u0026’\n  792 |         writeProtected, [asyncResp](const boost::system::error_code ec) {\n      |         ^~~~~~~~~~~~~~\nninja: build stopped: subcommand failed.\n```",
      "range": {
        "startLine": 789,
        "startChar": 0,
        "endLine": 802,
        "endChar": 11
      },
      "revId": "c40b56799c9cbdfbdc08b9759c63e7c6c6171cac",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4325f487_af9e35eb",
        "filename": "redfish-core/lib/update_service.hpp",
        "patchSetId": 50
      },
      "lineNbr": 802,
      "author": {
        "id": 1000678
      },
      "writtenOn": "2022-02-24T08:30:50Z",
      "side": 1,
      "message": "SetProperty\u003cbool\u003e tries to convert bool to variant\u003cbool\u003e I guess there is small error in sdbusplus which prevents it. Anyway since it bool it\u0027s much better to not use std::move",
      "parentUuid": "9eaf7907_94be7d1a",
      "range": {
        "startLine": 789,
        "startChar": 0,
        "endLine": 802,
        "endChar": 11
      },
      "revId": "c40b56799c9cbdfbdc08b9759c63e7c6c6171cac",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f9a518c4_ce23c8ac",
        "filename": "redfish-core/lib/update_service.hpp",
        "patchSetId": 50
      },
      "lineNbr": 802,
      "author": {
        "id": 1000885
      },
      "writtenOn": "2022-03-09T23:10:21Z",
      "side": 1,
      "message": "I did some workaround so we don\u0027t have to move for bool. Maybe its good enough?",
      "parentUuid": "4325f487_af9e35eb",
      "range": {
        "startLine": 789,
        "startChar": 0,
        "endLine": 802,
        "endChar": 11
      },
      "revId": "c40b56799c9cbdfbdc08b9759c63e7c6c6171cac",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "64874d98_4914de4b",
        "filename": "redfish-core/lib/update_service.hpp",
        "patchSetId": 50
      },
      "lineNbr": 802,
      "author": {
        "id": 1000678
      },
      "writtenOn": "2022-03-10T14:58:20Z",
      "side": 1,
      "message": "Sorry for late response I investigated this issue and found issue I overlooked before. It should be used like this:\n\nsdbusplus::asio::setProperty( # \u003c- no explicit template parameter\n        *crow::connections::systemBus, service, path,\n        \"xyz.openbmc_project.Software.Settings\", \"WriteProtected\",\n        writeProtected,\n        [asyncResp](const boost::system::error_code ec) {\n            if (ec)\n            {\n                BMCWEB_LOG_ERROR \u003c\u003c \"setWriteProtected D-Bus responses error: \"\n                                 \u003c\u003c ec;\n                messages::internalError(asyncResp-\u003eres);\n                return;\n            }\n            messages::success(asyncResp-\u003eres);\n        });\n\nIf you want to be explicit then because of perfect forwarding you either need to make explicit copy you you did in this workaround or pass a type that should be deduced by perfect forwarding in this case it would be bool\u0026 or bool\u0026\u0026 if std::move is used.",
      "parentUuid": "f9a518c4_ce23c8ac",
      "range": {
        "startLine": 789,
        "startChar": 0,
        "endLine": 802,
        "endChar": 11
      },
      "revId": "c40b56799c9cbdfbdc08b9759c63e7c6c6171cac",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    }
  ]
}