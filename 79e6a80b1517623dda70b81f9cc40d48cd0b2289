{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "8d99d63c_ab620580",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 8
      },
      "lineNbr": 0,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2023-03-27T20:25:24Z",
      "side": 1,
      "message": "https://gerrit.openbmc.org/c/openbmc/webui-vue/+/61961",
      "revId": "79e6a80b1517623dda70b81f9cc40d48cd0b2289",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5df0397e_c13a962c",
        "filename": "include/forward_unauthorized.hpp",
        "patchSetId": 8
      },
      "lineNbr": 39,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2023-03-27T16:50:52Z",
      "side": 1,
      "message": "This check is already effectively present on line 19.\n\nwhat values other than HTML or JSON get sent?",
      "range": {
        "startLine": 37,
        "startChar": 0,
        "endLine": 39,
        "endChar": 62
      },
      "revId": "79e6a80b1517623dda70b81f9cc40d48cd0b2289",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4dd13e2f_9ee695c3",
        "filename": "include/forward_unauthorized.hpp",
        "patchSetId": 8
      },
      "lineNbr": 39,
      "author": {
        "id": 1000276
      },
      "writtenOn": "2023-03-27T19:37:21Z",
      "side": 1,
      "message": "When I reproduce this issue, the web UI sends a DELETE to the session, then sends this request which causes the pop-up box to appear:\nGeneral:\nRequest URL: https://xxx.xxx.49.59/redfish/v1/SessionService/Sessions\nReferrer Policy: strict-origin-when-cross-origin\n\nRequest Headers:\nAccept: application/json, text/plain, */*\nAccept-Encoding: gzip, deflate, br\nAccept-Language: en-US,en;q\u003d0.9\nConnection: keep-alive\nCookie: XSRF-TOKEN\u003dvkK2PxmpltjU3UvWQRAM; SESSION\u003dTYYxjaHPKfxo5FZGDGTo\nHost: xxx.xxx.49.59\nReferer: https://xxx.xxx.49.59/\nsec-ch-ua: \"Microsoft Edge\";v\u003d\"111\", \"Not(A:Brand\";v\u003d\"8\", \"Chromium\";v\u003d\"111\"\nsec-ch-ua-mobile: ?0\nsec-ch-ua-platform: \"Windows\"\nSec-Fetch-Dest: empty\nSec-Fetch-Mode: cors\nSec-Fetch-Site: same-origin\nUser-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/111.0.0.0 Safari/537.36 Edg/111.0.1661.51\nX-XSRF-TOKEN: vkK2PxmpltjU3UvWQRAM\n\nAs a side note: refreshing the page continues to show the pop-up box, but pressing ESC on the pop-up box causes the web UI to redirect to the login page.",
      "parentUuid": "5df0397e_c13a962c",
      "range": {
        "startLine": 37,
        "startChar": 0,
        "endLine": 39,
        "endChar": 62
      },
      "revId": "79e6a80b1517623dda70b81f9cc40d48cd0b2289",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7cc74744_94b5e8ec",
        "filename": "include/forward_unauthorized.hpp",
        "patchSetId": 8
      },
      "lineNbr": 39,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2023-03-27T20:06:36Z",
      "side": 1,
      "message": "\u003e Accept: application/json, text/plain, /\n\nAssuming that is the real header and not some encoding mistake, that\u0027s the problem,  the webui should not be accepting text/plain, and the \", /\" at the end looks completely wrong.  If it wants to accept anything, it should be setting */*.\n\nI suspect next steps are someone needs to triage webui-vue, and why it\u0027s setting that accepts header, especially on a redfish resource.",
      "parentUuid": "4dd13e2f_9ee695c3",
      "range": {
        "startLine": 37,
        "startChar": 0,
        "endLine": 39,
        "endChar": 62
      },
      "revId": "79e6a80b1517623dda70b81f9cc40d48cd0b2289",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b589dc81_a80ac18e",
        "filename": "include/forward_unauthorized.hpp",
        "patchSetId": 8
      },
      "lineNbr": 39,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2023-03-27T20:08:44Z",
      "side": 1,
      "message": "oh, interesting, might be gerrit escaping.  Should\u0027ve been\n\n```\nshould be setting */*\n```",
      "parentUuid": "7cc74744_94b5e8ec",
      "range": {
        "startLine": 37,
        "startChar": 0,
        "endLine": 39,
        "endChar": 62
      },
      "revId": "79e6a80b1517623dda70b81f9cc40d48cd0b2289",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7b1f2d94_b874c24f",
        "filename": "include/forward_unauthorized.hpp",
        "patchSetId": 8
      },
      "lineNbr": 39,
      "author": {
        "id": 1000276
      },
      "writtenOn": "2023-03-27T20:14:17Z",
      "side": 1,
      "message": "Yes. I guess I should have put it in backticks. ðŸ˜Š\n```\nRequest URL: https://xxx.xxx.49.59/redfish/v1/SessionService/Sessions\nReferrer Policy: strict-origin-when-cross-origin\nAccept: application/json, text/plain, */*\nAccept-Encoding: gzip, deflate, br\nAccept-Language: en-US,en;q\u003d0.9\nConnection: keep-alive\nCookie: XSRF-TOKEN\u003dvkK2PxmpltjU3UvWQRAM; SESSION\u003dTYYxjaHPKfxo5FZGDGTo\nHost: xxx.xxx.49.59\nReferer: https://xxx.xxx.49.59/\nsec-ch-ua: \"Microsoft Edge\";v\u003d\"111\", \"Not(A:Brand\";v\u003d\"8\", \"Chromium\";v\u003d\"111\"\nsec-ch-ua-mobile: ?0\nsec-ch-ua-platform: \"Windows\"\nSec-Fetch-Dest: empty\nSec-Fetch-Mode: cors\nSec-Fetch-Site: same-origin\nUser-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/111.0.0.0 Safari/537.36 Edg/111.0.1661.51\nX-XSRF-TOKEN: vkK2PxmpltjU3UvWQRAM\n```\n\nFrom what I could tell, it\u0027s the `*/*` that is causing `isContentTypeAllowed()` on line 19 to return false, but I couldn\u0027t ever figure out why it\u0027s added.",
      "parentUuid": "b589dc81_a80ac18e",
      "range": {
        "startLine": 37,
        "startChar": 0,
        "endLine": 39,
        "endChar": 62
      },
      "revId": "79e6a80b1517623dda70b81f9cc40d48cd0b2289",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2a39529b_ea2107b7",
        "filename": "include/forward_unauthorized.hpp",
        "patchSetId": 8
      },
      "lineNbr": 39,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2023-03-27T20:14:20Z",
      "side": 1,
      "message": "With that said, if it is setting ```*/*```, that\u0027s the problem.",
      "parentUuid": "b589dc81_a80ac18e",
      "range": {
        "startLine": 37,
        "startChar": 0,
        "endLine": 39,
        "endChar": 62
      },
      "revId": "79e6a80b1517623dda70b81f9cc40d48cd0b2289",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c2946bf5_eee968c5",
        "filename": "include/forward_unauthorized.hpp",
        "patchSetId": 8
      },
      "lineNbr": 50,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2023-03-27T16:49:39Z",
      "side": 1,
      "message": "Can you please comment  in your commit message on why:\n\n1. This check is left in place in this patch.  This patch seems to be replacing this check, so it\u0027s not clear why it\u0027s left.\n\n2. Why the browser was not sending an X-Requested-With header during this bug?\n\nThis line of code is supposed to solve the problem you\u0027re solving.",
      "range": {
        "startLine": 49,
        "startChar": 0,
        "endLine": 50,
        "endChar": 75
      },
      "revId": "79e6a80b1517623dda70b81f9cc40d48cd0b2289",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3eea1f10_9c2c6973",
        "filename": "include/forward_unauthorized.hpp",
        "patchSetId": 8
      },
      "lineNbr": 50,
      "author": {
        "id": 1000276
      },
      "writtenOn": "2023-03-27T19:37:21Z",
      "side": 1,
      "message": "Does the web UI need to set this header manually?",
      "parentUuid": "c2946bf5_eee968c5",
      "range": {
        "startLine": 49,
        "startChar": 0,
        "endLine": 50,
        "endChar": 75
      },
      "revId": "79e6a80b1517623dda70b81f9cc40d48cd0b2289",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5a762026_8ca49ecb",
        "filename": "include/forward_unauthorized.hpp",
        "patchSetId": 8
      },
      "lineNbr": 50,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2023-03-27T20:08:44Z",
      "side": 1,
      "message": "I wasn\u0027t able to tell if it\u0027s set by default these days, although it was requested:\n\nAt the very least, it\u0027s a one line change to set it by default.\nhttps://github.com/axios/axios/issues/1322#issuecomment-449626391",
      "parentUuid": "3eea1f10_9c2c6973",
      "range": {
        "startLine": 49,
        "startChar": 0,
        "endLine": 50,
        "endChar": 75
      },
      "revId": "79e6a80b1517623dda70b81f9cc40d48cd0b2289",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2e2b555d_a726e8fa",
        "filename": "include/forward_unauthorized.hpp",
        "patchSetId": 8
      },
      "lineNbr": 50,
      "author": {
        "id": 1001686
      },
      "writtenOn": "2023-03-30T11:58:29Z",
      "side": 1,
      "message": "\u003e This check is left in place in this patch. This patch seems to be replacing this check, so it\u0027s not clear why it\u0027s left.\n\nYes. I have added the header `X-Requested-With` in webui-vue and which is working as expected.\n\n\u003e Why the browser was not sending an X-Requested-With header during this bug?\n\nFrom the webui-vue, header `X-Requested-With` is not added for any API request. That is the reason why the browser popped up the authentication box.",
      "parentUuid": "5a762026_8ca49ecb",
      "range": {
        "startLine": 49,
        "startChar": 0,
        "endLine": 50,
        "endChar": 75
      },
      "revId": "79e6a80b1517623dda70b81f9cc40d48cd0b2289",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "eabdc7dc_dfdf4d6f",
        "filename": "include/http_utility.hpp",
        "patchSetId": 8
      },
      "lineNbr": 47,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2023-03-27T16:49:39Z",
      "side": 1,
      "message": "Where is this list sourced from?  How do we verify this includes all browsers?",
      "range": {
        "startLine": 44,
        "startChar": 0,
        "endLine": 47,
        "endChar": 2
      },
      "revId": "79e6a80b1517623dda70b81f9cc40d48cd0b2289",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3bebd4f2_4ae69670",
        "filename": "include/http_utility.hpp",
        "patchSetId": 8
      },
      "lineNbr": 47,
      "author": {
        "id": 1001686
      },
      "writtenOn": "2023-03-30T10:27:06Z",
      "side": 1,
      "message": "Refered from below,\n\nhttps://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/User-Agent",
      "parentUuid": "eabdc7dc_dfdf4d6f",
      "range": {
        "startLine": 44,
        "startChar": 0,
        "endLine": 47,
        "endChar": 2
      },
      "revId": "79e6a80b1517623dda70b81f9cc40d48cd0b2289",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1f8b2fa8_76352efd",
        "filename": "include/http_utility.hpp",
        "patchSetId": 8
      },
      "lineNbr": 53,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2023-03-27T16:49:39Z",
      "side": 1,
      "message": "Please do not parse structured strings with find().  Please parse them using the appropriate functions. This is called out in COMMON_ERRORS.md",
      "range": {
        "startLine": 53,
        "startChar": 33,
        "endLine": 53,
        "endChar": 37
      },
      "revId": "79e6a80b1517623dda70b81f9cc40d48cd0b2289",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    }
  ]
}